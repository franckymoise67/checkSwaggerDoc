{"swagger":"2.0","info":{"title":"Rainbow admin portal","version":"1.62.1","description":"# Rainbow administrator portal API guide\n\n## Preamble\n\n### Introduction\n\nThis guide describes list of API services that are provided by OT Rainbow management portal system. Services are used to manage OT Rainbow system entities\n\n### Protocol\n\nREST interface is used for sending/receiving OT rainbow API messages. HTTP requests GET, DELETE, POST, UPDATE are used. Standard HTTP responses are used to provide requested information or error status. There is no session notion in OT Rainbow system, so requests could be issued according stateless model, without transport conservation between them. Additional data could be provided in message body. JSON is used as a main format for data encoding in message body part. Each request is started with the following pattern /{module}/{version}/ where {module} is a portal module name to address and {version} is a version of used API, par example, “v1.0”.\n\n### Security considerations\n\nEach request should contain some credential information to authenticate itself. Standard HTTP authentication with basic/bearer modes is used. JSON Web Token mechanism is used to provide authentication information. JWT has a expire timeout that is controlled by OT Rainbow portal to prevent very long token usage. Also authentication with application token is used. The token must be provided in the request HTTP header, using a custom header: APIKey. At server side, token is verified, and if it doesn’t match, 403 Not Allowed response is sent. TLS is used as a transport protocol to support message exchanges between OT Rainbow portal and an application.\n\n","x-logo":{"url":"https://hub.openrainbow.com/img/logohub.svg","backgroundColor":"#ff4900"}},"securityDefinitions":{"Bearer":{"name":"Authorization","in":"header","type":"apiKey","description":"For accessing the API a valid JWT token must be passed in all the queries in the 'Authorization' header.   \n  \nA valid JWT token is generated by the API and returned as answer of a call   \nto the route/login giving a valid user & password.   \n  \nThe following syntax must be used in the 'Authorization' header:   \n  \nBearer xxxxxxyyyyyyyzzzzzz"}},"x-permissions":{"organization_admin":{"name":"organization_admin","title":"Organization Admin","description":"In a Multi-Layer organization that describes a hierarchy including ORGANIZATIONS/COMPANIES/SITES/SYSTEMS, the organization administrator has the view on all companies below. him He can do all management actions for the entities below (companies, sites, systems).   \n  \nHe can manage the organization for which he is administrator and users attached to authorized companies "},"bp_admin":{"name":"bp_admin","title":"BP Admin","description":"BP Admin can manage the EC companies which are linked to this BP (bpId company field). For these companies, he can create, update, delete companies and users, he can manage the PBX connectivity and telephony users provisioning. He can give role BP finance to other BP users. "},"bp_finance":{"name":"bp_finance","title":"BP Finance","description":"BP Finance can make orders and modify existing subscription for his EC companies, and he can retrieve invoices. He can edit BP payment method. "},"company_admin":{"name":"company_admin","title":"Company Admin","description":"In a flat organization that describes single COMPANIES, a company_admin can manage his company and users from his company.   \n  \nIn a Multi-Layer organization that describes a hierarchy including ORGANIZATIONS/COMPANIES/SITES/SYSTEMS, the company administrator has the view on all sites below him. He can do all management actions for the entities below (sites, systems).   \n  \nHe can manage the company for which he is administrator and users attached to authorized company "},"site_admin":{"name":"site_admin","title":"Site Admin","description":"In a Multi-Layer organization that describes a hierarchy including ORGANIZATIONS/COMPANIES/SITES/SYSTEMS, the site administrator has the view on all systems below him. He can do all management actions for the entities below (systems).   \n  \nHe can manage the site for which he is administrator "}},"paths":{"/api/rainbow/admin/v1.0/companies/{companyId}":{"delete":{"tags":["Companies"],"summary":"Delete a company","description":"This API allows administrators to delete a company.   \n  \nUsers with `superadmin` role can delete any company (except default and terminated companies).   \n  \nUsers with `bp_admin` or `bp_finance` role can only delete companies of their End Customers (i.e. all the companies having bpId equal to their companyId).   \n  \nUsers with `admin` role can delete companies they can manage. That is to say: \n\n* an `organization_admin` can delete companies he manages (i.e. companies having organisationId equal to his organisationId)\n* a `company_admin` can only delete his company\n\n  \nA company can be deleted only if : \n\n* it's not the default company nor the terminated company\n* in case of BP company, it's not linked to EC / BP IR companies\n* it's not linked to site(s)\n* it has no subscription(s)\n* it's not already seen as terminated (status equal terminated)\n* there are no more users in this company (except for company_admin asking to delete his company if he is alone in it)\n\n  \nIf company has default subscriptions and/or subscriptions with status equal terminated, company won't be deleted but only disabled (status and name of company changed to terminated)   \nNote that following data linked to the company will be deleted too : \n\n* join company link(s)\n* join company invitation(s)\n* join company request(s)\n* avatar(s)\n* banner(s)\n\n","operationId":"DeleteCompanies","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company unique identifier (like 569ce8c8f9336c471b98eda1)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"organization_admin"},{"name":"bp_admin"},{"name":"bp_finance"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"status":"Company 5901d451faae4928ef13bb78 successfully disabled","data":{"latin_name":"ter_1495051516804_test - acme central team","name":"ter_1495051516804_test - ACME central team","bpHasRightToConnect":false,"lastBannerUpdateDate":null,"lastAvatarUpdateDate":null,"creationDate":"2017-04-27T11:21:53.003Z","statusUpdatedDate":"2017-05-17T20:05:16.947Z","subscriptions":[{"profileName":"Essential","profileId":"58ede0fd48ea010fe51810b8","offerName":"Essential","offerId":"58ede0fd48ea010fe51810b9","_id":"5901d451faae4928ef13bb79","creationDate":"2017-04-27T11:21:53.566Z","status":"active","isDefault":true},{"profileName":"Business","profileId":"58fdb1c322315ea8d106fb2d","offerName":"Business","maxNumberUsers":50,"offerId":"58fdb1c622315ea8d106fb31","_id":"591581c4f018ee587daaa898","creationDate":"2017-05-12T09:35:00.926Z","status":"terminated","isDefault":false}],"settings":{"iceServers":[]},"joinCompanyLinks":[],"visiblityRequests":[],"userSelfRegisterAllowedDomains":[],"userSelfRegisterEnabled":true,"forceHandshake":false,"visibleBy":[],"visibility":"private","status":"terminated","bpId":null,"isBP":false,"organisationId":"590892c922315ea8d106fb39","offerType":"freemium","id":"5901d451faae4928ef13bb78"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"companyId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Company with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"get":{"tags":["Companies"],"summary":"Get a company data","description":"Users with 'superadmin', 'support' role can retrieve any company.   \n**Users with admin role (and not having superadmin nor support role) can only retrieve their own company and companies they manage** (case of organization_admin). They also have right to retrieve their BP company if they have one.   \n**Users with bp_admin of bp_finance role (and not having superadmin nor support role) can only retrieve their own company and companies they manage** (their EC companies). They also have right to retrieve their BP company if they have one. In the case of bp_admin or bp_finance of BP VAD companies, they can also retrieve EC companies being linked to their BP IR companies.   \n  \nIf user request his own company or a company he manages (superadmin, support, organisation admin), `numberUsers` field is returned with the number of Rainbow users being in this company.   \n  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/companies/569d0ef3ef7816921f7e94fa","operationId":"GetCompaniesId","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company unique identifier (like 569ce8c8f9336c471b98eda1)"},{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less company details in response.   \n- `small`: id, name   \n- `medium`: id, name, status, adminEmail, companyContactId, country, website, slogan, description, size, economicActivityClassification, lastAvatarUpdateDate, lastBannerUpdateDate, avatarShape, visibility and without fields (bsCompanyId, zuoraCompanyId, bpCRDid)   \n- `full` for superadmin and support: All fields, including (dataLocation)   \n- `full` for bp_admin or bp_finance: All fields including (subscriptions, bpType, bpBusinessModel, bpApplicantNumber, bpIsContractAccepted, bpContractAcceptationInfo, bpHasRightToSell, bpHasRightToConnect, dataLocation)   \n- `full` for admin: All fields including BP field 'bpType' and dataLocation, but without fields (subscriptions, bsCompanyId, zuoraCompanyId, bpBusinessModel, bpApplicantNumber, bpCRDid, bpIsContractAccepted, bpContractAcceptationInfo, bpHasRightToSell, bpHasRightToConnect)","enum":["small","medium","full"],"default":"small"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"number"},"examples":{"application/json":{"data":{"id":"569ce8c8f9336c471b98eda1","creationDate":"2016-01-18T13:29:44.498Z","statusUpdatedDate":"2016-01-18T13:29:44.497Z","name":"AL-ENTERPRISE","country":"FRA","status":"active","visibility":"private","visibleBy":["56fabb217d8d3ffa3d0223f8","56d6f00441255dd54b5b61ae"],"adminEmail":"admin@company.com","supportEmail":"support@company.com","userSelfRegisterEnabled":true,"userSelfRegisterAllowedDomains":["@alcatel-lucent.com","@al-enterprise.com","@al-enterprise.fr","@al-enterprise.de"],"slogan":"The slogan of my company","description":"A free string that describes my company","size":"1001-5000 employees","website":"http:\\/\\/enterprise.alcatel-lucent.com","organisationId":"57cd58edd341df5812bbcb71","customData":{"key1":123,"key2":"a string","key3":true,"key4":"an object"},"bpId":null,"offerType":"premium","numberUsers":3256,"isBP":true,"bpHasRightToSell":true,"bpHasRightToConnect":true,"dataLocation":{"name":"Europe","location":"France","country":"FRA"}}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"companyId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Company with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"put":{"tags":["Companies"],"summary":"Update a company","description":"Users with superadmin role can update any company. Users with admin role (and not having superadmin role) can only update their own company.   \n  \nDefault and Terminated companies can't be renamed, and their name can't be use to rename another company","operationId":"PutCompanies","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company unique identifier (like 569ce8c8f9336c471b98eda1)"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PutCompanies"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PutCompaniesSuccess"},"examples":{"application/json":{"data":{"id":"57f3b02f551928af263d6f0a","creationDate":"2017-02-10T13:29:44.498Z","statusUpdatedDate":"2017-02-10T13:29:44.497Z","name":"A Business Partner","country":"FRA","status":"active","visibility":"public","visibleBy":[],"adminEmail":"admin@bp.fr","supportEmail":"support@bp.fr","companyContactId":"5899d3dfb567f2e8104bfbe5","userSelfRegisterEnabled":false,"userSelfRegisterAllowedDomains":[],"description":"Description of the Business Partner","size":"51-200 employees","giphyEnabled":false,"organisationId":null,"catalogId":"5979f63bae6056aadd1a8f17","bpId":null,"isBP":true,"bpType":"IR","bpBusinessModel":"resell","bpApplicantNumber":"The applicant number of my BP","bpCRDid":"The CRD id of my BP","bpHasRightToSell":true,"bpHasRightToConnect":true,"bpIsContractAccepted":true,"bpContractAcceptationInfo":{"acceptationDate":"2016-11-18T16:12:12.153Z","bpAdminId":"5703c52929778f618d5a4058","bpAdminLoginEmail":"admin@bp.fr"},"offerType":"premium","avatarShape":"square","customData":{"key3":"Hello","key2":"vvvvv","key1":123}}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"companyId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"It's not possible to set visibility 'organization' to company name 'My company'. (Detail: The visibility 'organization' can't be set when the company is not linked to an organisation)","errorDetailsCode":403212}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Company with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/companies":{"get":{"tags":["Companies"],"summary":"Get all companies","description":"This API allows administrator to retrieve companies they can administrate.   \n  \nUsers with 'superadmin' or 'support' role can retrieve all companies.   \n  \nUsers with admin role (and not having superadmin nor support role) can only retrieve their own company and companies they can manage, i.e.: \n\n* organisation admins can retrieve all companies being in their organisation,\n* bp admins or bp finance of BP DR or BP IR companies can retrieve their company and all of their EC companies (i.e. all companies for which their company is the BP),\n* bp admins or bp finance of BP VAD companies can retrieve their company, all of their BP IR and EC companies, and all the EC companies linked to their BP IR companies,\n* company admins and site admin can only retrieve their own company.\n  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/companies?name=My com&format=small&limit=100&offset=0&sortField=name&sortOrder=-1\n","operationId":"GetCompanies","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less company details in response.   \n- `small`: _id, name   \n- `medium`: id, name, status, adminEmail, companyContactId, country, website, slogan, description, size, economicActivityClassification, lastAvatarUpdateDate, lastBannerUpdateDate, avatarShape, visibility   \n- `full` for superadmin and support: All fields   \n- `full` for admin: All fields except BP fields (bpType, bpBusinessModel, bpApplicantNumber, bpCRDid, bpHasRightToSell, bpHasRightToConnect, bpIsContractAccepted, bpContractAcceptationInfo)","enum":["small","medium","full"],"default":"small"},{"name":"bpId","in":"query","required":false,"type":"string","description":"Allows to filter companies list on bpId field.   \nThis filter allow to get all the End Customer companies associated to a given Business Partner company.   \n  \nOnly users with role `superadmin`, `support`, `bp_admin` or `bp_finance` can use this filter.   \nUsers with role `bp_admin` or `bp_finance` can use this filter on their own company."},{"name":"catalogId","in":"query","required":false,"type":"string","description":"Allows to filter companies list on catalogId field.   \nThis filter allow to get all the companies linked to a given catalogId.   \n  \nOnly users with role `superadmin` or `support` can use this filter."},{"name":"offerId","in":"query","required":false,"type":"string","description":"Allows to filter companies list on companies having subscribed to the provided offerId."},{"name":"offerCanBeSold","in":"query","required":false,"type":"boolean","description":"Allows to filter companies list on companies having subscribed to offers with canBeSold=true.   \nThis filter can only be used with the value true (false is not relevant, as all companies have a subscription to Essential which has canBeSold=false, so all companies would match offerCanBeSold=false)."},{"name":"externalReference","in":"query","required":false,"type":"string","description":"Allows to filter companies list on companies based on externalReference field.   \nThe search is done on externalReference starting with the input characters, case sensitive (ex: ABC will match companies with externalReference ABC, ABCD, ABC12... ; but externalReference abc, AABC, 1ABC, ... will not match).   \n  \nOnly users with role `superadmin`, `support`, `bp_admin` or `bp_finance` can use this filter."},{"name":"externalReference2","in":"query","required":false,"type":"string","description":"Allows to filter companies list on companies based on externalReference2 field.   \nThe search is done on externalReference2 starting with the input characters, case sensitive (ex: ABC will match companies with externalReference2 ABC, ABCD, ABC12... ; but externalReference2 abc, AABC, 1ABC, ... will not match).   \n  \nOnly users with role `superadmin`, `support`, `bp_admin` or `bp_finance` can use this filter."},{"name":"limit","in":"query","required":false,"type":"number","description":"Allow to specify the number of companies to retrieve.","default":"100"},{"name":"offset","in":"query","required":false,"type":"number","description":"Allow to specify the position of first company to retrieve (first company if not specified). Warning: if offset > total, no results are returned."},{"name":"sortField","in":"query","required":false,"type":"string","description":"Sort company list based on the given field.","default":"name"},{"name":"sortOrder","in":"query","required":false,"type":"number","description":"Specify order when sorting company list.","enum":["-1","1"],"default":"1"},{"name":"name","in":"query","required":false,"type":"string","description":"Allows to filter companies list on the given keyword(s) on field name.   \n  \nThe filtering is case insensitive and on partial name match: all companies **containing** the provided name value will be returned (whatever the position of the match).   \nEx: if filtering is done on _comp_, companies with the following names are match the filter 'My company', 'Company', 'A comp 1', 'Comp of comps', ..."},{"name":"status","in":"query","required":false,"type":"string","description":"Allows to filter companies list on the provided status(ies)","enum":["initializing","active","alerting","hold","terminated"]},{"name":"visibility","in":"query","required":false,"type":"string","description":"Allows to filter companies list on the provided visibility(ies)","enum":["private","organization","public"]},{"name":"organisationId","in":"query","required":false,"type":"string","description":"Allows to filter companies list on the organisationIds provided in this option.   \n  \nThis filter can only be used if user has role(s) `superadmin`, `support`, `bp_admin` or `admin`"},{"name":"isBP","in":"query","required":false,"type":"boolean","description":"Allows to filter companies list on isBP field: \n\n* true returns only Business Partner companies,\n* false return only companies which are not Business Partner.\n\n  \nThis filter can only be used if user has role(s) `superadmin`, `support`, `bp_admin` or `admin`."},{"name":"hasBP","in":"query","required":false,"type":"boolean","description":"Allows to filter companies list on companies being linked or not to a BP: \n\n* true returns only companies linked to a BP (BP IR companies are also returned),\n* false return only companies which are not linked to a BP.\n\n  \nThis filter can only be used if user has role(s) `superadmin`, `support` or `bp_admin`.   \nUsers with role `bp_admin` can only use this filter with value `false`."},{"name":"bpType","in":"query","required":false,"type":"string","description":"Allows to filter companies list on bpType field.   \nThis filter allow to get all the Business Partner companies from a given bpType.   \n  \nOnly users with role `superadmin`, `support` or `bp_admin` can use this filter."}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":[{"name":"ALE1","id":"569ce8c8f9336c471b98eda1"},{"name":"ALE2","id":"569ce938f9336c471b98eda2"}],"total":2,"limit":100,"offset":0}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}}}},"post":{"tags":["Companies"],"summary":"Create a company","description":"Only superadmin, BP admin, BP finance and organisation admin can create companies with this API.   \n  \nCompanies created by a `bp_admin` or a `bp_finance` (without organisation admin role) are automatically attached to his BP company (bpId set to BP company). They are created with the status `initializing`.   \nCompanies created by a `bp_admin` or a `bp_finance` having also organisation admin role can be either be created in their organisation (default) or under a BP they manage in their organization (if they provide a bpId). to his BP company (bpId set to BP company). They are created with the status `initializing`. \n\n* If BP company has `bpType` equal to `VAD`, the field `isBp` can be set to true or false: In that case, the created company will be a BP with bpType Indirect Reseller: \n  * If the field `isBp` is set to true, the company is created with isBP = true, bpType = 'IR', bpBusinessModel = 'resell' and bpHasRightToConnect = true (it will be a BP Indirect Reseller company linked to this BP VAD company, this BP IR company will be able to have his own EC companies attached to it)\n  * If the field `isBp` is set to false (or not defined), the company is created with bpId = BP companyId (it will be an End Customer company directly attached to this BP VAD company)\n  * The status of the company will be updated to `active` once the first invited bp_admin / bp_finance (invited using join company invitation with flag invitedToBeBpAdmin set to true) will join this company.\n* If BP company has `bpType` equal to `DR` or `IR`, the created company will be an End Customer company: \n  * The company is created with bpId = BP companyId\n  * The status of the company will be updated to `active` once the first invited company_admin (invited using join company invitation with flag invitedToBeCompanyAdmin set to true) will join this company.\n\n  \nCompanies created by a `Organisation admin` are automatically attached to his organisation.   \n  \n`Users` being in Default company can create their own company using API enduser/PostCompanies [POST /api/rainbow/enduser/v1.0/companies][0]  \n  \nWhen a company is created, a subscription to the Default offer is assigned to this company. All users of this company will be assigned to this default subscription when they are created or when they arrive in the company.   \n  \n**Specific feature:** Sharing a system between several companies   \nSince 1.47.0 release, configuring companies sharing a multi-tenant system is possible.  \nAn OXE can be multi-company.  \nA multi-tenant system, so called CENTREX, allows sharing a call-server between several entities. For us an entity is a company with the flag isCentrex=true.  \nA Company can't change the CENTREX status, when some sites are already created for it.\n\n[0]: /enduser/#api-companies-enduser_PostCompanies","operationId":"PostCompanies","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PostCompanies"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PostCompaniesSuccess"},"examples":{"application/json":{"data":{"id":"57f3b02f551928af263d6f0a","creationDate":"2017-02-10T13:29:44.498Z","statusUpdatedDate":"2017-02-10T13:29:44.497Z","name":"A Business Partner","country":"FRA","status":"active","visibility":"public","visibleBy":[],"adminEmail":"admin@bp.fr","supportEmail":"support@bp.fr","companyContactId":"5899d3dfb567f2e8104bfbe5","userSelfRegisterEnabled":false,"userSelfRegisterAllowedDomains":[],"description":"Description of the Business Partner","size":"51-200 employees","giphyEnabled":false,"organisationId":null,"catalogId":"5979f63bae6056aadd1a8f17","bpId":null,"isBP":true,"bpType":"IR","bpBusinessModel":"resell","bpApplicantNumber":"The applicant number of my BP","bpCRDid":"The CRD id of my BP","bpHasRightToSell":true,"bpHasRightToConnect":true,"bpIsContractAccepted":true,"bpContractAcceptationInfo":{"acceptationDate":"2016-11-18T16:12:12.153Z","bpAdminId":"5703c52929778f618d5a4058","bpAdminLoginEmail":"admin@bp.fr"},"offerType":"premium","avatarShape":"square","customData":{"key3":"Hello","key2":"vvvvv","key1":123}}}}},"400":{"description":"Bad request","examples":{"application/json":{"param":"adminEmail","msg":"Invalid admin email address. Expected field email being a string matching the regexp: /^[a-zA-Z0-9_\\+-]+(\\.[a-zA-Z0-9_\\+-]+)*@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.([a-zA-Z]\\{2,4\\})$/. This field is optional.","value":false}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/companies/{companyId}/administrators":{"get":{"tags":["Companies"],"summary":"Get company administrators","description":"This API allows administrators to list users being administrator of a company.   \n  \nUsers with `superadmin`, `support` role can list administrators from any company.   \n  \nUsers with `bp_admin` or `bp_finance` role can only list administrators for companies being End Customers of their BP company (i.e. all the companies having bpId equal to their companyId).   \n  \nUsers with `admin` role can only list administrators belonging to companies they can manage. That is to say: \n\n* an organization_admin can get list administrators belonging to each companies he manages (i.e. companies having organisationId equal to his organisationId)\n* a company_admin gets list administrators being in his company\n* a site_admin gets nothing\n\n  \n  \nThis API can return more or less user information using format option in query string arguments (default is small).   \nThis API implement pagination, using limit and offset options in query string arguments (default is limit on 100 users). Result sorting can also be done using sort and order options (default is sort on displayName on ascending order).   \n  \nExamples: \n\n* basic: GET https://openrainbow.com/api/rainbow/admin/v1.0/companies/5749aa51245015fe0d36e968/administrators\n* with format options: GET https://openrainbow.com/api/rainbow/admin/v1.0/companies/5749aa51245015fe0d36e968/administrators?format=full\n* with pagination options: GET https://openrainbow.com/api/rainbow/admin/v1.0/companies/5749aa51245015fe0d36e968/administrators?limit=10&offset=20&sortField=loginEmail&sortOrder=-1\n\n","operationId":"GetCompaniesAdministrators","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company for which list of administrators is requested"},{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less user details in response.   \n- `small`: id, displayName, loginEmail, companyId, companyName   \n- `medium`: id, loginEmail, firstName, lastName, displayName, isActive, jid_im, jid_tel, companyId, companyName   \n- `full`: all user fields","enum":["small","medium","full"],"default":"small"},{"name":"limit","in":"query","required":false,"type":"number","description":"Allow to specify the number of users to retrieve.","default":"100"},{"name":"offset","in":"query","required":false,"type":"number","description":"Allow to specify the position of first user to retrieve (first user if not specified). Warning: if offset > total, no results are returned."},{"name":"sortField","in":"query","required":false,"type":"string","description":"Sort user list based on the given field.","default":"displayName"},{"name":"sortOrder","in":"query","required":false,"type":"number","description":"Specify order when sorting user list.","enum":["-1","1"],"default":"1"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":[{"id":"56c5c19f94141765119f896c","displayName":"Firstname Lastname","loginEmail":"user1@company.com","companyId":"569ce8c8f9336c471b98eda1","companyName":"My company","isTerminated":false},{"id":"56c5cb38e8078d7512c43985","displayName":"Firstname Lastname","loginEmail":"user2@company.com","companyId":"569ce8c8f9336c471b98eda1","companyName":"My company","isTerminated":false}],"total":2,"limit":100,"offset":0}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}}}}},"/api/rainbow/admin/v1.0/companies/{companyId}/service-description":{"get":{"tags":["Companies"],"summary":"Get company service description file","description":"This API allows administrators to get service description pdf file uploaded by superadmin","operationId":"GetCompaniesServiceDescription","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company for which service description file is requested"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/GetCompaniesServiceDescriptionSuccess"}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"companyId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}}}}},"/api/rainbow/admin/v1.0/companies/{companyId}/app-customisation":{"get":{"tags":["Companies"],"summary":"Get company App Customisation","description":"This API allows administrators to list the customisation elements of the UI for the company.   \n  \nRetrieves the application UI customisation elements (e.g. background or foreground colors) for the given company.   \nThe list of supported UI elements is the following (naming convention given from the desktop UI, split into 3 panes: control pane, main pane, conversation pane): \n\n* controlPaneBackgroundColor: Background color of the control pane (the one grouping all the action buttons: welcome, bubbles, contacts ...).\n* conversationPaneBackgroundColor: Background color of the conversation history pane.\n* counterBackgroundColor: Background color of counters (e.g. missed calls).\n* buttonBackgroundColor: Default background color of buttons in normal/unselected state.\n* buttonHoverBackgroundColor: Background color of buttons in hover state.\n* buttonForegroundColor: Default foreground color of buttons (i.e. color of the symbol).\n* buttonTextColor: Default color of text in buttons.\n\n","operationId":"GetCompanyAppCustomisation","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company for which list of custom elements is requested."}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"}],"responses":{"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found"},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"put":{"tags":["Companies"],"summary":"Set company App Customisation","description":"This API allows administrators to set or update the customisation elements of the UI for the company.   \n  \nThese elements (e.g. background and foreground colors) will then be available to the end user to customise graphical elements of the application's user interface.   \nSee supported element names in above GET request.   \n  \nThe whole object will replace the existing one, if found.   \nThe customisation object has some limitations: \n\n* Element name can't exceed 50 characters.\n* Element value can't exceed 50 characters.\n\n  \nExample: \n\n* PUT https://openrainbow.com/api/rainbow/admin/v1.0/companies/5749aa51245015fe0d36e968/app-customisation\n\n","operationId":"SetCompanyCustomisation","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company for which update of customisation elements is requested."}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/SetCompanyCustomisationSuccess"}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}}}}},"/api/rainbow/admin/v1.0/companies/default":{"get":{"tags":["Companies"],"summary":"Get default company data","description":"This API allows to get the default Rainbow company.   \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/companies/default","operationId":"GetDefaultCompany","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less company details in response.   \n- `small`: _id, name   \n- `medium`: id, name, status, adminEmail, companyContactId, country, website, slogan, description, size, economicActivityClassification, lastAvatarUpdateDate, lastBannerUpdateDate, avatarShape   \n- `full` for superadmin and support: All fields   \n- `full` for admin: All fields except BP fields (bpType, bpBusinessModel, bpApplicantNumber, bpCRDid, bpHasRightToSell, bpHasRightToConnect, bpIsContractAccepted, bpContractAcceptationInfo)","enum":["small","medium","full"],"default":"full"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":{"id":"57f3b02f551928af263d6f0a","creationDate":"2017-02-10T13:29:44.498Z","statusUpdatedDate":"2017-02-10T13:29:44.497Z","name":"A Business Partner","country":"FRA","status":"active","visibility":"public","visibleBy":[],"adminEmail":"admin@bp.fr","supportEmail":"support@bp.fr","companyContactId":"5899d3dfb567f2e8104bfbe5","userSelfRegisterEnabled":false,"userSelfRegisterAllowedDomains":[],"description":"Description of the Business Partner","size":"51-200 employees","giphyEnabled":false,"organisationId":null,"catalogId":"5979f63bae6056aadd1a8f17","bpId":null,"isBP":true,"bpType":"IR","bpBusinessModel":"resell","bpApplicantNumber":"The applicant number of my BP","bpCRDid":"The CRD id of my BP","bpHasRightToSell":true,"bpHasRightToConnect":true,"bpIsContractAccepted":true,"bpContractAcceptationInfo":{"acceptationDate":"2016-11-18T16:12:12.153Z","bpAdminId":"5703c52929778f618d5a4058","bpAdminLoginEmail":"admin@bp.fr"},"offerType":"premium","avatarShape":"square","customData":{"key3":"Hello","key2":"vvvvv","key1":123}}}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"404":{"description":"Not found"},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/companies/{companyId}/avatar":{"delete":{"tags":["Companies Avatar"],"summary":"Delete company's avatar","description":"This API can be used to delete avatar image for a given companyId.   \n  \nOnly a superadmin is allowed to handle avatars for 'Default' and 'Terminated' companies.","operationId":"admin_companies_deleteAvatar","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company for which list of administrators is requested"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"status":"Avatar successfully deleted for company 56c5c19f94141765119f896c","data":[]}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"userId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"No avatar found for company 56c5c19f94141765119f896c","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"post":{"tags":["Companies Avatar"],"summary":"Upload company's avatar","description":"This API can be used to upload avatar image for a given companyId   \n  \nRules: \n\n* Avatar can only be set for `premium` companies (company `offerType`=`premium`).\n* Avatar file has to be sent directly in http body (no JSon).\n* Only **jpeg, jpg and png** files are supported. Appropriate content-type has to be set (image/jpeg or image/png).\n* If company already has an avatar, the existing one is overwritten.\n* By default, avatar file size is limited to 4194304 bytes (4 MB) (this limit can be changed by integration team in admin portal config file).\n* When an avatar is uploaded, the field `lastAvatarUpdateDate` of the company is updated to the current date.\n\nOnly a superadmin is allowed to handle avatars for 'Default' and 'Terminated' companies.","operationId":"admin_companies_postAvatar","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company for which list of administrators is requested"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/admin_companies_postAvatarSuccess"},"examples":{"application/json":{"status":"Avatar successfully set for company 56c5c19f94141765119f896c","data":[]}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":"Avatar format not managed. Got file with type bmp, supported file types: jpeg,jpg,png","errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"413":{"description":"Request Entity Too Large","examples":{"application/json":{"errorCode":413,"errorMsg":"Request Entity Too Large","errorDetails":"File too large. Max size allowed for this file is 4194304 bytes","errorDetailsCode":413000,"maxSize":4194304}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/avatar/{companyId}":{"get":{"tags":["Companies Avatar"],"summary":"Get company's avatar","description":"This API can be used to retrieve company's avatar (logo).   \nExample: GET https://openrainbow.com/api/avatar/56c5c19f94141765119f896c?size=128   \n  \nClients can request avatars in a given size by specifying size query string parameter.   \nAvatar file can be resized from 1px to its original resolution, with a maximum of 2048px: \n\n* If no size option is requested, avatar is returned by default with resolution of 80px.\n* Max requestable size is 2048. **If a higher resolution is requested, the default size is returned instead, i.e. 80px.**\n* Original avatars resolution can't be increased. If uploaded avatar size is 128 x 128 px, even is client request avatar with size 256, the original avatar file will be returned (128px).\n\n","operationId":"admin_companies_getAvatar","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company for which list of administrators is requested"},{"name":"size","in":"query","required":false,"type":"number","description":"Specify avatar size in pixels (square size x size).","enum":["1..512"],"default":"80"}],"security":[{"Bearer":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"binary"}},"404":{"description":"Not found"}}}},"/api/rainbow/admin/v1.0/companies/{companyId}/banner":{"delete":{"tags":["Companies Banner"],"summary":"Delete company's banner","description":"This API can be used to delete avatar image for a given companyId.   \n  \nOnly a superadmin is allowed to handle avatars for 'Default' and 'Terminated' companies.","operationId":"admin_companies_deleteBanner","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company for which list of administrators is requested"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"status":"Banner successfully deleted for company 56c5c19f94141765119f896c","data":[]}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"userId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"No banner found for company 56c5c19f94141765119f896c","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"post":{"tags":["Companies Banner"],"summary":"Upload company's banner","description":"This API can be used to upload banner image for a given companyId   \n  \nRules: \n\n* Banner can only be set for `premium` companies (company `offerType`=`premium`).\n* Banner file has to be sent directly in http body (no JSon).\n* Only **jpeg, jpg and png** files are supported. Appropriate content-type has to be set (image/jpeg or image/png).\n* If company already has a banner, the existing one is overwritten.\n* By default, banner file size is limited to 10485760 bytes (10 MB) (this limit can be changed by integration team in admin portal config file).\n* When a banner is uploaded, the field `lastBannerUpdateDate` of the company is updated to the current date.\n\nOnly a superadmin is allowed to handle banner for 'Default' and 'Terminated' companies.","operationId":"admin_companies_postBanner","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company for which list of administrators is requested"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/admin_companies_postBannerSuccess"},"examples":{"application/json":{"status":"Banner successfully set for company 56c5c19f94141765119f896c","data":[]}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":"Banner format not managed. Got file with type bmp, supported file types: jpeg,jpg,png","errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"413":{"description":"Request Entity Too Large","examples":{"application/json":{"errorCode":413,"errorMsg":"Request Entity Too Large","errorDetails":"File too large. Max size allowed for this file is 10485760 bytes","errorDetailsCode":413000,"maxSize":10485760}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/banner/{companyId}":{"get":{"tags":["Companies Banner"],"summary":"Get company's banner","description":"This API can be used to retrieve company's banner in addition to the logo retrieved via /api/avatar/{companyId}.   \nExample: GET https://openrainbow.com/api/banner/56c5c19f94141765119f896c?size=128   \n  \nClients can request banners in a given size by specifying size query string parameter.   \nBanner file can be resized from 1px to its original resolution: \n\n* If no size option is requested, banner is returned by default with resolution of 80px.\n* Max requestable size is 2048. **If a higher resolution is requested, the default size is returned instead, i.e. 80px.**\n* Original banner resolution can't be increased. If uploaded banner size is 128 x 128 px, even is client request banner with size 256, the original avatar file will be returned (128px).\n\n","operationId":"admin_companies_getBanner","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company for which list of administrators is requested"},{"name":"size","in":"query","required":false,"type":"number","description":"Specify avatar size in pixels (square size x size).","enum":["1..512"],"default":"80"}],"security":[{"Bearer":[]}],"responses":{"200":{"description":"successful operation","schema":{"type":"binary"}},"404":{"description":"Not found"}}}},"/api/rainbow/admin/v1.0/companies/{companyId}/custom-data":{"put":{"tags":["Companies Custom Data"],"summary":"Manage custom data","description":"This API is still working, but customData management can now be done directly\nat company creation (using API [POST /api/rainbow/admin/v1.0/companies](#api-companies-PostCompanies)\nor with a company update (using API [PUT /api/rainbow/admin/v1.0/companies/:companyId](#api-companies-PutCompanies).","operationId":"PutCompaniesCustomData","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company unique identifier (like 569ce8c8f9336c471b98eda1)"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PutCompaniesCustomData"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"}],"deprecated":true,"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/customData"},"examples":{"application/json":{"data":{"id":"569ce8c8f9336c471b98eda1","customData":{"key1":123,"key2":"a string","key3":true,"key4":"an object"}}}}},"400":{"description":"Bad request","examples":{"application/json":{"param":"customData","msg":"Invalid field customData. Expected an object with value length at most 512 char(s)"}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Company with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/companies/{companyId}/sites":{"get":{"tags":["Companies Sites"],"summary":"Get all sites linked with this company","description":"This API allows administrator to retrieve sites linked to a given company   \n  \n`superadmin` and `support` get sites linked to all companies existing in Rainbow.   \n`bp_admin` or `bp_finance` only get sites linked to End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` only get sites linked to companies under their organization.   \n`company_admin` only get sites linked to their company.   \n`site_admin` is not allowed to use this API.   \n  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/companies/5749aa51245015fe0d36e968/sites?format=full","operationId":"GetCompanySites","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company unique identifier (like 569ce8c8f9336c471b98eda1)"},{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less site details in response.   \n- `small`: _id, name   \n- `medium`: _id, name, status, companyId   \n- `full`: all site fields","enum":["small","medium","full"],"default":"small"},{"name":"name","in":"query","required":false,"type":"string","description":"Allows to filter sites list on field name.   \n  \nThe filtering is case insensitive and on partial name match: all sites **containing** the provided name value will be returned (whatever the position of the match).   \nEx: if filtering is done on _sit_, sites with the following names are match the filter 'My site', 'Site', 'A site 1', 'Site of company', 'Sit1', 'Sit2', ..."},{"name":"companyId","in":"query","required":false,"type":"string","description":"Allows to filter sites list on the companyIds provided in this option."},{"name":"limit","in":"query","required":false,"type":"number","description":"Allow to specify the number of companies to retrieve.","default":"100"},{"name":"offset","in":"query","required":false,"type":"number","description":"Allow to specify the position of first site to retrieve (first site if not specified). Warning: if offset > total, no results are returned."},{"name":"sortField","in":"query","required":false,"type":"string","description":"Sort site list based on the given field.","default":"name"},{"name":"sortOrder","in":"query","required":false,"type":"number","description":"Specify order when sorting site list.","enum":["-1","1"],"default":"1"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":[{"name":"ALE1","id":"569ce8c8f9336c471b98eda1"},{"name":"ALE2","id":"569ce938f9336c471b98eda2"}],"total":2,"limit":100,"offset":0}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"companyId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"User 5749afba245015fe0d36e96c with 'admin' role is not assigned to administrate Organisation 57486e5d807a594145e510d6","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Company with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/organisations":{"get":{"tags":["Organisations"],"summary":"Get all organisations","description":"Users with 'superadmin', 'support' or 'admin' role can retrieve all organisations. Users with admin role (and not having superadmin nor support role) can only retrieve organisations he has to manage.   \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/organisations?format=small&limit=100&offset=0&sortField=name&sortOrder=-1","operationId":"GetOrganisations","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less organisation details in response.   \n- `small`: _id, name   \n- `medium`: _id, name   \n- `full`: all company fields","enum":["small","medium","full"],"default":"small"},{"name":"limit","in":"query","required":false,"type":"number","description":"Allow to specify the number of companies to retrieve.","default":"100"},{"name":"offset","in":"query","required":false,"type":"number","description":"Allow to specify the position of first company to retrieve (first company if not specified). Warning: if offset > total, no results are returned."},{"name":"sortField","in":"query","required":false,"type":"string","description":"Sort organisation list based on the given field.","default":"name"},{"name":"sortOrder","in":"query","required":false,"type":"number","description":"Specify order when sorting company list.","enum":["-1","1"],"default":"1"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"organization_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":[{"name":"ALE international","id":"57486e5d807a594145e510d6"}],"limit":100,"offset":0,"total":1}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}}}}},"/api/rainbow/admin/v1.0/organisations/{organisationId}":{"get":{"tags":["Organisations"],"summary":"Get an organisation data","description":"Users with 'superadmin', 'support' or 'admin' role can retrieve any company.  \n**Users with admin role (and not having superadmin nor support role) can only retrieve organisations he has to manage..**  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/organisations/57486e5d807a594145e510d6","operationId":"GetOrganisationsId","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"organisationId","in":"path","required":true,"type":"string","description":"Organisation unique identifier (like 569ce8c8f9336c471b98eda1)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"organization_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":{"id":"57486e5d807a594145e510d6","creationDate":"2016-05-27T15:57:17.998Z","latin_name":"ale international","name":"ALE international","visibility":"private"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":"CompanyId 56b89d26f7ab94c69ad41584 is the companyId of the default company that cannot be linked with any organisation","errorDetailsCode":400502}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"User 5749afba245015fe0d36e96c with 'admin' role is not assigned to administrate Organisation 57486e5d807a594145e510d6","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Organisation with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"put":{"tags":["Organisations"],"summary":"Update an organisation","description":"","operationId":"PutOrganisations","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"organisationId","in":"path","required":true,"type":"string","description":"Organisation unique identifier (like 569ce8c8f9336c471b98eda1)"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PutOrganisations"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"organization_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PutOrganisationsSuccess"},"examples":{"application/json":{"data":{"id":"57486e5d807a594145e510d6","creationDate":"2016-05-27T15:57:17.998Z","latin_name":"ale international","name":"ALE international","visibility":"private"}}}},"400":{"description":"Bad request","examples":{"application/json":{"param":"visibility","msg":"Invalid Organisation visibility. Expected field visibility being a string and having one of the following values: private, public"}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"User 5749afba245015fe0d36e96c with 'admin' role is not assigned to administrate Organisation 57486e5d807a594145e510d6","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Organisation with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/organisations/{organisationId}/companies/{companyId}":{"delete":{"tags":["Organisations Companies"],"summary":"Unlink the company to an organization","description":"","operationId":"DeleteOrganisationCompanies","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"companyId","in":"path","required":true,"type":"string","description":"Company unique identifier (like 5749ab92245015fe0d36e96a)"},{"name":"organisationId","in":"path","required":true,"type":"string","description":"Organisation unique identifier (like 569ce8c8f9336c471b98eda1)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"organization_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"status":"Company 5749ab92245015fe0d36e96a successfully deleted","data":[]}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":"CompanyId 56b89d26f7ab94c69ad41584 is the companyId of the default company that cannot be linked with any organisation","errorDetailsCode":400502}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: user user1@company.com does not have required role(s) superadmin","errorDetailsCode":403000}}},"404":{"description":"Not Found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Organisation with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/organisations/{organisationId}/companies":{"get":{"tags":["Organisations Companies"],"summary":"Get all companies linked with this organization","description":"For the 'Enterprise (E1)' offer, the premium offer, the Multi-Layer organization is defined.   \nIt describes a hierarchy including ORGANIZATIONS/COMPANIES/SITES/SYSTEMS.   \nThis api gets all companies linked with an organization.   \nExample: POST https://openrainbow.com/api/rainbow/admin/v1.0/organisations/57486e5d807a594145e510d6/companies","operationId":"GetOrganisationCompanies","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"organisationId","in":"path","required":true,"type":"string","description":"Organisation unique identifier (like 569ce8c8f9336c471b98eda1)"},{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less company details in response.   \n- `small`: _id, name   \n- `medium`: _id, name, status   \n- `full`: all company fields","enum":["small","medium","full"],"default":"small"},{"name":"limit","in":"query","required":false,"type":"number","description":"Allow to specify the number of companies to retrieve.","default":"100"},{"name":"offset","in":"query","required":false,"type":"number","description":"Allow to specify the position of first company to retrieve (first company if not specified). Warning: if offset > total, no results are returned."},{"name":"sortField","in":"query","required":false,"type":"string","description":"Sort company list based on the given field.","default":"name"},{"name":"sortOrder","in":"query","required":false,"type":"number","description":"Specify order when sorting company list.","enum":["-1","1"],"default":"1"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"organization_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":[{"name":"ALE_CENTRAL_TEAM","id":"5749ab92245015fe0d36e96a"},{"name":"ALE_FR","id":"5749aa51245015fe0d36e968"},{"name":"ALE_SP","id":"5749aa7e245015fe0d36e969"}],"limit":100,"offset":0,"total":3}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":"CompanyId 56b89d26f7ab94c69ad41584 is the companyId of the default company that cannot be linked with any organisation","errorDetailsCode":400502}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: user user1@company.com does not have required role(s) superadmin","errorDetailsCode":403000}}},"404":{"description":"Not Found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Organisation with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"post":{"tags":["Organisations Companies"],"summary":"Link a company to an organization","description":"For the 'Enterprise (E1)' offer, the premium offer, the Multi-Layer organization is defined.   \nIt describes a hierarchy including ORGANIZATIONS/COMPANIES/SITES/SYSTEMS.   \nThis api links a company with the given organization. Company's users are automatically attached to this organisation.   \nA company must belong to only one organisation or kept single.   \nWhen an organization is deleted, the company is automatically unlinked.   \nExample: POST https://openrainbow.com/api/rainbow/admin/v1.0/organisations/57515338c5d7b862456d60a0/companies (body \"companyId\":\"5749ab92245015fe0d36e96a\")","operationId":"PostOrganisationCompanies","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"organisationId","in":"path","required":true,"type":"string","description":"Organisation unique identifier (like 569ce8c8f9336c471b98eda1)"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PostOrganisationCompanies"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"organization_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PostOrganisationCompaniesSuccess"},"examples":{"application/json":{"data":{"name":"ALE_SP","latin_name":"ale_sp","creationDate":"2016-05-28T14:26:06.886Z","statusUpdatedDate":"2016-06-07T08:55:26.708Z","settings":{"iceServers":[]},"forceHandshake":false,"visibleBy":[],"visibility":"private","status":"active","organisationId":"57515338c5d7b862456d60a0","offerType":"freemium","id":"5749aa7e245015fe0d36e969"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"companyId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: user user1@company.com does not have required role(s) superadmin","errorDetailsCode":403000}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Company with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/sites/{siteId}":{"delete":{"tags":["Sites"],"summary":"Delete a site","description":"This API allows administrator to delete a site for a company they administrate.   \n  \n`superadmin` can delete sites for all companies existing in Rainbow.   \n`bp_admin` can only delete sites for companies linked to End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` can only delete sites for companies linked to companies under their organisation.   \n`company_admin` can only delete sites for their own company.   \nNote : Delete will be forbidden if site is still linked to system(s)","operationId":"DeleteSites","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"siteId","in":"path","required":true,"type":"string","description":"Site unique identifier (like 569ce8c8f9336c471b98eda1)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"status":"Site 569d0ef3ef7816921f7e94fa successfully deleted","data":[]}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"siteId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"User 5749afba245015fe0d36e96c with 'admin' role is not assigned to administrate Site 57486e5d807a594145e510d6","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Site with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"get":{"tags":["Sites"],"summary":"Get a site data","description":"This API allows administrator to retrieve a given site.   \n  \n`superadmin` and `support` can get all sites existing in Rainbow.   \n`bp_admin` can only get sites linked to End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` can only get sites linked to companies under their organisation.   \n`company_admin` can only get sites linked to their company.   \n`site_admin` can only get the site they administrate.   \n  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/sites/569d0ef3ef7816921f7e94fa","operationId":"GetSitesId","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"siteId","in":"path","required":true,"type":"string","description":"Site unique identifier (like 569ce8c8f9336c471b98eda1)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":{"latin_name":"illkirch","name":"Illkirch","companyId":"5749aa51245015fe0d36e968","creationDate":"2016-06-08T17:13:23.008Z","statusUpdatedDate":"2016-06-08T17:13:23.008Z","settings":{"iceServers":[]},"status":"active","id":"57585233d3c3e3e5095250ba"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"status","msg":"Invalid site status. Expected field status being a string and having one of the following values: active,alerting,hold,terminated"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Site with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"put":{"tags":["Sites"],"summary":"Update a site","description":"This API allows administrator to update a given site.   \n  \n`superadmin` can update all sites existing in Rainbow.   \n`bp_admin` can only update sites linked to End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` can only update sites linked to companies under their organisation.   \n`company_admin` can only update sites linked to their company.   \n`site_admin` can only update the site they administrate.   \n  \nIn a Multi-Layer organization defining a hierarchy ORGANIZATIONS/COMPANIES/SITES/SYSTEMS, only bp admin or admin of the site's organization is allowed to move the site (change companyId field of the site).   \n","operationId":"PutSites","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"siteId","in":"path","required":true,"type":"string","description":"Site unique identifier (like 569ce8c8f9336c471b98eda1)"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PutSites"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PutSitesSuccess"},"examples":{"application/json":{"data":{"latin_name":"illkirch","name":"Illkirch","companyId":"5749aa51245015fe0d36e968","creationDate":"2016-06-08T17:13:23.008Z","statusUpdatedDate":"2016-06-08T17:13:23.008Z","settings":{"iceServers":[]},"status":"active","id":"57585233d3c3e3e5095250ba"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"status","msg":"Invalid site status. Expected field status being a string and having one of the following values: active,alerting,hold,terminated"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"User 5749afba245015fe0d36e96c with 'admin' role is not assigned to administrate Site 57486e5d807a594145e510d6","errorDetailsCode":403301}}},"404":{"description":"Not found"},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/sites":{"get":{"tags":["Sites"],"summary":"Get all sites","description":"This API allows administrator to retrieve sites they can administrate.   \n  \n`superadmin` and `support` get all sites existing in Rainbow.   \n`bp_admin` only get sites linked to End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` only get sites linked to companies under their organisation.   \n`company_admin` only get sites linked to their company.   \n`site_admin` only get the site they administrate.   \n  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/sites?format=small&limit=100&offset=0&sortField=name&sortOrder=-1","operationId":"GetSites","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less site details in response.   \n- `small`: _id, name   \n- `medium`: _id, name, status, companyId   \n- `full`: all site fields","enum":["small","medium","full"],"default":"small"},{"name":"name","in":"query","required":false,"type":"string","description":"Allows to filter sites list on field name.   \n  \nThe filtering is case insensitive and on partial name match: all sites **containing** the provided name value will be returned (whatever the position of the match).   \nEx: if filtering is done on _sit_, sites with the following names are match the filter 'My site', 'Site', 'A site 1', 'Site of company', 'Sit1', 'Sit2', ..."},{"name":"companyId","in":"query","required":false,"type":"string","description":"Allows to filter sites list on the companyIds provided in this option."},{"name":"limit","in":"query","required":false,"type":"number","description":"Allow to specify the number of companies to retrieve.","default":"100"},{"name":"offset","in":"query","required":false,"type":"number","description":"Allow to specify the position of first site to retrieve (first site if not specified). Warning: if offset > total, no results are returned."},{"name":"sortField","in":"query","required":false,"type":"string","description":"Sort site list based on the given field.","default":"name"},{"name":"sortOrder","in":"query","required":false,"type":"number","description":"Specify order when sorting site list.","enum":["-1","1"],"default":"1"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":[{"name":"ALE1","id":"569ce8c8f9336c471b98eda1"},{"name":"ALE2","id":"569ce938f9336c471b98eda2"}],"total":2,"limit":100,"offset":0}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}}}},"post":{"tags":["Sites"],"summary":"Create a site","description":"This API allows administrator to create a site for a company they administrate.   \n  \n`superadmin` can create sites for all companies existing in Rainbow.   \n`bp_admin` can only create sites for companies linked to End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` can only create sites for companies linked to companies under their organisation.   \n`company_admin` can only create sites for their own company.   \n  \n**Specific feature:** Sharing a system between several companies   \nSince 1.47.0 release, configuring companies sharing a multi-tenant system is possible.  \nAn OXE can be multi-company.  \nA multi-tenant system, so called CENTREX, allows sharing a call-server between several entities. For us an entity is a company with the flag isCentrex=true.  \nA company in this environment can only have a single site. It has automatically the flag isCentrex = true  \nThis flag is readonly.","operationId":"PostSites","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PostSites"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PostSitesSuccess"},"examples":{"application/json":{"data":{"latin_name":"illkirch","name":"Illkirch","companyId":"5749aa51245015fe0d36e968","creationDate":"2016-06-08T17:13:23.008Z","statusUpdatedDate":"2016-06-08T17:13:23.008Z","settings":{"iceServers":[]},"status":"active","id":"57585233d3c3e3e5095250ba"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"status","msg":"Invalid site status. Expected field status being a string and having one of the following values: active,alerting,hold,terminated"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"User 5749afba245015fe0d36e96c with 'admin' role is not assigned to administrate Site 57486e5d807a594145e510d6","errorDetailsCode":403301}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/sites/{siteId}/systems/{systemId}":{"delete":{"tags":["Sites Systems"],"summary":"Unlink a system to a site","description":"This API allows administrator to delete a link between a system and a site   \n  \n`superadmin` and `support` can unlink any systems from any sites existing in Rainbow.   \n`bp_admin` can only unlink systems being linked to sites of End Customer companies for which their bp_admin's company is the BP company from sites of End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` can only unlink systems being linked to sites of companies under their organisation from sites of companies under their organisation.   \n`company_admin` can only unlink systems being linked to sites of their company from sites of their company.   \nAccess is denied for `site_admin`.   \nA system could be shared by several sites. At least one...","operationId":"DeleteSiteSystems","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"siteId","in":"path","required":true,"type":"string","description":"Site unique identifier"},{"name":"systemId","in":"path","required":true,"type":"string","description":"System unique identifier"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"status":"Site 5749ab92245015fe0d36e96a successfully removed","data":[]}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"systemId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Administrator bob@ale-international.com is not assigned to administrate Company hosting site Id 57585233d3c3e3e5095250ba.","errorDetailsCode":403301}}},"404":{"description":"Not Found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"System with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"409":{"description":"Conflict","examples":{"application/json":{"errorCode":409,"errorMsg":"Conflict","errorDetails":"System 594cd6b9ad17fcca5dbcb75c must have at least one attachment to a site. Site 594cd6a226b31045baf7fc9a is the last.","errorDetailsCode":409000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/sites/{siteId}/systems":{"get":{"tags":["Sites Systems"],"summary":"Get all systems linked with this site","description":"This API allows administrator to retrieve systems linked to a given site   \n  \n`superadmin` and `support` can get systems linked to all companies existing in Rainbow.   \n`bp_admin` can only get systems linked to sites of End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` can only get systems linked to sites of companies under their organisation.   \n`company_admin` can only get systems linked to sites of their company.   \n`site_admin` can only get the systems linked to the site they administrate.","operationId":"GetSiteSystems","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"siteId","in":"path","required":true,"type":"string","description":"Site unique identifier"},{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less system details in response.   \n- `small`: id pbxId version   \n- `medium`: id name pbxId serialNumber version status   \n- `full`: all system fields","enum":["small","medium","full"],"default":"small"},{"name":"name","in":"query","required":false,"type":"string","description":"Allows to filter systems list on field name.   \n  \nThe filtering is case insensitive and on partial name match: all systems **containing** the provided name value will be returned (whatever the position of the match).   \nEx: if filtering is done on _oxe1_, systems with the following names are match the filter 'OXE1', 'Oxe1', 'My oxe1', 'oxe12', 'My OXE12', ..."},{"name":"type","in":"query","required":false,"type":"string","description":"Allows to filter systems list on the provided type(s)","enum":["oxo","oxe","third_party","undefined"]},{"name":"status","in":"query","required":false,"type":"string","description":"Allows to filter systems list on the provided status(es)","enum":["created","activating","activated","terminated"]},{"name":"siteId","in":"query","required":false,"type":"string","description":"Allows to filter systems list on the siteIds provided in this option."},{"name":"companyId","in":"query","required":false,"type":"string","description":"Allows to filter systems list on the siteIds linked to companyIds provided in this option.   \nWhen this filter is used, the API loads all the siteIds being under the provided companyIds and filter systems list on these siteIds."},{"name":"isCentrex","in":"query","required":false,"type":"boolean","description":"Allows to filter systems list by the status isCentrex."},{"name":"limit","in":"query","required":false,"type":"number","description":"Allow to specify the number of systems to retrieve.","default":"100"},{"name":"offset","in":"query","required":false,"type":"number","description":"Allow to specify the position of first system to retrieve (first site if not specified). Warning: if offset > total, no results are returned."},{"name":"sortField","in":"query","required":false,"type":"string","description":"Sort system list based on the given field.","default":"pbxId"},{"name":"sortOrder","in":"query","required":false,"type":"number","description":"Specify order when sorting pbx list.","enum":["-1","1"],"default":"1"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":[{"pbxId":"OXE.123.456","version":"1.9.1","id":"575beb22ccb329a11a1cef6c"},{"pbxId":"pbxagent_315e5b2dbf8746fd93660df375933c23","version":"","id":"57ab1af307d0a6293dd03472"}],"limit":100,"offset":0,"total":2}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"siteId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"User 5749afba245015fe0d36e96c with 'admin' role is not assigned to administrate Site 57486e5d807a594145e510d6","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Site with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"post":{"tags":["Sites Systems"],"summary":"Link a system to a site","description":"This API allows administrator to link a system to a given site   \n  \nA PABX can be multi tenant.   \nWhen a PABX is shared, that means in our data model: 'A system is shared between several sites'.   \nThis API makes possible to add a link between a system and a site that belongs to the same company or not.   \nIf the link still exists, no error is thrown.   \n  \n`superadmin` and `support` can link any systems to any sites existing in Rainbow.   \n`bp_admin` can only link systems being already linked to sites of End Customer companies for which their bp_admin's company is the BP company to sites of End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` can only link systems being already linked to sites of companies under their organisation to sites of companies under their organisation.   \n`company_admin` can only link systems being already linked to sites of their company to sites of their company.   \nAccess is denied for `site_admin`.   \n  \n**Specific feature:** Sharing a system between several companies   \nSince 1.47.0 release, configuring companies sharing a multi-tenant system is possible.  \nAn OXE can be multi-company.  \nA multi-tenant system, so called CENTREX, allows sharing a call-server between several entities. For us an entity is a company with the flag isCentrex=true.  \nA company in this environment can only have a single site. It has automatically the flag isCentrex = true  \nOnly one sytem having the flag isCentrex = true can be linked with a site having the same flag value.  \nA system having the flag isCentrex = true can be shared by several sites having the same flag value.  \nA specific error \"Inconsistent link. A multi-tenant system must be shared by a multi-tenant company only\" 43709 is thrown when we try to link an incompatible system to a site.   \nWhen set during the system creation, isCentrex flag is readonly.","operationId":"PostSiteSystems","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"siteId","in":"path","required":true,"type":"string","description":"Site unique identifier"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PostSiteSystems"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PostSiteSystemsSuccess"},"examples":{"application/json":{"data":{"name":"node_alpha_oxe_R11 demo","pbxId":"pbxagent_aace13f751734a6596ac6cdd567c4898","jid_pbxagent":"pbxagent_aace13f751734a6596ac6cdd567c4898@francky-all-in-one-dev-1.opentouch.cloud","jid_pbxagent_password":"061947863a3147b5b9b28c3b5712ed83","jid_pbxpcg":"pbxpcg_fad0ec2eb92045868a32a189f31bbe90@openrainbow.com","jid_pbxpcg_password":"2001b0f5dc5245e1aa07e444d3524a76","version":"","country":"FRA","serverPingTimeout":120,"pbxMainBundlePrefix":["0"],"usePbxMainBundlePrefix":true,"pbxNationalPrefix":"0","pbxInternationalPrefix":"00","statusUpdatedDate":"2016-08-10T12:57:19.298Z","creationDate":"2016-08-10T12:57:19.298Z","status":"created","siteId":["575d4bacb630c12b305aa310","57585233d3c3e3e5095250ba"],"searchResultOrder":["RAINBOW","LDAP","PBX"],"type":"oxe","id":"57ab24af27fe23cc40fef473"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"systemId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Inconsistent link. A multi-tenant system must be shared by a multi-tenant companies only (systemId: 59e9f917673c5f24d14a7450, company centrex: false, system centrex: true)","errorDetailsCode":403709}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"System with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/systems/{systemId}":{"delete":{"tags":["Systems"],"summary":"Delete a system","description":"This API allows administrator to delete a given system.   \n  \n`superadmin` can delete systems linked to all sites existing in Rainbow.   \n`bp_admin` can only delete systems linked to sites of End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` can only delete systems linked to sites of companies under their organisation.   \n`company_admin` can only delete systems linked to sites of their company.   \n`site_admin` can only delete the systems linked to the site they administrate.   \n  \n**Warning**: all phoneNumbers associated to this system will be deleted, and if these phoneNumbers were associated to a Rainbow user, it won't be anymore.   \njid_pbxagent and jid_pbxpcg XMPP accounts will also be deleted from XMPP.   \n  \nPCG is notified of the system deletion with the following XMPP message. Once PCG has acknowledged the IQ, the system is deleted from mongoDB, jid_pbxagent and jid_pbxpcg XMPP accounts are deleted from XMPP, and all phoneNumbers objects linked to this system are deleted (therefore PCG don't have to call delete for all deleted system's phoneNumbers). \n\n    \n```html\n<iq id=\"8413b42e-563c-4437-9a53-06f638b5ab69_0\"\n       from=\"pcloud@openrainbow.com/172440802160413612281463752830017532\"\n       to=\"pbxpcg_7ca2d0aefb024c949303b508fcecdad2@openrainbow.com/pbxpcg\"\n       xmlns=\"jabber:client\">\n    <config xmlns=\"urn:xmpp:pbxagent:config:1\">\n        <pbx action=\"delete\">\n    </config>\n</iq>\n```\n","operationId":"DeleteSystems","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"systemId","in":"path","required":true,"type":"string","description":"System unique identifier (like 569ce8c8f9336c471b98eda1)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"status":"Systems 569d0ef3ef7816921f7e94fa successfully deleted","data":[]}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"systemId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Can't delete system with id 569d0ef3ef7816921f7e94fa because it's still linked to Media Pillar.","errorDetailsCode":403030}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"System with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"get":{"tags":["Systems"],"summary":"Get a system data","description":"This API allows administrator to retrieve a given system.   \n  \n`superadmin` and `support` can get all systems existing in Rainbow.   \n`bp_admin` can only get systems linked to sites of End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` can only get systems linked to sites of companies under their organisation.   \n`company_admin` can only get systems linked to sites of their company.   \n`site_admin` can only get the systems linked to the site they administrate.   \n  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/systems/569d0ef3ef7816921f7e94fa","operationId":"GetSystemsId","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"systemId","in":"path","required":true,"type":"string","description":"System unique identifier (like 569ce8c8f9336c471b98eda1)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":{"latin_name":"node_alpha_oxe_r11 demo","name":"node_alpha_oxe_R11 demo","country":"FRA","pbxId":"pbxagent_db489778882d41d6a9d69e2f0d0170b5","jid_pbxagent":"pbxagent_db489778882d41d6a9d69e2f0d0170b5@francky-all-in-one-dev-1.opentouch.cloud","jid_pbxagent_password":"6763","jid_pbxpcg":"pbxpcg_806f9c73c4be40a191f5591be778e9f3@francky-all-in-one-dev-1.opentouch.cloud","jid_pbxpcg_password":"af9b871bc5204184bf84d4bc9aabd1bf","version":"9.2","serverPingTimeout":120,"pbxMainBundlePrefix":["0"],"usePbxMainBundlePrefix":true,"pbxNumberingTranslator":[{"regexpMatch":"^218","regexpReplace":"039067","description":"Numbers 218xxx => 039067xxx"},{"regexpMatch":"^((0..9){1,5})$","regexpReplace":"$1","description":"Numbers of five digits are internal"},{"regexpMatch":"^3699$","regexpReplace":"03699","description":"Numbers 3699xxx => 03699xxx"},{"regexpMatch":"^18$","regexpReplace":"","description":"18 is forbidden"}],"pbxNationalPrefix":"0","pbxInternationalPrefix":"00","statusUpdatedDate":"2016-12-14T15:03:25.858Z","creationDate":"2016-12-14T15:03:25.858Z","status":"activating","siteId":["57585233d3c3e3e5095250ba"],"searchResultOrder":["RAINBOW","LDAP","PBX"],"type":"oxe","activatingTransactionId":"d182c8e122504350ab36008be1552518","jid_pbxagent_password_activating":"9e5c326b10b54fcdbf50caf1951f17b7","id":"58515f3df5eb9225650b64d8"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":"Invalid format 'System' 'pbxNumberingTranslator'. Array size is longer than 100","errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"System with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"put":{"tags":["Systems"],"summary":"Update a system","description":"This API allows administrator to update a given system.   \n  \n`superadmin` can update systems linked to all sites existing in Rainbow.   \n`bp_admin` can only update systems linked to sites of End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` can only update systems linked to sites of companies under their organisation.   \n`company_admin` can only update systems linked to sites of their company.   \n`site_admin` can only update the systems linked to the site they administrate.   \n  \nWhen the system is updated, PCG is notified on its corresponding JID pbxpcg with the following XMPP message: \n\n    \n```html\n<message id=\"8413b42e-563c-4437-9a53-06f638b5ab69_0\"\n          from=\"pcloud@openrainbow.com/172440802160413612281463752830017532\"\n          to=\"pbxpcg_7ca2d0aefb024c949303b508fcecdad2@openrainbow.com\"\n          xmlns=\"jabber:client\">\n     <config xmlns=\"urn:xmpp:pbxagent:config:1\"/>\n         <pbx action=\"update\">\n     </config>\n</message>\n```\n  \nDon't use this api to move a 'isCentrex' system to another site. Use instead DELETE /api/rainbow/admin/v1.0/sites/:siteId/systems then POST /api/rainbow/admin/v1.0/sites/:siteId/systems","operationId":"PutSystems","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"systemId","in":"path","required":true,"type":"string","description":"System unique identifier (like 569ce8c8f9336c471b98eda1)"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PutSystems"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PutSystemsSuccess"},"examples":{"application/json":{"data":{"latin_name":"node_alpha_oxe_r11 demo","name":"node_alpha_oxe_R11 demo","country":"FRA","pbxId":"pbxagent_db489778882d41d6a9d69e2f0d0170b5","jid_pbxagent":"pbxagent_db489778882d41d6a9d69e2f0d0170b5@francky-all-in-one-dev-1.opentouch.cloud","jid_pbxagent_password":"1113ba19","jid_pbxpcg":"pbxpcg_806f9c73c4be40a191f5591be778e9f3@francky-all-in-one-dev-1.opentouch.cloud","jid_pbxpcg_password":"af9b871bc5204184bf84d4bc9aabd1bf","version":"9.2","serverPingTimeout":120,"pbxMainBundlePrefix":["0"],"pbxNumberingTranslator":[],"usePbxMainBundlePrefix":true,"pbxNationalPrefix":"0","pbxInternationalPrefix":"00","statusUpdatedDate":"2016-12-14T15:03:25.858Z","creationDate":"2016-12-14T15:03:25.858Z","status":"activated","siteId":["57585233d3c3e3e5095250ba"],"searchResultOrder":["RAINBOW","LDAP","PBX"],"type":"oxe","activatingTransactionId":"","jid_pbxagent_password_activating":"","id":"58515f3df5eb9225650b64d8"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":"Invalid format 'System' 'pbxNumberingTranslator'. Array size is longer than 100","errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"User 5749afba245015fe0d36e96c with 'admin' role is not assigned to administrate System 57486e5d807a594145e510d6","errorDetailsCode":403301}}},"404":{"description":"Not found"},"409":{"description":"Conflict","examples":{"application/json":{"errorCode":409,"errorMsg":"Conflict","errorDetails":"System with pbxId = OXE.000.111 already exists.","errorDetailsCode":409000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/systems":{"get":{"tags":["Systems"],"summary":"Get all systems","description":"This API allows administrator to retrieve systems they can administrate.   \n  \n`superadmin` and `support` get all systems existing in Rainbow.   \n`bp_admin` only get systems linked to sites of End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` only get systems linked to sites of companies under their organisation.   \n`company_admin` only get systems linked to sites of their company.   \n`site_admin` only get the systems linked to the site they administrate.   \n  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/systems?type=oxe&status=activated&format=small&limit=100&offset=0&sortField=name&sortOrder=-1  \n  \n**Specific feature:** Sharing a system between several companies   \nSince 1.47.0 release, configuring companies sharing a multi-tenant system is possible.  \nAn OXE can be multi-company.  \nA multi-tenant system, so called CENTREX, allows sharing a call-server between several entities. For us an entity is a company with the flag isCentrex=true.  \nA company in this environment can only have a single site. It has automatically the flag isCentrex = true  \nGet a list having the status isCentrex=true is possible.","operationId":"GetSystems","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less system details in response.   \n- `small`: id pbxId version   \n- `medium`: id name pbxId serialNumber version status   \n- `full`: all system fields","enum":["small","medium","full"],"default":"small"},{"name":"name","in":"query","required":false,"type":"string","description":"Allows to filter systems list on field name.   \n  \nThe filtering is case insensitive and on partial name match: all systems **containing** the provided name value will be returned (whatever the position of the match).   \nEx: if filtering is done on _oxe1_, systems with the following names are match the filter 'OXE1', 'Oxe1', 'My oxe1', 'oxe12', 'My OXE12', ..."},{"name":"type","in":"query","required":false,"type":"string","description":"Allows to filter systems list on the provided type(s)","enum":["oxo","oxe","third_party","undefined"]},{"name":"status","in":"query","required":false,"type":"string","description":"Allows to filter systems list on the provided status(es)","enum":["created","activating","activated","terminated"]},{"name":"siteId","in":"query","required":false,"type":"string","description":"Allows to filter systems list on the siteIds provided in this option."},{"name":"companyId","in":"query","required":false,"type":"string","description":"Allows to filter systems list on the siteIds linked to companyIds provided in this option.   \nWhen this filter is used, the API loads all the siteIds being under the provided companyIds and filter systems list on these siteIds."},{"name":"isCentrex","in":"query","required":false,"type":"boolean","description":"Allows to filter systems list by the status isCentrex."},{"name":"limit","in":"query","required":false,"type":"number","description":"Allow to specify the number of systems to retrieve.","default":"100"},{"name":"offset","in":"query","required":false,"type":"number","description":"Allow to specify the position of first system to retrieve (first site if not specified). Warning: if offset > total, no results are returned."},{"name":"sortField","in":"query","required":false,"type":"string","description":"Sort system list based on the given field.","default":"pbxId"},{"name":"sortOrder","in":"query","required":false,"type":"number","description":"Specify order when sorting pbx list.","enum":["-1","1"],"default":"1"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":[{"pbxId":"OXE.123.456","version":"1.9.1","id":"575beb22ccb329a11a1cef6c"},{"pbxId":"pbxagent_315e5b2dbf8746fd93660df375933c23","version":"","id":"57ab1af307d0a6293dd03472"}],"limit":100,"offset":0,"total":2}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}}}},"post":{"tags":["Systems"],"summary":"Create a system","description":"This API allows administrator to create a system.   \nA system hosts the CCA (Call Control Agent) configuration.   \n  \n`superadmin` can create systems linked to all sites existing in Rainbow.   \n`bp_admin` can only create systems linked to sites of End Customer companies for which their bp_admin's company is the BP company.   \n`organization_admin` can only create systems linked to sites of companies under their organisation.   \n`company_admin` can only create systems linked to sites of their company.   \n`site_admin` can only create the systems linked to the site they administrate.   \n  \n**Specific feature:** Sharing a system between several companies   \nSince 1.47.0 release, configuring companies sharing a multi-tenant system is possible.  \nAn OXE can be multi-company.  \nA multi-tenant system, so called CENTREX, allows sharing a call-server between several entities. For us an entity is a company with the flag isCentrex=true.  \nA company in this environment can only have a single site. It has automatically the flag isCentrex = true  \nOnly one sytem having the flag isCentrex = true can be linked with a site having the same flag value.  \nA system having the flag isCentrex = true can be shared by several sites having the same flag value.  \nWhen set during the system creation, isCentrex flag is readonly. (refer to 'Link a system to a site' section) A BP admin is allowed to create a system CENTREX, not yet linked with a site. It has the tag","operationId":"PostSystems","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PostSystems"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PostSystemsSuccess"},"examples":{"application/json":{"data":{"latin_name":"oxe_rb_multi_tenant_bpdr_01","name":"OXE_RB_MULTI_TENANT_BPDR_01","country":"FRA","pbxId":"PBXc2ae-3590-f08b-4c6c-bccf-4e99-478a-17e4","jid_pbxagent":"PBXc2ae-3590-f08b-4c6c-bccf-4e99-478a-17e4@aio-pcg-all-in-one-dev-1.opentouch.cloud","jid_pbxagent_password":"4645","jid_pbxpcg":"pbxpcg_66950b0aefe840cd9ef2adcd8ed561ef@aio-pcg-all-in-one-dev-1.opentouch.cloud","jid_pbxpcg_password":"6b45a2f50e7c45b8aaaf4a153f38e7f2","searchResultOrder":[],"version":"","serverPingTimeout":120,"pbxNumberingTranslator":[],"usePbxMainBundlePrefix":true,"pbxMainBundlePrefix":[],"bpId":"59f061085fbc10b394aab3ff","isCentrex":true,"statusUpdatedDate":"2017-12-06T18:36:17.904Z","creationDate":"2017-12-06T18:36:17.904Z","status":"created","siteId":[],"type":"oxe","id":"5a2838a11f8b207210326e60"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":"Invalid format 'System' 'pbxNumberingTranslator'. Array size is longer than 100","errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Inconsistent link. A multi-tenant company must only use a multi-tenant system  (company centrex: true, system centrex: false)","errorDetailsCode":403710}}},"409":{"description":"Conflict","examples":{"application/json":{"errorCode":409,"errorMsg":"Conflict","errorDetails":"System with pbxId = OXE.000.111 already exists.","errorDetailsCode":409000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/systems/{systemId}/groups/{groupId}":{"delete":{"tags":["Systems Groups"],"summary":"Remove a system from a group","description":"Remove system to a group. If the system doesn't exist in the group, an error is raised (404 Not found)   \nA systems group is a logical set of systems (pabx), sharing the same dial plan and linked through a private network.   \nSystems belonging to this group may either belonging to the same Site, or belonging from several sites under the same company.   \nWaiting for a real use case, it is possible to federate inside the same group, systems belonging to companies under the same organization.","operationId":"DeleteSystemsFromGroupId","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"systemId","in":"path","required":true,"type":"string","description":"System unique identifier"},{"name":"groupId","in":"path","required":true,"type":"string","description":"SystemsGroup unique identifier"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":{"name":"ALE_SP Malaga","systems":[{"systemId":"57e8c879b8be68670b2a6ca8","pbxId":"pbxagent_07f9596a5cc34dde8a37dd3200566a10"},{"systemId":"57e8ced2212d6d09123ec9d4","pbxId":"pbxagent_7f521f657b9042eba12fbf896e60e72b"}],"companies":["57e2afbb467af7d11dc0eb57"],"id":"57ecdc63fa5aac7050dba4d7"}}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Administrator admin1@ale-international.com is not assigned to administrate Company Id 57e2afbb467af7d11dc0eb58.","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"System with id 57e8c879b8be68670b2a6ca9 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"put":{"tags":["Systems Groups"],"summary":"Add a new system to a group","description":"Add a new system to a group. If the system already exists in the group or inside another one, an error is raised (409 Conflict)   \nA systems group is a logical set of systems (pabx), sharing the same dial plan and linked through a private network.   \nSystems belonging to this group may either belonging to the same Site, or belonging from several sites under the same company.   \nWaiting for a real use case, it is possible to federate inside the same group, systems belonging to companies under the same organization.   \n  \n**Specific feature:** Sharing a system between several companies   \nSince 1.47.0 release, configuring companies sharing a multi-tenant system is possible.  \nAn OXE can be multi-company.  \nA multi-tenant system, so called CENTREX, allows sharing a call-server between several entities. For us an entity is a company with the flag isCentrex=true.  \nA multi-tenant system can't be set inside a systems group. That does not make sense.","operationId":"PutSystemsGroupId","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"systemId","in":"path","required":true,"type":"string","description":"System unique identifier"},{"name":"groupId","in":"path","required":true,"type":"string","description":"SystemsGroup unique identifier"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PutSystemsGroupIdSuccess"},"examples":{"application/json":{"data":{"name":"ALE_SP Malaga","systems":[{"systemId":"57e8c879b8be68670b2a6ca8","pbxId":"pbxagent_07f9596a5cc34dde8a37dd3200566a10"},{"systemId":"57e8ced2212d6d09123ec9d4","pbxId":"pbxagent_7f521f657b9042eba12fbf896e60e72b"}],"companies":["57e2afbb467af7d11dc0eb57"],"id":"57ecdc63fa5aac7050dba4d7"}}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Administrator admin1@ale-international.com is not assigned to administrate Company Id 57e2afbb467af7d11dc0eb58.","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"System with id 57e8c879b8be68670b2a6ca9 does not exist.","errorDetailsCode":404000}}},"409":{"description":"Conflict","examples":{"application/json":{"errorCode":409,"errorMsg":"Conflict","errorDetails":["System: 57e8c879b8be68670b2a6ca8 was found in SystemsGroup: 57ecdc63fa5aac7050dba4d7 Name: ALE_SP Malaga"],"errorDetailsCode":409200}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/systems/groups/{groupId}":{"delete":{"tags":["Systems Groups"],"summary":"Delete a systems group","description":"Delete a systems groups.","operationId":"DeleteSystemsGroupId","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"groupId","in":"path","required":true,"type":"string","description":"SystemsGroup unique identifier"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"status":"SystemsGroup 57ed149c7473a55c17b1d238 successfully deleted","data":[]}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Administrator admin1@ale-international.com is not assigned to administrate Systems Group Id 57e2afbb467af7d11dc0eb58.","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"System with id 57e8c879b8be68670b2a6ca9 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"get":{"tags":["Systems Groups"],"summary":"Get systems group data","description":"A systems group is a logical set of systems (pabx), sharing the same dial plan and linked through a private network.   \nSystems belonging to this group may either belonging to the same Site, or belonging from several sites under the same company.   \n  \nAccording with api permission, the response is not the same.   \n- Superadmin, Support and organization_admin must see all Systems inside the group.   \n- bp_admin, company_admin may see Systems hosted by sites under his company.   \n- site_admin only see systems of his site, inside the group>.","operationId":"GetSystemsGroupId","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"groupId","in":"path","required":true,"type":"string","description":"SystemsGroup unique identifier"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":{"name":"ALE_SP Malaga","systems":[{"systemId":"57e8c879b8be68670b2a6ca8","pbxId":"pbxagent_07f9596a5cc34dde8a37dd3200566a10"},{"systemId":"57e8ced2212d6d09123ec9d4","pbxId":"pbxagent_7f521f657b9042eba12fbf896e60e72b"}],"companies":["57e2afbb467af7d11dc0eb57"],"id":"57ecdc63fa5aac7050dba4d7"}}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Administrator admin1@ale-international.com is not assigned to administrate Company Id 57e2afbb467af7d11dc0eb58.","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"System with id 57e8c879b8be68670b2a6ca9 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"put":{"tags":["Systems Groups"],"summary":"Rename a systems group","description":"Only allow a systems group renaming.","operationId":"PutSystemsGroupNameId","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"groupId","in":"path","required":true,"type":"string","description":"SystemsGroup unique identifier"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PutSystemsGroupNameId"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PutSystemsGroupNameIdSuccess"},"examples":{"application/json":{"data":{"name":"ALE_SP Malaga","systems":[{"systemId":"57e8c879b8be68670b2a6ca8","pbxId":"pbxagent_07f9596a5cc34dde8a37dd3200566a10"},{"systemId":"57e8ced2212d6d09123ec9d4","pbxId":"pbxagent_7f521f657b9042eba12fbf896e60e72b"}],"companies":["57e2afbb467af7d11dc0eb57"],"id":"57ecdc63fa5aac7050dba4d7"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":"No Systems Group data provided for update. Expected optional fields:  name","errorDetailsCode":400100}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Administrator admin1@ale-international.com is not assigned to administrate Systems Group Id 57e2afbb467af7d11dc0eb58.","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"System with id 57e8c879b8be68670b2a6ca9 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/systems/groups":{"get":{"tags":["Systems Groups"],"summary":"Get all systems groups","description":"Get all systems groups.   \nA systems group is a logical set of systems (pabx), sharing the same dial plan and linked through a private network.   \nSystems belonging to this group may either belonging to the same Site, or belonging from several sites under the same company.   \nAccording with api permission, the response is not the same.   \n- Superadmin and Support see all SystemsGroups   \n- bp_admin, organization_admin and company_admin may see several SystemsGroups, **but some systems could be hidden for company_admin**.   \n- site_admin only see SystemsGroups hosting some systems of his site, **but some systems could be hidden as they are hosted by another site**.","operationId":"GetSystemsGroups","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"name","in":"query","required":false,"type":"string","description":"Allows to filter groups list on the given keyword(s) on field name. The filtering is **not case insensitive** and on partial name match: all groups containing the provided name value will be returned (whatever the position of the match). Ex: if filtering is done on comp, group with the following names are match the filter 'My Group', 'Group', 'A Group 1', 'Group of', ..."},{"name":"format","in":"query","required":false,"type":"string","description":"Should allow to retrieve more or less group details in response. But in fact whatever the choice:   \n- `small`: _id, name, companies, systems (all SystemsGroup fields)   \n- `medium`: all SystemsGroup fields   \n- `full`: all SystemsGroup fields","enum":["small","medium","full"],"default":"small"},{"name":"limit","in":"query","required":false,"type":"number","description":"Allow to specify the number of companies to retrieve.","default":"100"},{"name":"offset","in":"query","required":false,"type":"number","description":"Allow to specify the position of first company to retrieve (first company if not specified). Warning: if offset > total, no results are returned."},{"name":"sortField","in":"query","required":false,"type":"string","description":"Sort company list based on the given field.","default":"name"},{"name":"sortOrder","in":"query","required":false,"type":"number","description":"Specify order when sorting company list.","enum":["-1","1"],"default":"1"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":[{"name":"ALE_FR Illkirch","systems":[{"systemId":"57e518750d0794392aa7daec","pbxId":"pbxagent_3adb4a57e52f49f6a29b95372aed4751"},{"systemId":"57e518890d0794392aa7daed","pbxId":"pbxagent_9f8cbe9d67e4445f960378cfa17cc60c"},{"systemId":"57ea24bd5672bd5622a8354a","pbxId":"pbxagent_0cbe28aa301d40d08b1c9eb264cc7dc8"}],"companies":["57e2b30c89a091b21e843924"],"id":"57e55ba1aa2b014d715f9c8f"},{"name":"ALE_SP Malaga","systems":[{"systemId":"57e8c879b8be68670b2a6ca8","pbxId":"pbxagent_07f9596a5cc34dde8a37dd3200566a10"},{"systemId":"57e8ced2212d6d09123ec9d4","pbxId":"pbxagent_7f521f657b9042eba12fbf896e60e72b"}],"companies":["57e2afbb467af7d11dc0eb57"],"id":"57ecdc63fa5aac7050dba4d7"}],"limit":100,"offset":0,"total":2}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}}}},"post":{"tags":["Systems Groups"],"summary":"Create a systems group","description":"A systems group is a logical set of systems (pabx), sharing the same dial plan and linked through a private network.   \nSystems belonging to this group may either belonging to the same Site, or belonging from several sites under the same company.   \nWaiting for a real use case, it is possible to federate inside the same group, systems belonging to companies under the same organization.   \nIt's not possible to include multi-tenant systems (isCentrex = true) inside a systems group.   \n  \n**Specific feature:** Sharing a system between several companies   \nSince 1.47.0 release, configuring companies sharing a multi-tenant system is possible.  \nAn OXE can be multi-company.  \nA multi-tenant system, so called CENTREX, allows sharing a call-server between several entities. For us an entity is a company with the flag isCentrex=true.  \nA multi-tenant system can't be set inside a systems group. That does not make sense.","operationId":"PostSystemsGroups","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PostSystemsGroups"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PostSystemsGroupsSuccess"},"examples":{"application/json":{"data":{"name":"ALE_SP Malaga","systems":[{"systemId":"57e8c879b8be68670b2a6ca8","pbxId":"pbxagent_07f9596a5cc34dde8a37dd3200566a10"},{"systemId":"57e8ced2212d6d09123ec9d4","pbxId":"pbxagent_7f521f657b9042eba12fbf896e60e72b"}],"companies":["57e2afbb467af7d11dc0eb57"],"id":"57ecdc63fa5aac7050dba4d7"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":"No Systems Group data provided for update. Expected optional fields:  name","errorDetailsCode":400100}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Administrator admin.bpdr@mycompany.com is not allowed to perform this operation. (Detail: A CENTREX company can't own a systems group)","errorDetailsCode":403303}}},"404":{"description":"Not found"},"409":{"description":"Conflict","examples":{"application/json":{"errorCode":409,"errorMsg":"Conflict","errorDetails":["System: 57e8c879b8be68670b2a6ca8 was found in SystemsGroup: 57ecdc63fa5aac7050dba4d7 Name: ALE_SP Malaga"],"errorDetailsCode":409200}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/systems/{systemId}/phone-numbers":{"get":{"tags":["Systems Phone Numbers"],"summary":"Get all system phone numbers","description":"This API allows to list all phoneNumbers associated to a given system (pbx).   \n  \nUsers with `superadmin` or `support` role can retrieve phoneNumbers from any system.   \n`bp_admin` can only retrieve phoneNumbers linked to systems of End Customer companies for which their bp_admin's company is the BP company.   \nUsers with `admin` role (and not having superadmin nor support role) can only retrieve phoneNumbers of systems that they manage.   \nIn a Multi-Layer organization that describes a hierarchy including ORGANIZATIONS/COMPANIES/SITES/SYSTEMS, an admin role of a upper layer is allowed to see systems within their's reach.   \n_Notes:_* `systemId` field returned in response corresponds to portal's internal mongoDB id, while `pbxId` is the id handled by PCG.\n* This API is paginated.\n* phoneNumbers list can be filtered on the following fields:\n\n  * `shortNumber`: allow to retrieve only phoneNumbers starting by the provided value.   \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/systems/569d0ef3ef7816921f7e94fa/phone-numbers?**shortNumber=123**\n  * `internalNumber`: allow to retrieve only phoneNumbers starting by the provided value.   \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/systems/569d0ef3ef7816921f7e94fa/phone-numbers?**internalNumber=123**\n  * `pbxUserId`: allow to retrieve only phoneNumbers having the provided pbxUserId value.   \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/systems/569d0ef3ef7816921f7e94fa/phone-numbers?**pbxUserId=123**\n  * `isMonitored`: allow to retrieve only phoneNumbers for which monitoring in Rainbow application is activated (true) or deactivated (false).   \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/systems/569d0ef3ef7816921f7e94fa/phone-numbers?**isMonitored=true**\n  * `isAssignedToUser`: allow to retrieve only phoneNumbers being associated (true) or not (false) to a Rainbow user.   \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/systems/569d0ef3ef7816921f7e94fa/phone-numbers?**isAssignedToUser=true**\n  * `userId`: allow to retrieve only phoneNumbers being associated to the requested Rainbow user id.   \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/systems/569d0ef3ef7816921f7e94fa/phone-numbers?**userId=57960e4fa1ab69c4243415b1**\n  * `companyPrefix`: allow to retrieve only phoneNumbers having the provided companyPrefix value. **See below 'Sharing a system between several companies'**  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/systems/569d0ef3ef7816921f7e94fa/phone-numbers?**companyPrefix=8210****This filter is not taken in account for role admin.**\n\n* Filters can be combined.   \nExample: retrieve the list of phoneNumbers being associated to a Rainbow user and for which monitoring is enabled in Rainbow application: GET https://openrainbow.com/api/rainbow/admin/v1.0/systems/569d0ef3ef7816921f7e94fa/phone-numbers?**isAssignedToUser=true**&**isMonitored=true**\n\n  \n  \n**Specific feature:** Sharing a system between several companies   \nSince 1.47.0 release, configuring companies sharing a multi-tenant system is possible.  \nAn OXE can be multi-company.  \nA multi-tenant system, so called CENTREX, allows sharing a call-server between several entities.  \nWhen directoryNumber are got from this system two more data are available: \"companyName\", \"companyPrefix\".  \nThese data are stored and it's now possible to get all phoneNumbers having the given \"companyPrefix\".   \nA company-admin can only see, then give to a rainbow user, numbers of his company.  \n","operationId":"GetSystemPhoneNumbers","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"systemId","in":"path","required":true,"type":"string","description":"System unique identifier (like 569ce8c8f9336c471b98eda1)"},{"name":"shortNumber","in":"query","required":false,"type":"string","description":"Allow to filter phoneNumbers list on phoneNumbers having shortNumber field starting with the provided value."},{"name":"internalNumber","in":"query","required":false,"type":"string","description":"Allow to filter phoneNumbers list on phoneNumbers having internalNumber field starting with the provided value."},{"name":"pbxUserId","in":"query","required":false,"type":"string","description":"Allow to filter phoneNumbers list on phoneNumbers having pbxUserId field equal to provided value."},{"name":"companyPrefix","in":"query","required":false,"type":"string","description":"When the system is a centrex server (multi-tenant OXE), allow to filter phoneNumbers list on companyPrefix.The companyPrefix value to set is named 'tenantCallNumber' in companies data model. \n\n* 8210: return all phoneNumbers having the prefix 8210, then allocated to the company having the 'tenantCallNumber' 8210 (exact match)\n\n"},{"name":"isMonitored","in":"query","required":false,"type":"boolean","description":"Allow to filter phoneNumbers list on phoneNumbers having isMonitored field equal to provided value.","enum":["true","false"]},{"name":"name","in":"query","required":false,"type":"string","description":"Allow to filter phoneNumbers list on phoneNumbers having firstName or lastName starting with the provided value."},{"name":"deviceName","in":"query","required":false,"type":"string","description":"Allow to filter phoneNumbers list on phoneNumbers having deviceName field equal to provided value."},{"name":"isAssignedToUser","in":"query","required":false,"type":"boolean","description":"Allow to filter phoneNumbers list on phoneNumbers being assigned or not to a Rainbow user, according to provided value. \n\n* true: return all phoneNumbers having userId !== null\n* false: return all phoneNumbers having userId === null\n\n","enum":["true","false"]},{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less phone numbers details in response.   \n- `small`: id shortNumber internalNumber numberE164   \n- `medium`: id shortNumber internalNumber voiceMailNumber number numberE164 isFromSystem pbxId systemId   \n- `full`: all phone numbers fields","enum":["small","medium","full"],"default":"small"},{"name":"limit","in":"query","required":false,"type":"number","description":"Allow to specify the number of phone numbers to retrieve.","default":"100"},{"name":"offset","in":"query","required":false,"type":"number","description":"Allow to specify the position of first phone number to retrieve (first phone number if not specified). Warning: if offset > total, no results are returned."},{"name":"sortField","in":"query","required":false,"type":"string","description":"Sort phone numbers list based on the given field.","default":"shortNumber"},{"name":"sortOrder","in":"query","required":false,"type":"number","description":"Specify order when sorting phone numbers list.","enum":["-1","1"],"default":"1"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":[{"id":"5790fd2256b61a4d865839fe","shortNumber":"1001","internalNumber":"20001","voiceMailNumber":"9999","number":"0300001001","numberE164":"+33300001001","pbxUserId":"1","country":"FRA","type":"work","deviceType":"landline","isFromSystem":true,"pbxId":"pbxagent_315e5b2dbf8746fd93660df375933c23","systemId":"575beb22ccb329a11a1cef6c","isMonitored":true,"userId":"57960e4fa1ab69c4243415b1","jid_im":"82fc7375cf34403a9c711ae7eda0929f@openrainbow.com","jid_tel":"tel_82fc7375cf34403a9c711ae7eda0929f@openrainbow.com","jid_password":"fd6806bca74942598f57c288b0d50baa"},{"id":"5790fd2256b61a4d865839ff","shortNumber":"1002","internalNumber":"20002","voiceMailNumber":"9999","number":"0300001002","numberE164":"+33300001002","pbxUserId":"2","country":"FRA","type":"work","deviceType":"landline","isFromSystem":true,"pbxId":"pbxagent_315e5b2dbf8746fd93660df375933c23","systemId":"575beb22ccb329a11a1cef6c","isMonitored":false,"userId":null,"jid_im":null,"jid_tel":null,"jid_password":null}],"limit":100,"offset":0,"total":2}}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"System with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/systems/{systemId}/phone-numbers/{phoneNumberId}":{"get":{"tags":["Systems Phone Numbers"],"summary":"Get a system phone number","description":"This API allows to retrieve a specific phoneNumber associated to a given system (pbx).   \n  \nUsers with `superadmin` or `support` role can retrieve phoneNumbers from any system.   \n`bp_admin` can only retrieve phoneNumbers linked to systems of End Customer companies for which their bp_admin's company is the BP company.   \nUsers with `admin` role (and not having superadmin nor support role) can only retrieve phoneNumbers of systems that they manage.   \nIn a Multi-Layer organization that describes a hierarchy including ORGANIZATIONS/COMPANIES/SITES/SYSTEMS, an admin role of a upper layer is allowed to see systems within their's reach.   \n  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/systems/569d0ef3ef7816921f7e94fa/phoneNumbers/5790fd2256b61a4d865839fe   \n  \n**Specific feature:** Sharing a system between several companies   \nSince 1.47.0 release, configuring companies sharing a multi-tenant system is possible.  \nAn OXE can be multi-company.  \nA multi-tenant system, so called CENTREX, allows sharing a call-server between several entities.  \nWhen a company-admin or a site-admin wants to get one of the directoryNumber of this system we have to check if the \"tenantCallNumber\" of his company matches with \"companyPrefix\".  \nElse an HTTP error 404 Not Found is thrown.  \n","operationId":"GetSystemPhoneNumbersId","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"systemId","in":"path","required":true,"type":"string","description":"System unique identifier (like 569ce8c8f9336c471b98eda1)"},{"name":"phoneNumberId","in":"path","required":true,"type":"string","description":"PhoneNumber unique identifier (like 569ce8c8f9336c471b98eda1)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":{"id":"5790fd2256b61a4d865839fe","shortNumber":"1001","internalNumber":"20001","voiceMailNumber":"9999","number":"0300001001","numberE164":"+33300001001","pbxUserId":"1","country":"FRA","type":"work","deviceType":"landline","isFromSystem":true,"pbxId":"pbxagent_315e5b2dbf8746fd93660df375933c23","systemId":"575beb22ccb329a11a1cef6c","isMonitored":false,"userId":"57960e4fa1ab69c4243415b1","jid_im":"82fc7375cf34403a9c711ae7eda0929f@openrainbow.com","jid_tel":"tel_82fc7375cf34403a9c711ae7eda0929f@openrainbow.com","jid_password":"fd6806bca74942598f57c288b0d50baa"}}}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"phoneNumber with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"put":{"tags":["Systems Phone Numbers"],"summary":"Update a system phone number","description":"This API allows to update a phone number for a given system (pbx).   \n  \nIt can be used to link a system phoneNumber to a Rainbow user by setting `userId` parameter. If `userId` parameter is provided, jid_im, jid_tel and jid_password of the corresponding user are automatically set in phoneNumber.   \nIt can also be used to enable monitoring of this phoneNumber by PCG (set `isMonitored` parameter to true). **Note that**`pbxId`, `systemId`, `shortNumber` and `pbxUserId` can't be modified.   \n  \nWhen the phoneNumber is updated with this API, PCG is notified on its corresponding JID pbxpcg with the following XMPP iq: \n\n    \n```html\n<iq id=\"8413b42e-563c-4437-9a53-06f638b5ab69_0\"\n          from=\"pcloud@openrainbow.com/172440802160413612281463752830017532\"\n          to=\"pbxpcg_7ca2d0aefb024c949303b508fcecdad2@openrainbow.com\"\n          xmlns=\"jabber:client\">\n     <config xmlns=\"urn:xmpp:pbxagent:config:1\">\n         <user action=\"update\"/>\n            <shortNumber>1001</shortNumber>\n            <internalNumber>20001</internalNumber>\n            <voiceMailNumber>9999</voiceMailNumber>\n            <numberE164>+33300001001</numberE164>\n            <isMonitored>false</isMonitored>\n            <userId>57960e4fa1ab69c4243415b1</userId>\n            <jid_im>82fc7375cf34403a9c711ae7eda0929f@openrainbow.com</jid_im>\n            <jid_tel>tel_82fc7375cf34403a9c711ae7eda0929f@openrainbow.com</jid_tel>\n            <jid_password>fd6806bca74942598f57c288b0d50baa</jid_password>\n     </config>\n</iq>\n```\n  \n  \nThe API waits that PCG has taken into account the phoneNumber update before processing the update in database and sending the response to client.   \n  \nUsers with `superadmin` role can update phoneNumbers objects of any system.   \n`bp_admin` can only update phoneNumbers linked to systems of End Customer companies for which their bp_admin's company is the BP company.   \nUsers with `admin` role (and not having superadmin) can only update phoneNumbers objects on systems that they manage.   \nIn a Multi-Layer organization that describes a hierarchy including ORGANIZATIONS/COMPANIES/SITES/SYSTEMS, an admin role of a upper layer is allowed to see systems within their's reach.   \n  \nExample: PUT https://openrainbow.com/api/rainbow/admin/v1.0/systems/569d0ef3ef7816921f7e94fa/phoneNumbers/5790fd2256b61a4d865839fe   \n  \n**Specific feature:** Sharing a system between several companies   \nSince 1.47.0 release, configuring companies sharing a multi-tenant system is possible.  \nAn OXE can be multi-company.  \nA multi-tenant system, so called CENTREX, allows sharing a call-server between several entities. For us an entity is a company with the flag isCentrex=true.  \nIt's not possible to update the internalNumber for a phone number supplied by this kind of system.  \nThe specific error \"internalNumber 3000 is readonly because it belongs to a multi-tenant system\",\"errorDetailsCode\": 409553 is thrown.","operationId":"PutSystemPhoneNumbers","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"systemId","in":"path","required":true,"type":"string","description":"System unique identifier (like 569ce8c8f9336c471b98eda1)"},{"name":"phoneNumberId","in":"path","required":true,"type":"string","description":"PhoneNumber unique identifier (like 569ce8c8f9336c471b98eda1)"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PutSystemPhoneNumbers"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PutSystemPhoneNumbersSuccess"},"examples":{"application/json":{"data":{"id":"5790fd2256b61a4d865839fe","shortNumber":"1001","internalNumber":"20001","voiceMailNumber":"9999","number":"0300001001","numberE164":"+33300001001","pbxUserId":"1","country":"FRA","type":"work","deviceType":"landline","isFromSystem":true,"pbxId":"pbxagent_315e5b2dbf8746fd93660df375933c23","systemId":"575beb22ccb329a11a1cef6c","isMonitored":false,"userId":"57960e4fa1ab69c4243415b1","jid_im":"82fc7375cf34403a9c711ae7eda0929f@openrainbow.com","jid_tel":"tel_82fc7375cf34403a9c711ae7eda0929f@openrainbow.com","jid_password":"fd6806bca74942598f57c288b0d50baa"}}}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"User 5749afba245015fe0d36e96c with 'admin' role is not assigned to administrate System 57486e5d807a594145e510d6","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"user with id 574ffbe0170a86f3297bc35a does not exist.","errorDetailsCode":404000}}},"409":{"description":"Conflict","examples":{"application/json":{"errorCode":409,"errorMsg":"Conflict","errorDetails":"System 575beb22ccb329a11a1cef6c already has a phoneNumber with shortNumber 1001","errorDetailsCode":409550}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/systems/{systemId}/phone-numbers/multi-companies":{"get":{"tags":["Systems Phone Numbers Multi Companies"],"summary":"Get all companyPrefix for a isCentrex system","description":"Sharing a system between several companies   \nSince 1.47.0 release, configuring companies sharing a multi-tenant system is possible.  \nAn OXE can be multi-company.  \nA multi-tenant system, so called CENTREX, allows sharing a call-server between several entities.  \nWhen directoryNumber are got from this system two more data are available: \"companyName\", \"companyPrefix\".  \nThese data are stored and it's now possible to get all \"companyPrefix\".   \n","operationId":"GetSystemPhoneNumbersMulti","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"systemId","in":"path","required":true,"type":"string","description":"System unique identifier (like 569ce8c8f9336c471b98eda1)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found"},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/systems/{systemId}/reset-password":{"post":{"tags":["Systems Reset Password"],"summary":"Reset CCCA jid password","description":"It would be necessary to reset the password used by the CCCA to join rainbow infrastructure.   \nAmong system data fields, jid_pbxagent and jid_pbxagent_password are used by the CCCA to try an authentication.   \nThe new API : \n\n* regenerate an activation code which is stored in the Admin portal and XMPP server (four digits)\n* does not change the existing pbxId\n* replace the system status from \"activated\" to \"created\"\n\n  \nTo finalize CCCA authentication refer to (Get a pbx data using API [GET /api/rainbow/pcg/v1.0/pbxs/{pbxId}][0]).\n\n[0]: #api-pcg_pbxs-GetPbxId","operationId":"PostSystemsRestPassword","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"systemId","in":"path","required":true,"type":"string","description":"System unique identifier (like 569ce8c8f9336c471b98eda1)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PostSystemsRestPasswordSuccess"},"examples":{"application/json":{"data":{"latin_name":"node_alpha_oxe_r11 demo","name":"node_alpha_oxe_R11 demo","country":"FRA","pbxId":"pbxagent_db489778882d41d6a9d69e2f0d0170b5","jid_pbxagent":"pbxagent_db489778882d41d6a9d69e2f0d0170b5@francky-all-in-one-dev-1.opentouch.cloud","jid_pbxagent_password":"6763","jid_pbxpcg":"pbxpcg_806f9c73c4be40a191f5591be778e9f3@francky-all-in-one-dev-1.opentouch.cloud","jid_pbxpcg_password":"af9b871bc5204184bf84d4bc9aabd1bf","version":"9.2","serverPingTimeout":120,"pbxMainBundlePrefix":["0"],"usePbxMainBundlePrefix":true,"pbxNumberingTranslator":[{"regexpMatch":"^218","regexpReplace":"039067","description":"Numbers 218xxx => 039067xxx"},{"regexpMatch":"^((0..9){1,5})$","regexpReplace":"$1","description":"Numbers of five digits are internal"},{"regexpMatch":"^3699$","regexpReplace":"03699","description":"Numbers 3699xxx => 03699xxx"},{"regexpMatch":"^18$","regexpReplace":"","description":"18 is forbidden"}],"pbxNationalPrefix":"0","pbxInternationalPrefix":"00","statusUpdatedDate":"2016-12-14T15:03:25.858Z","creationDate":"2016-12-14T15:03:25.858Z","status":"created","siteId":["57585233d3c3e3e5095250ba"],"searchResultOrder":["RAINBOW","LDAP","PBX"],"type":"oxe","id":"58515f3df5eb9225650b64d8"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"systemId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"User 5749afba245015fe0d36e96c with 'admin' role is not assigned to administrate System 57486e5d807a594145e510d6","errorDetailsCode":403301}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"System with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/users/{userId}":{"delete":{"tags":["Users"],"summary":"Delete a user","description":"This API can be used to delete a user.   \n  \n**BP Admin** and **BP Finance** users can only delete users being in a company linked to their BP company.   \n**Admin** users can only delete users being in their own company. (superadmin, organization_admin, company_admin)   \n  \nDepending current user initialization, the behaviour to follow may change \n\n* user never initialized and never logged, user with the role 'guest':\n\n  * delete the user from xmpp and database\n\n* user currently initialized or logged at least one time\n\n  * change loginEmail, change rainbow password, change jid_password, warn deleted user clients for disconnection\n  * delete personal phone numbers and free system phone numbers\n  * flag pending invite as canceled\n  * flag join company requests as canceled\n  * for all rooms where the user privilege is not 'moderator' or not le last, he gets the status 'deleted'\n  * for all rooms where the user is the last moderator, the room is 'archived', that is to say all users of the room get the status 'unsubscribed'\n  * delete avatar and warn clients\n  * set user flag 'isTerminated' and move him to the dedicated company 'Terminated'\n\n\nThe following XMPP message is sent to all users being in deleted user's roster: \n\n    \n```html\n<message id=\"8413b42e-563c-4437-9a53-06f638b5ab69_0\" type=\"management\"\n    from=\"pcloud_enduser_1@openrainbow.com/172440802160413612281463752830017532\"\n    to=\"5abb735b2d3c4e50adde276c50ec489c@@openrainbow.com\"\n    xmlns=\"jabber:client\">\n    <useraccount id=\"56c5c19f94141765119f896c\" action=\"update\" xmlns=\"jabber:iq:configuration\"\n</message>\n```\n  \n**Only a migration script is planned to delete permanently a user 'terminated' after a legal delay time.**","operationId":"DeleteUsers","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","required":true,"type":"string","description":"User unique identifier (like 56c5c19f94141765119f896c)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"status":"User 56c5c19f94141765119f896c successfully disabled","data":{"firstLoginDate":"2016-10-26T07:31:05.744Z","activationDate":"2016-10-26T07:23:59.796Z","companyName":"Terminated","initializationDate":"2016-10-26T07:31:33.651Z","accountType":"free","jid_password":"cf1c87a48b7f434fa4d1bdd2895330f8","sponsoring":{"invitationsAcceptedByList":[],"invitationsSentNumber":0},"id":"58105a0f4b1748307345bf58","loggedSince":"2016-10-26T13:57:47.991Z","loginEmail":"ter_1478105583769_alice@mycompany.fr","failedLoginAttempts":0,"firstName":"Alice","isInitialized":true,"profile":{"subscriptionId":"580e2630a6501830067dcb7a","offerId":"580e262ea2bc0f70c000dacd","offerName":"Essential","profileId":"580e262ea2bc0f70c000dacc","profileName":"Essential","assignationDate":"2016-11-02T16:53:04.163Z","status":"active"},"companyId":"5808b7fd0265331550d655d1","roles":["user"],"visibleBy":[],"organisationId":null,"lastUpdateDate":"2016-11-02T16:53:03.979Z","lastName":"De Nice","siteId":null,"lastAvatarUpdateDate":null,"displayName":"Alice De Nice","terminatedDate":"2016-11-02T16:53:03.769Z","jid_tel":"tel_81bd130d022f470fa1455dfe8916f2c6@francky-all-in-one-dev-1.opentouch.cloud","createdBySelfRegister":false,"lastExpiredTokenRenewedDate":null,"visibility":"private","phoneNumbers":[],"lastLoginDate":"2016-10-26T13:57:47.991Z","jid_im":"81bd130d022f470fa1455dfe8916f2c6@francky-all-in-one-dev-1.opentouch.cloud","emails":[{"email":"alice@mycompany.fr","type":"work"}],"lastLoginFailureDate":null,"terminatedBy":{"userId":"57e396cdb6173c684e48c6d7","loginEmail":"superadmin@openrainbow.org"},"createdByAdmin":{"userId":"57e3c0376f24fcf959676dba","loginEmail":"admin5@ale-international.com"},"adminType":"undefined","creationDate":"2016-10-26T07:23:59.796Z","isTerminated":true,"isActive":true}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"userId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"User with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"409":{"description":"Conflict","examples":{"application/json":{"errorCode":409,"errorMsg":"Conflict","errorDetails":"User 58105a0f4b1748307345bf58 (ter_1477556743898_alice@mycompany.fr). Already terminated.","errorDetailsCode":409000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"get":{"tags":["Users"],"summary":"Get a user data","description":"This API can be used to get a user.   \n  \nUsers with `superadmin`, `support` role can retrieve any user whatever the company.   \nUsers with `support` role retrieve additional data lastLoginIOSDate and lastLoginAndroidDate.   \n  \nUsers with `bp_admin` or `bp_finance` role can only retrieve users from company being End Customers of their BP company (i.e. all the companies having bpId equal to their companyId).   \n  \nUsers with `admin` role can only retrieve users belonging to companies they can manage. That is to say: \n\n* an organization_admin can only get users belonging to a company he can manage (i.e. companies having organisationId equal to his organisationId)\n* a company_admin can only get a user being in his company\n* a site_admin can only get a user being in his company\n\n  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/users/56c5cb38e8078d7512c43985","operationId":"GetUsersId","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","required":true,"type":"string","description":"User unique identifier (like 56c5c19f94141765119f896c)"},{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less user details in response.   \n- `small`: id, displayName, loginEmail, companyId, companyName   \n- `medium`: id, loginEmail, displayName, firstName, lastName, jid_im, jid_tel, companyId, companyName, isTerminated, lastAvatarUpdateDate, lastUpdateDate   \n- `full`: all user fields","enum":["small","medium","full"],"default":"full"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"number"},"examples":{"application/json":{"data":{"id":"56c5c19f94141765119f896c","loginEmail":"user1@company.com","firstName":"Firstname","lastName":"Lastname","displayName":"Firstname Lastname","nickName":"Nickname","title":"Mr.","jobTitle":"Research and Development","emails":[{"email":"user1@company.com","type":"work"},{"email":"user1@home.com","type":"home"}],"phoneNumbers":[{"shortNumber":"1002","pbxId":"PBX712e-bd96-0c27-4350-a3ff-dc0c-83e7-c246","systemId":"57dc0644f44a97c9155cd462","country":"FRA","number":"0390676767","numberE164":"+33390676767","phoneNumberId":"58876dad81e063e01187dd24","isMonitored":true,"isFromSystem":true,"deviceType":"landline","type":"work"},{"number":"0390909090","country":"FRA","numberE164":"+33390909090","phoneNumberId":"577e2e9b86c953de7838d635","systemId":null,"isFromSystem":false,"deviceType":"landline","type":"home"},{"number":"0690909090","country":"FRA","numberE164":"+33690909090","phoneNumberId":"577e2e9b86c953de7838d636","systemId":null,"isFromSystem":false,"deviceType":"mobile","type":"home"}],"country":"FRA","language":"fr-FR","timezone":"Europe/Paris","jid_im":"2d2f1aaf5ce54a2dbae9d70490366562@openrainbow.com","jid_tel":"tel_2d2f1aaf5ce54a2dbae9d70490366562@openrainbow.com","jid_password":"3b3f6e2c927940b2875f1ec604c0363b","roles":["user","superadmin"],"adminType":"undefined","companyId":"569ce8c8f9336c471b98eda1","companyName":"My company","isInDefaultCompany":false,"organisationId":null,"siteId":null,"isActive":true,"isInitialized":true,"initializationDate":"2016-01-18T13:30:44.498Z","activationDate":"2016-01-18T13:29:44.498Z","creationDate":"2016-01-18T12:45:44.498Z","lastUpdateDate":"2016-01-19T16:33:22.548Z","lastAvatarUpdateDate":"2016-01-19T11:29:11.567Z","createdBySelfRegister":true,"createdByAdmin":{"userId":"56d69d020c92b35b3041d433","loginEmail":"superadmin@localhost.fr"},"invitedBy":{"invitationId":"574ffe07170a86f3297bc35b","invitationDate":"2016-01-15T13:29:44.498Z","userId":"56d69d020c92b35b3041d533","loginEmail":"user0@company.com"},"openInvites":{"openInviteId":"77745cff22e44d56bdb47b49d28f3e0c","roomId":"5ab109781caacce5df54436a"},"firstLoginDate":"2016-01-18T13:29:44.498Z","lastLoginDate":"2016-02-23T09:17:42.523Z","loggedSince":"2016-02-23T09:17:42.523Z","isTerminated":false,"guestMode":false}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"userId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"User with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"put":{"tags":["Users"],"summary":"Update a user","description":"This API can be used to update data of a user.   \nUnlike end-user PUT /users/id API, this admin API allows to update these fields: `loginEmail`, `password`, `roles`, `accountType` and `isActive`.   \nIn case of user password update, if user account was locked (because of too many login attempts failures), user account will be unlocked once password is changed.   \n  \n**BP Admin** and **BP Finance** users can only update users being in a company linked to their BP company.   \n**Admin** users can only update users being in their own company.   \n**Support** users can only update user password.   \nWhatever user's admin roles, user can't update his own loginEmail.   \nA user can't modify his own roles.   \n  \nA presence stanza is sent to updated user's resources and users being in user's roster. This allow clients to be notified that this user has been updated: \n\n    \n```html\n<presence from='3ae059e2a91c40d9bdd7df0eedc911ca@openrainbow.com'>\n    <x xmlns='vcard-temp:x:update'>\n        <data/>\n    </x>\n</presence>\n```\n  \nNote that phone numbers linked to a system (pbx) can't be added in user's phoneNumbers using this API. System phone numbers are created by administrators or by PCG and can be linked to Rainbow user using: [PUT /api/rainbow/admin/v1.0/systems/:systemId/phone-numbers/:phoneNumberId][0]  \nIn some cases, creating a user with GUEST role may be sufficient. Here are GUEST role specificity: \n\n* GUEST is a single role that can't be modified\n* Created by a COMPANY ADMIN only, in his company\n* Has limited rights to chat, audio and video conversations\n* Is never notified by email\n* Can't receive welcome message by Emily\n* Can't manage its password (reset)\n* By default, can't be search inside or outside his company\n* Can't be moved to another company\n* Definitely deleted (his user experience is not kept: conversations ...)\n\n  \nNote than when user password is changed, all its previously generated JWT are revoked and jid_password of its jid_im and jid_tel is updated with a new password. All connected jid_im and jid_tel resources are also disconnected.   \nTherefore, clients have to login again with this user in order to retrieve a new valid JWT and its new jid_password.   \n  \nThe following XMPP message is sent to user's jid_im to warn that the password has changed: \n\n    \n```html\n<message id=\"8413b42e-563c-4437-9a53-06f638b5ab69_0\" type=\"management\"\n    from=\"pcloud_enduser_1@openrainbow.com/172440802160413612281463752830017532\"\n    to=\"5abb735b2d3c4e50adde276c50ec489c@@openrainbow.com\"\n    xmlns=\"jabber:client\">\n    <userpassword action=\"update\" xmlns=\"jabber:iq:configuration\"\n</message>\n```\n\n[0]: #api-admin_systems_phone_numbers-PutSystemPhoneNumbers","operationId":"PutUsers","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","required":true,"type":"string","description":"User unique identifier (like 56c5c19f94141765119f896c)"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PutUsers"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PutUsersSuccess"},"examples":{"application/json":{"data":{"id":"56c5c19f94141765119f896c","loginEmail":"user1@company.com","firstName":"Firstname","lastName":"Lastname","displayName":"Firstname Lastname","nickName":"Nickname","title":"Mr.","jobTitle":"Research and Development","emails":[{"email":"user1@company.com","type":"work"},{"email":"user1@home.com","type":"home"}],"phoneNumbers":[{"shortNumber":"1002","pbxId":"PBX712e-bd96-0c27-4350-a3ff-dc0c-83e7-c246","systemId":"57dc0644f44a97c9155cd462","country":"FRA","number":"0390676767","numberE164":"+33390676767","phoneNumberId":"58876dad81e063e01187dd24","isMonitored":true,"isFromSystem":true,"deviceType":"landline","type":"work"},{"number":"0390909090","country":"FRA","numberE164":"+33390909090","phoneNumberId":"577e2e9b86c953de7838d635","systemId":null,"isFromSystem":false,"deviceType":"landline","type":"home"},{"number":"0690909090","country":"FRA","numberE164":"+33690909090","phoneNumberId":"577e2e9b86c953de7838d636","systemId":null,"isFromSystem":false,"deviceType":"mobile","type":"home"}],"country":"FRA","language":"fr-FR","timezone":"Europe/Paris","jid_im":"2d2f1aaf5ce54a2dbae9d70490366562@openrainbow.com","jid_tel":"tel_2d2f1aaf5ce54a2dbae9d70490366562@openrainbow.com","jid_password":"3b3f6e2c927940b2875f1ec604c0363b","roles":["user","superadmin"],"adminType":"undefined","companyId":"569ce8c8f9336c471b98eda1","companyName":"My company","isInDefaultCompany":false,"organisationId":null,"siteId":null,"isActive":true,"isInitialized":true,"initializationDate":"2016-01-18T13:30:44.498Z","activationDate":"2016-01-18T13:29:44.498Z","creationDate":"2016-01-18T12:45:44.498Z","lastUpdateDate":"2016-01-19T16:33:22.548Z","lastAvatarUpdateDate":"2016-01-19T11:29:11.567Z","createdBySelfRegister":true,"createdByAdmin":{"userId":"56d69d020c92b35b3041d433","loginEmail":"superadmin@localhost.fr"},"invitedBy":{"invitationId":"574ffe07170a86f3297bc35b","invitationDate":"2016-01-15T13:29:44.498Z","userId":"56d69d020c92b35b3041d533","loginEmail":"user0@company.com"},"openInvites":{"openInviteId":"77745cff22e44d56bdb47b49d28f3e0c","roomId":"5ab109781caacce5df54436a"},"firstLoginDate":"2016-01-18T13:29:44.498Z","lastLoginDate":"2016-02-23T09:17:42.523Z","loggedSince":"2016-02-23T09:17:42.523Z","isTerminated":false,"guestMode":false}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"userId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"The current company subscription disallow to create another admin. (Detail: max value [counter])","errorDetailsCode":403304}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"User with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"409":{"description":"Conflict","examples":{"application/json":{"errorCode":409,"errorMsg":"Conflict","errorDetails":{"param":"phoneNumbers.internalNumber","msg":"internalNumber 218001 is already used by another phoneNumber within the system group","value":"218001"},"errorDetailsCode":409552}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/users":{"get":{"tags":["Users"],"summary":"Get all users","description":"This API allows administrators to list users.   \n  \nUsers with `superadmin`, `support` role can retrieve users from any company.   \nUsers with `support` role can retrieve lastLoginIOSDate and lastLoginAndroidDate providing format option `full`.   \n  \nUsers with `bp_admin` or `bp_finance` role retrieve only users from company being End Customers of their BP company (i.e. all the companies having bpId equal to their companyId).   \n  \nUsers with `admin` role retrieve only users belonging to companies they can manage. That is to say: \n\n* an organization_admin gets all users belonging to each companies he manages (i.e. companies having organisationId equal to his organisationId)\n* a company_admin gets all users being in his company\n* a site_admin gets all users being in his company\n\n  \nNote: \n\n* To hide GUEST, the filter roles=user is applied by default. Then all multi-roles like `admin`, `bp_admin` or `bp_finance` stay retrievable. To get only guest belonging to a company, use GET /api/rainbow/admin/v1.0/users?roles=guest\n\n  \nThis API can return more or less user information using format option in query string arguments (default is small).   \nThis API implement pagination, using limit and offset options in query string arguments (default is limit on 100 users). Result sorting can also be done using sort and order options (default is sort on displayName on ascending order).   \n  \nSimilarly to search API, this API allows to filter results on several criterion by providing appropriate options in query string arguments (displayName, companyName, loginEmail, jid_im, jid_tel, companyId).   \n  \nExamples: \n\n* basic: GET https://openrainbow.com/api/rainbow/admin/v1.0/users\n* with format options: GET https://openrainbow.com/api/rainbow/admin/v1.0/users?format=full\n* with pagination options: GET https://openrainbow.com/api/rainbow/admin/v1.0/users?limit=10&offset=20&sortField=loginEmail&sortOrder=-1\n* with filter options: GET https://openrainbow.com/api/rainbow/admin/v1.0/users?displayName=john doe&companyId=56d6f0d441255dd54b5b61b3 56b89d26f7ab94c69ad41584\n\n","operationId":"GetUsers","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"format","in":"query","required":false,"type":"string","description":"Allows to retrieve more or less user details in response.   \n- `small`: id, displayName, loginEmail, companyId, companyName   \n- `medium`: id, loginEmail, displayName, firstName, lastName, jid_im, jid_tel, companyId, companyName, isTerminated, lastAvatarUpdateDate, lastUpdateDate   \n- `full`: all user fields","enum":["small","medium","full"],"default":"small"},{"name":"searchEmail","in":"query","required":false,"type":"string","description":"Allows to filter users list on the loginEmail field using the word provided in this option."},{"name":"companyId","in":"query","required":false,"type":"string","description":"Allows to filter users list on the companyIds provided in this option.   \n  \nIn the case of `admin` (without superadmin, support roles), provided companyIds should correspond to companies visible by logged in user's company (if some of the provided companyId are not visible by logged in user's company, users from these companies will not be returned)."},{"name":"roles","in":"query","required":false,"type":"string","description":"Allows to filter users list on the role(s) provided in this option.   \n  \nThis allow for example to get all users with role bp_admin.   \nBy default, only users having (at least) the role `user` are listed.","default":"user"},{"name":"isTerminated","in":"query","required":false,"type":"string","description":"Allows to filter users list on the status 'isTerminated'.   \n  \nBy default, only users active users are listed.","default":"false"},{"name":"limit","in":"query","required":false,"type":"number","description":"Allow to specify the number of users to retrieve.","default":"100"},{"name":"offset","in":"query","required":false,"type":"number","description":"Allow to specify the position of first user to retrieve (first user if not specified). Warning: if offset > total, no results are returned."},{"name":"sortField","in":"query","required":false,"type":"string","description":"Sort user list based on the given field.","default":"displayName"},{"name":"sortOrder","in":"query","required":false,"type":"number","description":"Specify order when sorting user list.","enum":["-1","1"],"default":"1"},{"name":"displayName","in":"query","required":false,"type":"string","description":"Allows to filter users list on the given keyword(s) on field displayName."},{"name":"useEmails","in":"query","required":false,"type":"boolean","description":"used with displayName, allows to filter users list on the given keyword(s) on field displayName for loginEmails too."},{"name":"companyName","in":"query","required":false,"type":"string","description":"Allows to filter users list on the given keyword(s) on field companyName."},{"name":"loginEmail","in":"query","required":false,"type":"string","description":"Allows to filter users list on the loginEmails provided in this option."},{"name":"email","in":"query","required":false,"type":"string","description":"Allows to filter users list on the emails provided in this option."},{"name":"visibility","in":"query","required":false,"type":"string","description":"Allows to filter users list on the visibility(ies) provided in this option.","enum":["private","public","none"]},{"name":"organisationId","in":"query","required":false,"type":"string","description":"Allows to filter users list on the organisationIds provided in this option.   \n  \nOption is reserved for superAdmin or admin allowed to manage the given organisationId."},{"name":"siteId","in":"query","required":false,"type":"string","description":"Allows to filter users list on the siteIds provided in this option.   \n  \nOption is reserved for superAdmin or admin allowed to manage the given siteIds."},{"name":"jid_im","in":"query","required":false,"type":"string","description":"Allows to filter users list on the jid_ims provided in this option."},{"name":"jid_tel","in":"query","required":false,"type":"string","description":"Allows to filter users list on the jid_tels provided in this option."}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"},{"name":"site_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"number"},"examples":{"application/json":{"data":[{"id":"56c5c19f94141765119f896c","displayName":"Firstname Lastname","loginEmail":"user1@company.com","companyId":"569ce8c8f9336c471b98eda1","companyName":"My company","isTerminated":false},{"id":"56c5cb38e8078d7512c43985","displayName":"Firstname Lastname","loginEmail":"user2@company.com","companyId":"569ce8c8f9336c471b98eda1","companyName":"My company","isTerminated":false}],"total":2,"limit":100,"offset":0}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}}}},"post":{"tags":["Users"],"summary":"Create a user","description":"This api creates a user in Rainbow application.   \n  \nJabber identifiers (IM and TEL) are generated and user is created in XMPP server.   \n  \nUsers with `bp_admin` or `bp_finance` role can only create users in companies being End Customers of their BP company (i.e. all the companies having bpId equal to their companyId).   \n  \nUsers with `admin` role can only create users in companies they can manage. That is to say:  \n- an organization_admin can create users only in a company he can manage (i.e. companies having organisationId equal to his organisationId)  \n- a company_admin can only create users in his company  \n- a site_admin can't create users   \n  \n**Admin** users can only set roles `guest`, `user` and `admin`.   \n  \nNote that phone numbers linked to a system (pbx) can't be added in user's phoneNumbers using this API. System phone numbers are created by administrators or by PCG and can be linked to Rainbow user using: [PUT /api/rainbow/admin/v1.0/systems/{systemId}/phone-numbers/{phoneNumberId}][0]  \n  \nIn some cases, creating a user with GUEST role may be sufficient. Here are GUEST role specificity: \n\n* GUEST is a single role that can't be modified\n* Created by a COMPANY ADMIN only, in his company\n* Has limited rights to chat, audio and video conversations\n* Is never notified by email\n* Can't receive welcome message by Emily\n* Can't manage its password (reset)\n* By default, can't be search inside or outside his company\n* Can't be moved to another company\n* Definitely deleted (his user experience is not kept: conversations ...)\n\n\n[0]: #api-admin_systems_phone_numbers-PutSystemPhoneNumbers","operationId":"PostUsers","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/PostUsers"}}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/PostUsersSuccess"},"examples":{"application/json":{"data":{"firstName":"John","lastName":"Doe","emails":[{"email":"john.doe@home.com","type":"home"},{"email":"john.doe@mycompany.com","type":"work"}],"phoneNumbers":[{"firstName":"","lastName":"","deviceName":"","names":[],"type":"home","deviceType":"landline","isFromSystem":false,"isMonitored":false,"number":"0390909090","country":"FRA","numberE164":"+33390909090","phoneNumberId":"5b39e11ed0b1a669e71d0eac"},{"firstName":"","lastName":"","deviceName":"","names":[],"type":"home","deviceType":"mobile","isFromSystem":false,"isMonitored":false,"number":"0690909090","country":"FRA","numberE164":"+33690909090","phoneNumberId":"5b39e11ed0b1a669e71d0eae"},{"firstName":"","lastName":"","deviceName":"","names":[],"type":"rainbow","deviceType":"other","isFromSystem":false,"isMonitored":false,"number":"10277088499392642","phoneNumberId":"5b39e11ed0b1a669e71d0eb0"}],"isActive":true,"roles":["user","admin"],"adminType":"company_admin","accountType":"free","profiles":[{"isDefault":true,"status":"active","assignationDate":"2018-07-02T08:23:58.289Z","provisioningNeeded":[],"canBeSold":false,"isExclusive":false,"isPrepaid":false,"subscriptionId":"58d4f9821f0612597704f6c8","offerId":"58346927cd759a1cbd501e8d","offerName":"Professional","profileId":"58346200cd759a1cbd501e8c","profileName":"Professional","offerDescription":"Professional offer (6€/month)","offerTechnicalDescription":"Professional"}],"visibility":"public","organisationId":null,"siteId":null,"systemId":null,"creationDate":"2018-07-02T08:23:58.279Z","activationDate":"2018-07-02T08:23:58.279Z","isInitialized":true,"initializationDate":"2018-07-02T08:23:58.279Z","lastUpdateDate":null,"lastAvatarUpdateDate":null,"createdBySelfRegister":false,"createdByAppId":null,"firstLoginDate":null,"lastLoginDate":null,"loggedSince":null,"failedLoginAttempts":0,"lastLoginFailureDate":null,"lastExpiredTokenRenewedDate":null,"lastPasswordUpdateDate":null,"timeToLive":-1,"timeToLiveDate":null,"terminatedDate":null,"isTerminated":false,"guestMode":false,"loginEmail":"john.doe@mycompany.com","nickName":"Nickname","title":"Mr.","jobTitle":"Secret agent","country":"FRA","language":"fr-FR","timezone":"Europe/Paris","companyId":"58d4f9821f0612597704f6c7","createdByAdmin":{"userId":"57e396cdb6173c684e48c6d7","loginEmail":"superadmin@openrainbow.org"},"jid_im":"aa86d52e08f24f46a5dc39c48e79c03c@francky-all-in-one-dev-1.opentouch.cloud","jid_tel":"tel_aa86d52e08f24f46a5dc39c48e79c03c@francky-all-in-one-dev-1.opentouch.cloud","jid_password":"5c653ecd5c3a486580af3967b2a570da","companyName":"DEMO COMPANY","displayName":"John Doe","id":"5b39e11ed0b1a669e71d0ea9","isInDefaultCompany":false}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"userId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"The current company subscription disallow to create another admin. (Detail: max value [counter])","errorDetailsCode":403304}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"User with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"409":{"description":"Conflict","examples":{"application/json":{"errorCode":409,"errorMsg":"Conflict","errorDetails":{"param":"phoneNumbers.internalNumber","msg":"internalNumber 218001 is already used by another phoneNumber within the system group","value":"218001"},"errorDetailsCode":409552}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/users/{userId}/companies/default":{"put":{"tags":["Users Companies"],"summary":"Unlink user from a company and link it to default company","description":"This API can be used to unlink user from a company and link it to the default company.   \n  \n**BP Admin** or **BP Finance** users can only unlink users being in a company linked to their BP company.   \n**Admin** users can only unlink being in their own company.   \nNote that if user to unlink is an admin (organization_admin, company_admin, bp_admin, bp_finance ...), he will loose his admin rights.   \nNote also that if user was linked to PBX phone numbers, these phone numbers will be removed from user phone numbers.   \n","operationId":"UnlinkUserFromACompany","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","required":true,"type":"string","description":"User unique identifier (like 56d0277a0261b53142a5cab5)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/UnlinkUserFromACompanySuccess"},"examples":{"application/json":{"status":"User 590b29d522315ea8d106fb3a successfully unlinked from company 5901d451faae4928ef13bb78.","data":{"displayName":"Organisation Admin","companyName":"Default","loginEmail":"orgadmin1@acme.com","country":"FRA","companyId":"58ede1170f0f528f85faa9bc","jid_im":"c47c27bc90464918b82243f047ada08e@luverhae-all-in-one-dev-1.opentouch.cloud","jid_tel":"tel_c47c27bc90464918b82243f047ada08e@luverhae-all-in-one-dev-1.opentouch.cloud","jid_password":"f36a4b7c02424c9c92df0ccdf15ce140","createdByAdmin":{"userId":"58ede12b44b22d0c86ffb4fd","loginEmail":"superadmin@openrainbow.org"},"isTerminated":false,"terminatedDate":null,"lastExpiredTokenRenewedDate":null,"lastLoginFailureDate":null,"failedLoginAttempts":0,"loggedSince":"2017-05-04T13:19:24.836Z","lastLoginDate":"2017-05-04T13:19:24.836Z","firstLoginDate":"2017-05-04T13:19:24.836Z","createdBySelfRegister":false,"lastAvatarUpdateDate":null,"lastUpdateDate":"2017-05-04T13:49:44.664Z","initializationDate":"2017-05-04T13:17:09.467Z","isInitialized":true,"activationDate":"2017-05-04T13:17:09.465Z","creationDate":"2017-05-04T13:17:09.465Z","siteId":null,"organisationId":null,"visibleBy":[],"visibility":"public","profiles":[{"subscriptionId":"58ede1170f0f528f85faa9bd","offerId":"58ede0fd48ea010fe51810b9","offerName":"Essential","profileId":"58ede0fd48ea010fe51810b8","profileName":"Essential","assignationDate":"2017-05-04T13:49:44.843Z","status":"active","isDefault":true}],"accountType":"free","adminType":"undefined","roles":["user"],"isActive":true,"phoneNumbers":[],"emails":[{"email":"orgadmin1@acme.com","type":"work"}],"lastName":"Admin","firstName":"Organisation","id":"590b29d522315ea8d106fb3a"}}}},"400":{"description":"Bad request","examples":{"application/json":{"errorCode":400,"errorMsg":"Bad Request","errorDetails":[{"param":"userId","msg":"Invalid resource identifiers, expected UUID: identifier must be alpha-numeric and have a length of 24 chars","value":"1"}],"errorDetailsCode":400000}}},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"User with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"409":{"description":"Conflict","examples":{"application/json":{"errorCode":409,"errorMsg":"Conflict","errorDetails":"User 5912d2d756b8266139d0a14f (ter_1494406256897_user_test@test.com). Seen as terminated.","errorDetailsCode":409000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/users/{userId}/networks":{"post":{"tags":["Users Networks"],"summary":"Add users to user network","description":"This API can be used to add users to requested user networks.   \n  \nBETA: this API is currently in beta. Restriction: only 1 user can be provided in users array (others are ignored)   \n  \n`superadmin` can set user network from any users existing in Rainbow.   \n`bp_admin` or `bp_finance` can only set user network for users being in companies being End Customers of their BP company (i.e. all the companies having bpId equal to their companyId) and their own BP company.   \n`organization_admin` can only set user network for users being in companies under their organisation.   \n`company_admin` can only set user network for users being in their company.","operationId":"admin_users_PostUserNetworks","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","required":true,"type":"string","description":"User unique identifier (like 56c5c19f94141765119f896c)"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/admin_users_PostUserNetworks"}}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/admin_users_PostUserNetworksSuccess"},"examples":{"application/json":{"status":"success"}}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/users/{userId}/profiles/subscriptions/{subscriptionId}":{"delete":{"tags":["Users Profiles"],"summary":"Delete a user profile","description":"This API can be used to un-assign a company's subscription from user profiles.   \n  \nProfile linked to company's default subscription can't be removed.   \n  \n`superadmin` can remove a profile from any user existing in Rainbow.   \n`bp_admin` and `bp_finance` can remove a profile for users being in End Customer companies linked to their BP company and from users being in their own BP company (or organisation).   \n`organization_admin` can only remove a profile for users being in companies under their organisation.   \n`company_admin` can only remove a profile for users being in their company.   \n  \nExample: DELETE https://openrainbow.com/api/rainbow/admin/v1.0/users/56d0277a0261b53142a5cab5/profiles/subscriptions/5808afeb4372eb19547e90cf","operationId":"admin_users_DeleteUserProfiles","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","required":true,"type":"string","description":"User unique identifier (like 56d0277a0261b53142a5cab5)"},{"name":"subscriptionId","in":"path","required":true,"type":"string","description":"Company subscription unique identifier."}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/unknown":"<message type=\"management\" id=\"2c11e9f1-3e59-4c7d-b1b7-1d38d31ab458_0\" to=\"ae55432b2d064d38be333204591daca9@francky-all-in-one-dev-1.opentouch.cloud\" xmlns=\"jabber:client\">\n <userprofile action=\"deleted\" subscriptionId=\"59396b2918f2e75c2bd3bb5b\" offerReference=\"RB-Conference\" xmlns=\"jabber:iq:configuration\"/>\n</message>","application/json":{"data":[{"subscriptionId":"5808b655a55a36d354f75cbe","offerId":"58079ed2041fa586e92337cd","offerName":"Essential","offerReference":"RB-Essential","profileId":"580777f56fbd22a442d4fb57","profileName":"Essential","status":"active","isDefault":true,"isExclusive":false,"assignationDate":"2016-10-12T09:54:12.634Z"},{"subscriptionId":"5808afeb4372eb19547e90cf","offerId":"58072f646237427a3687dc90","offerName":"Enterprise","offerDescription":"Rainbow Enterprise offer","offerTechnicalDescription":"Enterprise offer for BP VAD","offerReference":"RB-Enterprise","profileId":"57cd90ddc04fd92e232ae258","profileName":"Enterprise","status":"active","isDefault":false,"businessModel":"nb_users","isExclusive":true,"assignationDate":"2016-10-24T14:11:50.641Z"},{"subscriptionId":"59396b2918f2e75c2bd3bb5b","offerId":"58ff3cdc5b9f3e48ad4fb906","offerName":"Conference","offerDescription":"Rainbow Conference offer","offerTechnicalDescription":"Conference offer for BP VAD","profileId":"58ff3cdb5b9f3e48ad4fb903","profileName":"Conference","status":"active","isDefault":false,"businessModel":"usage","isExclusive":false,"assignationDate":"2016-10-24T14:11:50.800Z","provisioningNeeded":[{"providerType":"PGI","provisioningOngoing":false,"provisioningStartDate":"2017-06-14T13:48:25.924Z"}]}]}}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Subscription with id 5808afeb4372eb19547e90cf does not exist","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}},"post":{"tags":["Users Profiles"],"summary":"Add a user profile","description":"This API can be used to assign a company's subscription to user profiles (user must be in the same company than the company which own the subscription).   \n  \nBy default, when users are created or moved to a company, user's company's subscription to the default offer (Essential) is automatically added to user's profiles (therefore user's profiles should never be empty)   \n  \n`superadmin` can add a profile from any user existing in Rainbow.   \n`bp_admin` and `bp_finance` can add a profile to users being in End Customer companies linked to their BP company and to users being in their own BP company (or organisation).   \n`organization_admin` can only add a profile to users being in companies under their organisation.   \n`company_admin` can only add a profile to users being in their company.   \n  \nProvided subscriptionId must be one of the subscriptions available in user's company's subscriptions list (it can be the company's subscription to the default offer (Essential)).   \nThe subscription must have the status `active` and not being synchronizing with Business Store / Zuora (`syncOngoing` equal to false), otherwise 403 errors are returned.   \nIf the subscription has a `maxNumberUsers` and the subscription is already assigned to this number of users, the assignation to the user is denied.   \nIf the provided subscriptionId is already assigned to user's profiles, a conflict error is returned.   \n  \nExample: POST https://openrainbow.com/api/rainbow/admin/v1.0/users/56d0277a0261b53142a5cab5/profiles/subscriptions/5808afeb4372eb19547e90cf","operationId":"admin_users_PostUserProfiles","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","required":true,"type":"string","description":"User unique identifier (like 56d0277a0261b53142a5cab5)"},{"name":"subscriptionId","in":"path","required":true,"type":"string","description":"Company subscription unique identifier."}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"$ref":"#/definitions/admin_users_PostUserProfilesSuccess"},"examples":{"application/json":{"data":{"subscriptionId":"59396b2918f2e75c2bd3bb5b","offerId":"58ff3cdc5b9f3e48ad4fb906","offerName":"Conference","offerDescription":"Rainbow Conference offer","offerTechnicalDescription":"Conference offer for BP VAD","offerReference":"RB-Conference","profileId":"58ff3cdb5b9f3e48ad4fb903","profileName":"Conference","status":"active","isDefault":false,"businessModel":"usage","isExclusive":false,"assignationDate":"2016-10-24T14:11:50.800Z","provisioningNeeded":[{"providerType":"PGI","provisioningOngoing":true,"provisioningStartDate":"2017-06-14T13:48:25.924Z"}]}},"application/unknown":"<message type=\"management\" id=\"2c11e9f1-3e59-4c7d-b1b7-1d38d31ab458_0\" to=\"ae55432b2d064d38be333204591daca9@francky-all-in-one-dev-1.opentouch.cloud\" xmlns=\"jabber:client\">\n <userprofile action=\"created\" subscriptionId=\"59396b2918f2e75c2bd3bb5b\" offerReference=\"RB-Conference\" xmlns=\"jabber:iq:configuration\"/>\n</message>"}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"Subscription with id 5808afeb4372eb19547e90cf does not exist","errorDetailsCode":404000}}},"409":{"description":"Conflict","examples":{"application/json":{"errorCode":409,"errorMsg":"Conflict","errorDetails":"'User 56d0277a0261b53142a5cab5 profile is already assigned to subscription 5808afeb4372eb19547e90cf","errorDetailsCode":409000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}},"/api/rainbow/admin/v1.0/users/{userId}/profiles":{"get":{"tags":["Users Profiles"],"summary":"Get a user profiles","description":"This API can be used to get a user's profiles.   \n  \n`superadmin` and `support` can get profiles from any existing user in Rainbow.   \n`bp_admin` and `bp_finance` can only retrieve profiles of users being in End Customer companies linked to their BP company.   \n`organization_admin` can only retrieve profiles of users being in companies under their organisation.   \n`company_admin` can only get profiles of users being in their company.   \n  \nExample: GET https://openrainbow.com/api/rainbow/admin/v1.0/users/56d0277a0261b53142a5cab5/profiles","operationId":"admin_users_GetUserProfiles","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"userId","in":"path","required":true,"type":"string","description":"User unique identifier (like 56d0277a0261b53142a5cab5)"}],"security":[{"Bearer":[]}],"x-permissions":[{"name":"bp_admin"},{"name":"bp_finance"},{"name":"organization_admin"},{"name":"company_admin"}],"responses":{"200":{"description":"successful operation","schema":{"type":"string"},"examples":{"application/json":{"data":[{"subscriptionId":"5808b655a55a36d354f75cbe","offerId":"58079ed2041fa586e92337cd","offerName":"Essential","offerReference":"RB-Essential","profileId":"580777f56fbd22a442d4fb57","profileName":"Essential","status":"active","isDefault":true,"isExclusive":false,"assignationDate":"2016-10-12T09:54:12.634Z"},{"subscriptionId":"5808afeb4372eb19547e90cf","offerId":"58072f646237427a3687dc90","offerName":"Enterprise","offerDescription":"Rainbow Enterprise offer","offerTechnicalDescription":"Enterprise offer for BP VAD","offerReference":"RB-Enterprise","profileId":"57cd90ddc04fd92e232ae258","profileName":"Enterprise","status":"active","isDefault":false,"businessModel":"nb_users","isExclusive":true,"assignationDate":"2016-10-24T14:11:50.641Z"},{"subscriptionId":"59396b2918f2e75c2bd3bb5b","offerId":"58ff3cdc5b9f3e48ad4fb906","offerName":"Conference","offerDescription":"Rainbow Conference offer","offerTechnicalDescription":"Conference offer for BP VAD","profileId":"58ff3cdb5b9f3e48ad4fb903","profileName":"Conference","status":"active","isDefault":false,"businessModel":"usage","isExclusive":false,"assignationDate":"2016-10-24T14:11:50.800Z","provisioningNeeded":[{"providerType":"PGI","provisioningOngoing":false,"provisioningStartDate":"2017-06-14T13:48:25.924Z"}]}]}}},"400":{"description":"Bad request"},"401":{"description":"Unauthorized","examples":{"application/json":{"errorCode":401,"errorMsg":"Unauthorized","errorDetails":{"errorMsg":"User user1@company.com has expired (timeToLive)","timeToLive":3600,"creationDate":"2017-09-05T13:12:51.302Z","expirationDate":"2017-09-05T14:12:51.302Z","currentDate":"2017-09-05T14:48:23.694Z"},"errorDetailsCode":401523}}},"403":{"description":"Forbidden","examples":{"application/json":{"errorCode":403,"errorMsg":"Forbidden","errorDetails":"Access denied: this API can only be called by user himself (tried to access resource with userId 56d6f05241255dd54b5b61b2, while id of logged in user is 56d6f05241255dd54b5b61b1)","errorDetailsCode":403100}}},"404":{"description":"Not found","examples":{"application/json":{"errorCode":404,"errorMsg":"Resource Not Found","errorDetails":"User with id 569ce8c8f9336c471b98eda1 does not exist.","errorDetailsCode":404000}}},"500":{"description":"Server error","examples":{"application/json":{"errorCode":500,"errorMsg":"Internal Server Error","errorDetails":""}}}}}}},"definitions":{"DeleteCompaniesSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Delete operation status message."}},"required":["status"]},"GetCompaniesIdSuccess":{"type":"object","properties":{"numberUsers":{"type":"number","description":"Number of Rainbow users being associated to the company"},"dataLocation":{"$ref":"#/definitions/dataLocation"},"id":{"type":"string","description":"Company unique identifier"},"creationDate":{"type":"string","description":"Company creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last company status update (Read only)","format":"date"},"lastAvatarUpdateDate":{"type":"string","description":"Date of last company avatar update (Read only)","format":"date"},"name":{"type":"string","description":"Company name"},"country":{"type":"string","description":"Company country (ISO 3166-1 alpha3 format)"},"street":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"city":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"state":{"type":"string","description":", \"ALASKA\", \"....\", \"NEW_YORK\", \"....\", \"WYOMING\"] When country is 'USA', define a state. Else it is not managed.","default":"ALABAMA"},"postalCode":{"type":"string","description":"Company postal code","minLength":0,"maxLength":64},"currency":{"type":"string","description":"Company currency, for payment of premium offers (ISO 4217 format)   \nFor now, only USD and EUR are supported"},"status":{"type":"string","description":"Company status","enum":["initializing","active","alerting","hold","terminated"]},"visibility":{"type":"string","description":"Company visibility (define if users being in this company can be searched by users being in other company)","enum":["public","private","organisation"]},"visibleBy":{"type":"array","description":"If visibility is private, list of companyIds for which visibility is allowed","items":{"type":"string"}},"adminEmail":{"type":"string","description":"Company contact person email"},"supportEmail":{"type":"string","description":"Company support email"},"companyContactId":{"type":"string","description":"User Id of a Rainbow user which is the contact for this company"},"userSelfRegisterEnabled":{"type":"boolean","description":"Allow users with email domain matching 'userSelfRegisterAllowedDomains' to join the company by self-register process"},"userSelfRegisterAllowedDomains":{"type":"array","description":"Allow users with email domain matching one of the values of this array to join the company by self-register process (if userSelfRegisterEnabled is true)","items":{"type":"string"}},"slogan":{"type":"string","description":"A free string corresponding to the slogan of the company (255 char length)"},"description":{"type":"string","description":"A free string that describes the company (2000 char length)"},"size":{"type":"string","description":" An overview of the number of employees","enum":["self-employed","1-10 employees","11-50 employees","51-200 employees","201-500 employees","501-1000 employees","1001-5000 employees","5001-10,000 employees","10,001+ employees"]},"economicActivityClassification":{"type":"string","description":"* `A`: AGRICULTURE, FORESTRY AND FISHING\n* `B`: MINING AND QUARRYING\n* `C`: MANUFACTURING\n* `D`: ELECTRICITY, GAS, STEAM AND AIR CONDITIONING SUPPLY\n* `E`: WATER SUPPLY; SEWERAGE, WASTE MANAGEMENT AND REMEDIATION ACTIVITIES\n* `F`: CONSTRUCTION\n* `G`: WHOLESALE AND RETAIL TRADE; REPAIR OF MOTOR VEHICLES AND MOTORCYCLES\n* `H`: TRANSPORTATION AND STORAGE\n* `I`: ACCOMMODATION AND FOOD SERVICE ACTIVITIES\n* `J`: INFORMATION AND COMMUNICATION\n* `K`: FINANCIAL AND INSURANCE ACTIVITIES\n* `L`: REAL ESTATE ACTIVITIES\n* `M`: PROFESSIONAL, SCIENTIFIC AND TECHNICAL ACTIVITIES\n* `N`: ADMINISTRATIVE AND SUPPORT SERVICE ACTIVITIES\n* `O`: PUBLIC ADMINISTRATION AND DEFENCE; COMPULSORY SOCIAL SECURITY\n* `P`: EDUCATION\n* `Q`: HUMAN HEALTH AND SOCIAL WORK ACTIVITIES\n* `R`: ARTS, ENTERTAINMENT AND RECREATION\n* `S`: OTHER SERVICE ACTIVITIES\n* `T`: ACTIVITIES OF HOUSEHOLDS AS EMPLOYERS; UNDIFFERENTIATED GOODS- AND SERVICES-PRODUCING ACTIVITIES OF HOUSEHOLDS FOR OWN USE\n* `U`: ACTIVITIES OF EXTRATERRITORIAL ORGANISATIONS AND BODIES\n","enum":["NONE","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U"]},"giphyEnabled":{"type":"boolean","description":"Whether or not giphy feature is enabled for users belonging to this company (possibility to use animated gifs in conversations)"},"website":{"type":"string","description":"Company website URL"},"organisationId":{"type":"string","description":"Optional identifier to indicate the company belongs to an organisation","default":"null"},"catalogId":{"type":"string","description":"Id of the catalog of Rainbow offers to which the company is linked. The catalog corresponds to the list of offers the company can subscribe."},"bpId":{"type":"string","description":"Optional identifier which links the company to the corresponding Business partner company","default":"null"},"adminHasRightToUpdateSubscriptions":{"type":"boolean","description":"In the case the company is linked to a Business Partner company, indicates if the `bp_admin` allows the `company_admin` to update the subscriptions of his company (if enable, allowed operations depend of the value of `adminAllowedUpdateSubscriptionsOps`).   \nCan only be set by `superadmin` of `bp_admin` of the related company."},"adminAllowedUpdateSubscriptionsOps":{"type":"string","description":"In the case the company is linked to a Business Partner company and `adminHasRightToUpdateSubscriptions` is enabled, indicates the update operations for which the `bp_admin` allows the `company_admin` to perform on the subscriptions of his company.   \nCan only be set by `superadmin` of `bp_admin` of the related company.   \nPossible values: \n\n* `all`: company_admin is allowed to perform all update operations on the subscriptions of his company\n* `increase_only`: company_admin is only allowed to increase `maxNumberUsers` on the subscriptions of his company (decrease is forbidden)\n\n","enum":["all","increase_only"]},"isBP":{"type":"boolean","description":"Indicates if the company is a Business partner company","default":"false"},"bpType":{"type":"string","description":"Indicates BP Company type \n\n* `IR`: Indirect Reseller,\n* `VAD`: Value Added Distributor,\n* `DR`: Direct Reseller.\n\n  \nOnly visible by `superadmin` and `support`.","enum":["IR","VAD","DR"]},"bpBusinessModel":{"type":"string","description":"Indicates BP business model   \nOnly visible by `superadmin` and `support`."},"bpApplicantNumber":{"type":"string","description":"Reference of the Business Partner in ALE Finance tools (SAP)   \nOnly visible by `superadmin` and `support`."},"bpCRDid":{"type":"string","description":"Reference of the Business Partner in CDR   \nOnly visible by `superadmin` and `support`."},"bpHasRightToSell":{"type":"boolean","description":"Indicates if the Business has the right to sell   \nOnly visible by `superadmin` and `support`."},"bpHasRightToConnect":{"type":"boolean","description":"When True, the BP can connect CPE equipment of managed companies. So when False, the \"equipment\" tab should be removed from the admin GUI   \nOnly visible by `superadmin` and `support`."},"bpIsContractAccepted":{"type":"boolean","description":"Indicates if the Business has accepted the contract and can sell Rainbow offers   \nOnly visible by `superadmin` and `support`."},"bpContractAcceptationInfo":{"$ref":"#/definitions/bpContractAcceptationInfo"},"offerType":{"type":"string","description":"Allowed company offer types","enum":["freemium","premium"]},"externalReference":{"type":"string","description":"Free field that BP can use to link their customers to their IS/IT tools   \nOnly applicable by `superadmin` or by `bp_admin` on one of his customer companies.","minLength":0,"maxLength":64},"avatarShape":{"type":"string","description":"Company's avatar customization","enum":["square","circle"]},"customData":{"$ref":"#/definitions/customData"}},"required":["numberUsers","dataLocation","id","creationDate","statusUpdatedDate","lastAvatarUpdateDate","name","status","visibility","visibleBy","userSelfRegisterEnabled","userSelfRegisterAllowedDomains","size","organisationId","catalogId","bpId","isBP","offerType"]},"dataLocation":{"type":"object","properties":{"name":{"type":"string","description":"Name of the zone where the company data are stored"},"location":{"type":"string","description":"Location of the zone where the company data are stored. Should usually be the country name (English) where the zone is located."},"country":{"type":"string","description":"Country (ISO 3166-1 alpha3 format) of the zone where the company data are stored"}},"required":["name","location","country"]},"bpContractAcceptationInfo":{"type":"object","properties":{"acceptationDate":{"type":"string","description":"Date of contract acceptation by the BP admin","format":"date"},"bpAdminId":{"type":"string","description":"User Id of the BP admin who accepted the contract"},"bpAdminLoginEmail":{"type":"string","description":"User loginEmail of the BP admin who accepted the contract"}},"required":["acceptationDate","bpAdminId","bpAdminLoginEmail"]},"customData":{"type":"object","properties":{"key1":{"type":"string","description":"Company's custom data key1."},"key2":{"type":"string","description":"Company's custom data key2."}},"required":["key1","key2"]},"PutCompanies":{"type":"object","properties":{"catalogId":{"type":"string","description":"Id of the catalog of Rainbow offers to which the company is linked. The catalog corresponds to the list of offers the company can subscribe.   \n  \nOnly `superadmin` can change the catalogId of a company.   \nIf the catalogId of a BP company is changed, the new catalogId of the BP is also set on the companies for which this BP company is the BP (when the company is a BP VAD, the catalog of the EC companies under the BP IR companies is also updated)."},"name":{"type":"string","description":"Company name","minLength":1,"maxLength":255},"country":{"type":"string","description":"Company country (ISO 3166-1 alpha3 format)","maxLength":3,"minLength":3},"street":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"city":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"state":{"type":"string","description":"\"ALABAMA\", \"ALASKA\", \"....\", \"NEW_YORK\", \"....\", \"WYOMING\"] When country is 'USA', define a state. Else it is not managed.","default":"null,"},"postalCode":{"type":"string","description":"Company postal code","minLength":0,"maxLength":64},"currency":{"type":"string","description":"Company currency, for payment of premium offers (ISO 4217 format)   \nFor now, only USD and EUR are supported   \nOnly settable by `superadmin`","maxLength":3,"minLength":3},"status":{"type":"string","description":"Company status","enum":["initializing","active","alerting","hold","terminated"],"default":"active"},"visibility":{"type":"string","description":"Company visibility (define if users being in this company can be searched by users being in other company).  \nUnder the same organisation, a company can choose the visibility=organisation. That means users belonging to this company are visible for users of foreign companies having the same visibility inside the same organisation.  \nThe visibility=organisation is same as visibility=private outside the organisation. That is to say users can't be searched.","enum":["public","private","organisation"],"default":"private"},"visibleBy":{"type":"array","description":"If visibility is private or organisation, list of company `ids` for which visibility is allowed","items":{"type":"string"}},"adminEmail":{"type":"string","description":"Company contact person email","pattern":"/^[a-zA-Z0-9_\\+-]+(\\.[a-zA-Z0-9_\\+-]+)*@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.([a-zA-Z]{2,4})$/","minLength":3,"maxLength":255},"supportEmail":{"type":"string","description":"Company support email","pattern":"/^[a-zA-Z0-9_\\+-]+(\\.[a-zA-Z0-9_\\+-]+)*@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.([a-zA-Z]{2,4})$/","minLength":3,"maxLength":255},"companyContactId":{"type":"string","description":"User Id of a Rainbow user which is the contact for this company   \nThis field can only be set for `premium` companies (`offerType`=`premium`)."},"userSelfRegisterEnabled":{"type":"boolean","description":"Allow users with email domain matching 'userSelfRegisterAllowedDomains' to join the company by self-register process","enum":["true"]},"userSelfRegisterAllowedDomains":{"type":"array","description":"Allow users with email domain matching one of the values of this array to join the company by self-register process (if userSelfRegisterEnabled is true)","items":{"type":"string"}},"slogan":{"type":"string","description":"A free string corresponding to the slogan of the company   \nThis field can only be set for `premium` companies (`offerType`=`premium`).","minLength":0,"maxLength":255},"description":{"type":"string","description":"A free string that describes the company (2000 char length)   \nThis field can only be set for `premium` companies (`offerType`=`premium`).","minLength":0,"maxLength":2000},"size":{"type":"string","description":" An overview of the number of employees   \nThis field can only be set for `premium` companies (`offerType`=`premium`).","enum":["self-employed","1-10 employees","11-50 employees","51-200 employees","201-500 employees","501-1000 employees","1001-5000 employees","5001-10,000 employees","10,001+ employees"],"default":"self-employed"},"economicActivityClassification":{"type":"string","description":"  \nThis field can only be set for `premium` companies (`offerType`=`premium`). \n\n* `A`: AGRICULTURE, FORESTRY AND FISHING\n* `B`: MINING AND QUARRYING\n* `C`: MANUFACTURING\n* `D`: ELECTRICITY, GAS, STEAM AND AIR CONDITIONING SUPPLY\n* `E`: WATER SUPPLY; SEWERAGE, WASTE MANAGEMENT AND REMEDIATION ACTIVITIES\n* `F`: CONSTRUCTION\n* `G`: WHOLESALE AND RETAIL TRADE; REPAIR OF MOTOR VEHICLES AND MOTORCYCLES\n* `H`: TRANSPORTATION AND STORAGE\n* `I`: ACCOMMODATION AND FOOD SERVICE ACTIVITIES\n* `J`: INFORMATION AND COMMUNICATION\n* `K`: FINANCIAL AND INSURANCE ACTIVITIES\n* `L`: REAL ESTATE ACTIVITIES\n* `M`: PROFESSIONAL, SCIENTIFIC AND TECHNICAL ACTIVITIES\n* `N`: ADMINISTRATIVE AND SUPPORT SERVICE ACTIVITIES\n* `O`: PUBLIC ADMINISTRATION AND DEFENCE; COMPULSORY SOCIAL SECURITY\n* `P`: EDUCATION\n* `Q`: HUMAN HEALTH AND SOCIAL WORK ACTIVITIES\n* `R`: ARTS, ENTERTAINMENT AND RECREATION\n* `S`: OTHER SERVICE ACTIVITIES\n* `T`: ACTIVITIES OF HOUSEHOLDS AS EMPLOYERS; UNDIFFERENTIATED GOODS- AND SERVICES-PRODUCING ACTIVITIES OF HOUSEHOLDS FOR OWN USE\n* `U`: ACTIVITIES OF EXTRATERRITORIAL ORGANISATIONS AND BODIES\n","enum":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U"]},"website":{"type":"string","description":"Company website url   \nThis field can only be set for `premium` companies (`offerType`=`premium`).","minLength":0,"maxLength":2000},"giphyEnabled":{"type":"boolean","description":"Whether or not giphy feature is enabled for users belonging to this company (possibility to use animated gifs in conversations)"},"customData":{"$ref":"#/definitions/customData"},"bpId":{"type":"string","description":"Link the company to the corresponding Business partner company.   \n`bpId` must correspond to a valid company having `isBP` equal to true.   \nOnly directly settable by `superadmin`.   \nIf the company is **created** by a `bp_admin` or a `bp_finance`, `bpId` is automatically set to BP company `id`.   \nFor existing companies, `bp_admin` must use invitation mechanism to a company admin in order to request a link of this company company to his BP company."},"adminHasRightToUpdateSubscriptions":{"type":"boolean","description":"In the case the company is linked to a Business Partner company, indicates if the `bp_finance` allows the `company_admin` to update the subscriptions of his company (if enable, allowed operations depend of the value of `adminAllowedUpdateSubscriptionsOps`).   \nCan only be set by `superadmin` or `bp_finance` of the related company."},"adminAllowedUpdateSubscriptionsOps":{"type":"string","description":"In the case the company is linked to a Business Partner company and `adminHasRightToUpdateSubscriptions` is enabled, indicates the update operations for which the `bp_finance` allows the `company_admin` to perform on the subscriptions of his company.   \nCan only be set by `superadmin` or `bp_finance` of the related company.   \nPossible values: \n\n* `all`: company_admin is allowed to perform all update operations on the subscriptions of his company\n* `increase_only`: company_admin is only allowed to increase `maxNumberUsers` on the subscriptions of his company (decrease is forbidden)\n\n","enum":["all","increase_only"]},"isBP":{"type":"boolean","description":"Indicates if the company is a Business partner company   \nOnly settable by `superadmin`"},"bpType":{"type":"string","description":"Indicates BP Company type \n\n* `IR`: Indirect Reseller,\n* `VAD`: Value Added Distributor,\n* `DR`: Direct Reseller.\n\n  \nOnly applicable if `isBP` is true.   \nOnly settable by `superadmin`.","enum":["IR","VAD","DR"]},"bpBusinessModel":{"type":"string","description":"Indicates BP business model   \nOnly applicable if `isBP` is true.   \nOnly settable by `superadmin`.","enum":["referral","resell"]},"bpApplicantNumber":{"type":"string","description":"Reference of the Business Partner in ALE Finance tools (SAP)   \nOnly applicable if `isBP` is true and `bpType` is DR or VAD.   \nOnly settable by `superadmin`.","minLength":0,"maxLength":255},"bpCRDid":{"type":"string","description":"Reference of the Business Partner in CDR   \nOnly applicable if `isBP` is true and `bpType` is DR or VAD.   \nIf `bpCRDid` is not defined, BP won't be able to sell (i.e. `bpHasRightToSell` can't be set to true)   \nOnly settable by `superadmin`.","minLength":0,"maxLength":255},"bpHasRightToSell":{"type":"boolean","description":"Indicates if the Business has the right to sell   \nOnly applicable if `isBP` is true and `bpType` is DR or VAD.   \nOnly applicable if `bpCRDid` is defined.   \nOnly settable by `superadmin`."},"bpHasRightToConnect":{"type":"boolean","description":"When True [Default], the BP can connect CPE equipment of managed companies. So when False, the \"equipment\" tab should be removed from the admin GUI   \nOnly applicable if `isBP` is true.   \nOnly settable by `superadmin`."},"bpIsContractAccepted":{"type":"boolean","description":"Indicates if the Business has accepted the contract and can sell Rainbow offers   \nShould be set by `bp_admin` or `bp_finance`.   \nOnly applicable if `isBP` is true.","enum":["false"],"default":"false"},"externalReference":{"type":"string","description":"Free field that BP can use to link their Indirect Resellers / End Customers to their IS/IT tools   \nOnly applicable by `superadmin` or by `bp_admin` or `bp_finance` on one of his Indirect Resellers / End Customers companies.","minLength":0,"maxLength":64},"externalReference2":{"type":"string","description":"Extra Free field that BP can use to link their Indirect Resellers / End Customers to their IS/IT tools   \nOnly applicable by `superadmin` or by `bp_admin` or `bp_finance` on one of his Indirect Resellers / End Customers companies.","minLength":0,"maxLength":64},"avatarShape":{"type":"string","description":"Company's avatar customization","enum":["square","circle"]},"isCentrex":{"type":"boolean","description":"Indicates if the company is one tenant of a multi-tenant call server (OXE - OTEC-S) (default: false)"},"companyCallNumber":{"type":"string","description":"If isCentrex = true, this is the company access number [multi-company call + company Area, ex: 8 210, 8 211]"}},"required":["name"]},"PutCompaniesSuccess":{"type":"object","properties":{"id":{"type":"string","description":"Company unique identifier"},"creationDate":{"type":"string","description":"Company creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last company status update (Read only)","format":"date"},"lastAvatarUpdateDate":{"type":"string","description":"Date of last company avatar update (Read only)","format":"date"},"name":{"type":"string","description":"Company name"},"country":{"type":"string","description":"Company country (ISO 3166-1 alpha3 format)"},"street":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"city":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"state":{"type":"string","description":", \"ALASKA\", \"....\", \"NEW_YORK\", \"....\", \"WYOMING\"] When country is 'USA', define a state. Else it is not managed.","default":"ALABAMA"},"postalCode":{"type":"string","description":"Company postal code","minLength":0,"maxLength":64},"currency":{"type":"string","description":"Company currency, for payment of premium offers (ISO 4217 format)   \nFor now, only USD and EUR are supported"},"status":{"type":"string","description":"Company status","enum":["initializing","active","alerting","hold","terminated"]},"visibility":{"type":"string","description":"Company visibility (define if users being in this company can be searched by users being in other company)","enum":["public","private","organisation"]},"visibleBy":{"type":"array","description":"If visibility is private, list of companyIds for which visibility is allowed","items":{"type":"string"}},"adminEmail":{"type":"string","description":"Company contact person email"},"supportEmail":{"type":"string","description":"Company support email"},"companyContactId":{"type":"string","description":"User Id of a Rainbow user which is the contact for this company"},"userSelfRegisterEnabled":{"type":"boolean","description":"Allow users with email domain matching 'userSelfRegisterAllowedDomains' to join the company by self-register process"},"userSelfRegisterAllowedDomains":{"type":"array","description":"Allow users with email domain matching one of the values of this array to join the company by self-register process (if userSelfRegisterEnabled is true)","items":{"type":"string"}},"slogan":{"type":"string","description":"A free string corresponding to the slogan of the company (255 char length)"},"description":{"type":"string","description":"A free string that describes the company (2000 char length)"},"size":{"type":"string","description":" An overview of the number of employees","enum":["self-employed","1-10 employees","11-50 employees","51-200 employees","201-500 employees","501-1000 employees","1001-5000 employees","5001-10,000 employees","10,001+ employees"]},"economicActivityClassification":{"type":"string","description":"* `A`: AGRICULTURE, FORESTRY AND FISHING\n* `B`: MINING AND QUARRYING\n* `C`: MANUFACTURING\n* `D`: ELECTRICITY, GAS, STEAM AND AIR CONDITIONING SUPPLY\n* `E`: WATER SUPPLY; SEWERAGE, WASTE MANAGEMENT AND REMEDIATION ACTIVITIES\n* `F`: CONSTRUCTION\n* `G`: WHOLESALE AND RETAIL TRADE; REPAIR OF MOTOR VEHICLES AND MOTORCYCLES\n* `H`: TRANSPORTATION AND STORAGE\n* `I`: ACCOMMODATION AND FOOD SERVICE ACTIVITIES\n* `J`: INFORMATION AND COMMUNICATION\n* `K`: FINANCIAL AND INSURANCE ACTIVITIES\n* `L`: REAL ESTATE ACTIVITIES\n* `M`: PROFESSIONAL, SCIENTIFIC AND TECHNICAL ACTIVITIES\n* `N`: ADMINISTRATIVE AND SUPPORT SERVICE ACTIVITIES\n* `O`: PUBLIC ADMINISTRATION AND DEFENCE; COMPULSORY SOCIAL SECURITY\n* `P`: EDUCATION\n* `Q`: HUMAN HEALTH AND SOCIAL WORK ACTIVITIES\n* `R`: ARTS, ENTERTAINMENT AND RECREATION\n* `S`: OTHER SERVICE ACTIVITIES\n* `T`: ACTIVITIES OF HOUSEHOLDS AS EMPLOYERS; UNDIFFERENTIATED GOODS- AND SERVICES-PRODUCING ACTIVITIES OF HOUSEHOLDS FOR OWN USE\n* `U`: ACTIVITIES OF EXTRATERRITORIAL ORGANISATIONS AND BODIES\n","enum":["NONE","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U"]},"giphyEnabled":{"type":"boolean","description":"Whether or not giphy feature is enabled for users belonging to this company (possibility to use animated gifs in conversations)"},"website":{"type":"string","description":"Company website URL"},"organisationId":{"type":"string","description":"Optional identifier to indicate the company belongs to an organisation","default":"null"},"catalogId":{"type":"string","description":"Id of the catalog of Rainbow offers to which the company is linked. The catalog corresponds to the list of offers the company can subscribe."},"bpId":{"type":"string","description":"Optional identifier which links the company to the corresponding Business partner company","default":"null"},"adminHasRightToUpdateSubscriptions":{"type":"boolean","description":"In the case the company is linked to a Business Partner company, indicates if the `bp_admin` allows the `company_admin` to update the subscriptions of his company (if enable, allowed operations depend of the value of `adminAllowedUpdateSubscriptionsOps`).   \nCan only be set by `superadmin` of `bp_admin` of the related company."},"adminAllowedUpdateSubscriptionsOps":{"type":"string","description":"In the case the company is linked to a Business Partner company and `adminHasRightToUpdateSubscriptions` is enabled, indicates the update operations for which the `bp_admin` allows the `company_admin` to perform on the subscriptions of his company.   \nCan only be set by `superadmin` of `bp_admin` of the related company.   \nPossible values: \n\n* `all`: company_admin is allowed to perform all update operations on the subscriptions of his company\n* `increase_only`: company_admin is only allowed to increase `maxNumberUsers` on the subscriptions of his company (decrease is forbidden)\n\n","enum":["all","increase_only"]},"isBP":{"type":"boolean","description":"Indicates if the company is a Business partner company","default":"false"},"bpType":{"type":"string","description":"Indicates BP Company type \n\n* `IR`: Indirect Reseller,\n* `VAD`: Value Added Distributor,\n* `DR`: Direct Reseller.\n\n  \nOnly visible by `superadmin` and `support`.","enum":["IR","VAD","DR"]},"bpBusinessModel":{"type":"string","description":"Indicates BP business model   \nOnly visible by `superadmin` and `support`."},"bpApplicantNumber":{"type":"string","description":"Reference of the Business Partner in ALE Finance tools (SAP)   \nOnly visible by `superadmin` and `support`."},"bpCRDid":{"type":"string","description":"Reference of the Business Partner in CDR   \nOnly visible by `superadmin` and `support`."},"bpHasRightToSell":{"type":"boolean","description":"Indicates if the Business has the right to sell   \nOnly visible by `superadmin` and `support`."},"bpHasRightToConnect":{"type":"boolean","description":"When True, the BP can connect CPE equipment of managed companies. So when False, the \"equipment\" tab should be removed from the admin GUI   \nOnly visible by `superadmin` and `support`."},"bpIsContractAccepted":{"type":"boolean","description":"Indicates if the Business has accepted the contract and can sell Rainbow offers   \nOnly visible by `superadmin` and `support`."},"bpContractAcceptationInfo":{"$ref":"#/definitions/bpContractAcceptationInfo"},"offerType":{"type":"string","description":"Allowed company offer types","enum":["freemium","premium"]},"externalReference":{"type":"string","description":"Free field that BP can use to link their customers to their IS/IT tools   \nOnly applicable by `superadmin` or by `bp_admin` on one of his customer companies.","minLength":0,"maxLength":64},"avatarShape":{"type":"string","description":"Company's avatar customization","enum":["square","circle"]},"customData":{"$ref":"#/definitions/customData"}},"required":["id","creationDate","statusUpdatedDate","lastAvatarUpdateDate","name","status","visibility","visibleBy","userSelfRegisterEnabled","userSelfRegisterAllowedDomains","size","organisationId","catalogId","bpId","isBP","offerType"]},"GetCompaniesSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Company name"},"id":{"type":"string","description":"Company unique identifier"}},"required":["name","id"]},"PostCompanies":{"type":"object","properties":{"name":{"type":"string","description":"Company name","minLength":1,"maxLength":255},"country":{"type":"string","description":"Company country (ISO 3166-1 alpha3 format)","maxLength":3,"minLength":3},"street":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"city":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"state":{"type":"string","description":"\"ALABAMA\", \"ALASKA\", \"....\", \"NEW_YORK\", \"....\", \"WYOMING\"] When country is 'USA', define a state. Else it is not managed.","default":"null,"},"postalCode":{"type":"string","description":"Company postal code","minLength":0,"maxLength":64},"currency":{"type":"string","description":"Company currency, for payment of premium offers (ISO 4217 format)   \nFor now, only USD and EUR are supported   \nOnly settable by `superadmin`","maxLength":3,"minLength":3},"status":{"type":"string","description":"Company status","enum":["initializing","active","alerting","hold","terminated"],"default":"active"},"visibility":{"type":"string","description":"Company visibility (define if users being in this company can be searched by users being in other company).  \nUnder the same organisation, a company can choose the visibility=organisation. That means users belonging to this company are visible for users of foreign companies having the same visibility inside the same organisation.  \nThe visibility=organisation is same as visibility=private outside the organisation. That is to say users can't be searched.","enum":["public","private","organisation"],"default":"private"},"visibleBy":{"type":"array","description":"If visibility is private or organisation, list of company `ids` for which visibility is allowed","items":{"type":"string"}},"adminEmail":{"type":"string","description":"Company contact person email","pattern":"/^[a-zA-Z0-9_\\+-]+(\\.[a-zA-Z0-9_\\+-]+)*@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.([a-zA-Z]{2,4})$/","minLength":3,"maxLength":255},"supportEmail":{"type":"string","description":"Company support email","pattern":"/^[a-zA-Z0-9_\\+-]+(\\.[a-zA-Z0-9_\\+-]+)*@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*\\.([a-zA-Z]{2,4})$/","minLength":3,"maxLength":255},"companyContactId":{"type":"string","description":"User Id of a Rainbow user which is the contact for this company   \nThis field can only be set for `premium` companies (`offerType`=`premium`)."},"userSelfRegisterEnabled":{"type":"boolean","description":"Allow users with email domain matching 'userSelfRegisterAllowedDomains' to join the company by self-register process","enum":["true"]},"userSelfRegisterAllowedDomains":{"type":"array","description":"Allow users with email domain matching one of the values of this array to join the company by self-register process (if userSelfRegisterEnabled is true)","items":{"type":"string"}},"slogan":{"type":"string","description":"A free string corresponding to the slogan of the company   \nThis field can only be set for `premium` companies (`offerType`=`premium`).","minLength":0,"maxLength":255},"description":{"type":"string","description":"A free string that describes the company (2000 char length)   \nThis field can only be set for `premium` companies (`offerType`=`premium`).","minLength":0,"maxLength":2000},"size":{"type":"string","description":" An overview of the number of employees   \nThis field can only be set for `premium` companies (`offerType`=`premium`).","enum":["self-employed","1-10 employees","11-50 employees","51-200 employees","201-500 employees","501-1000 employees","1001-5000 employees","5001-10,000 employees","10,001+ employees"],"default":"self-employed"},"economicActivityClassification":{"type":"string","description":"  \nThis field can only be set for `premium` companies (`offerType`=`premium`). \n\n* `A`: AGRICULTURE, FORESTRY AND FISHING\n* `B`: MINING AND QUARRYING\n* `C`: MANUFACTURING\n* `D`: ELECTRICITY, GAS, STEAM AND AIR CONDITIONING SUPPLY\n* `E`: WATER SUPPLY; SEWERAGE, WASTE MANAGEMENT AND REMEDIATION ACTIVITIES\n* `F`: CONSTRUCTION\n* `G`: WHOLESALE AND RETAIL TRADE; REPAIR OF MOTOR VEHICLES AND MOTORCYCLES\n* `H`: TRANSPORTATION AND STORAGE\n* `I`: ACCOMMODATION AND FOOD SERVICE ACTIVITIES\n* `J`: INFORMATION AND COMMUNICATION\n* `K`: FINANCIAL AND INSURANCE ACTIVITIES\n* `L`: REAL ESTATE ACTIVITIES\n* `M`: PROFESSIONAL, SCIENTIFIC AND TECHNICAL ACTIVITIES\n* `N`: ADMINISTRATIVE AND SUPPORT SERVICE ACTIVITIES\n* `O`: PUBLIC ADMINISTRATION AND DEFENCE; COMPULSORY SOCIAL SECURITY\n* `P`: EDUCATION\n* `Q`: HUMAN HEALTH AND SOCIAL WORK ACTIVITIES\n* `R`: ARTS, ENTERTAINMENT AND RECREATION\n* `S`: OTHER SERVICE ACTIVITIES\n* `T`: ACTIVITIES OF HOUSEHOLDS AS EMPLOYERS; UNDIFFERENTIATED GOODS- AND SERVICES-PRODUCING ACTIVITIES OF HOUSEHOLDS FOR OWN USE\n* `U`: ACTIVITIES OF EXTRATERRITORIAL ORGANISATIONS AND BODIES\n","enum":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U"]},"website":{"type":"string","description":"Company website url   \nThis field can only be set for `premium` companies (`offerType`=`premium`).","minLength":0,"maxLength":2000},"giphyEnabled":{"type":"boolean","description":"Whether or not giphy feature is enabled for users belonging to this company (possibility to use animated gifs in conversations)"},"catalogId":{"type":"string","description":"Id of the catalog of Rainbow offers to which the company is linked. The catalog corresponds to the list of offers the company can subscribe.   \nWhen a new company is created, if no catalogId is specified the company is automatically linked to the default catalog.   \nWhen a `bp_admin>` or `bp_finance>` creates a company, catalogId of this new company is automatically set to BP company's catalogId.   \nWhen an `organization_admin>` creates a company, catalogId of this new company is automatically set to organization_admin's company's catalogId.   \n  \nOnly `superadmin` can set a different catalogId to a company."},"customData":{"$ref":"#/definitions/customData"},"bpId":{"type":"string","description":"Link the company to the corresponding Business partner company.   \n`bpId` must correspond to a valid company having `isBP` equal to true.   \nOnly directly settable by `superadmin`.   \nIf the company is **created** by a `bp_admin` or a `bp_finance`, `bpId` is automatically set to BP company `id`.   \nFor existing companies, `bp_admin` must use invitation mechanism to a company admin in order to request a link of this company company to his BP company."},"adminHasRightToUpdateSubscriptions":{"type":"boolean","description":"In the case the company is linked to a Business Partner company, indicates if the `bp_finance` allows the `company_admin` to update the subscriptions of his company (if enable, allowed operations depend of the value of `adminAllowedUpdateSubscriptionsOps`).   \nCan only be set by `superadmin` or `bp_finance` of the related company."},"adminAllowedUpdateSubscriptionsOps":{"type":"string","description":"In the case the company is linked to a Business Partner company and `adminHasRightToUpdateSubscriptions` is enabled, indicates the update operations for which the `bp_finance` allows the `company_admin` to perform on the subscriptions of his company.   \nCan only be set by `superadmin` or `bp_finance` of the related company.   \nPossible values: \n\n* `all`: company_admin is allowed to perform all update operations on the subscriptions of his company\n* `increase_only`: company_admin is only allowed to increase `maxNumberUsers` on the subscriptions of his company (decrease is forbidden)\n\n","enum":["all","increase_only"]},"isBP":{"type":"boolean","description":"Indicates if the company is a Business partner company   \nOnly settable by `superadmin`"},"bpType":{"type":"string","description":"Indicates BP Company type \n\n* `IR`: Indirect Reseller,\n* `VAD`: Value Added Distributor,\n* `DR`: Direct Reseller.\n\n  \nOnly applicable if `isBP` is true.   \nOnly settable by `superadmin`.","enum":["IR","VAD","DR"]},"bpBusinessModel":{"type":"string","description":"Indicates BP business model   \nOnly applicable if `isBP` is true.   \nOnly settable by `superadmin`.","enum":["referral","resell"]},"bpApplicantNumber":{"type":"string","description":"Reference of the Business Partner in ALE Finance tools (SAP)   \nOnly applicable if `isBP` is true and `bpType` is DR or VAD.   \nOnly settable by `superadmin`.","minLength":0,"maxLength":255},"bpCRDid":{"type":"string","description":"Reference of the Business Partner in CDR   \nOnly applicable if `isBP` is true and `bpType` is DR or VAD.   \nIf `bpCRDid` is not defined, BP won't be able to sell (i.e. `bpHasRightToSell` can't be set to true)   \nOnly settable by `superadmin`.","minLength":0,"maxLength":255},"bpHasRightToSell":{"type":"boolean","description":"Indicates if the Business has the right to sell   \nOnly applicable if `isBP` is true and `bpType` is DR or VAD.   \nOnly applicable if `bpCRDid` is defined.   \nOnly settable by `superadmin`."},"bpHasRightToConnect":{"type":"boolean","description":"When True [Default], the BP can connect CPE equipment of managed companies. So when False, the \"equipment\" tab should be removed from the admin GUI   \nOnly applicable if `isBP` is true.   \nOnly settable by `superadmin`."},"bpIsContractAccepted":{"type":"boolean","description":"Indicates if the Business has accepted the contract and can sell Rainbow offers   \nShould be set by `bp_admin` or `bp_finance`.   \nOnly applicable if `isBP` is true.","enum":["false"],"default":"false"},"externalReference":{"type":"string","description":"Free field that BP can use to link their Indirect Resellers / End Customers to their IS/IT tools   \nOnly applicable by `superadmin` or by `bp_admin` or `bp_finance` on one of his Indirect Resellers / End Customers companies.","minLength":0,"maxLength":64},"externalReference2":{"type":"string","description":"Extra Free field that BP can use to link their Indirect Resellers / End Customers to their IS/IT tools   \nOnly applicable by `superadmin` or by `bp_admin` or `bp_finance` on one of his Indirect Resellers / End Customers companies.","minLength":0,"maxLength":64},"avatarShape":{"type":"string","description":"Company's avatar customization","enum":["square","circle"]},"isCentrex":{"type":"boolean","description":"Indicates if the company is one tenant of a multi-tenant call server (OXE - OTEC-S) (default: false)"},"companyCallNumber":{"type":"string","description":"If isCentrex = true, this is the company access number [multi-company call + company Area, ex: 8 210, 8 211]"}},"required":["name"]},"PostCompaniesSuccess":{"type":"object","properties":{"id":{"type":"string","description":"Company unique identifier"},"creationDate":{"type":"string","description":"Company creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last company status update (Read only)","format":"date"},"lastAvatarUpdateDate":{"type":"string","description":"Date of last company avatar update (Read only)","format":"date"},"name":{"type":"string","description":"Company name"},"country":{"type":"string","description":"Company country (ISO 3166-1 alpha3 format)"},"street":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"city":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"state":{"type":"string","description":", \"ALASKA\", \"....\", \"NEW_YORK\", \"....\", \"WYOMING\"] When country is 'USA', define a state. Else it is not managed.","default":"ALABAMA"},"postalCode":{"type":"string","description":"Company postal code","minLength":0,"maxLength":64},"currency":{"type":"string","description":"Company currency, for payment of premium offers (ISO 4217 format)   \nFor now, only USD and EUR are supported"},"status":{"type":"string","description":"Company status","enum":["initializing","active","alerting","hold","terminated"]},"visibility":{"type":"string","description":"Company visibility (define if users being in this company can be searched by users being in other company)","enum":["public","private","organisation"]},"visibleBy":{"type":"array","description":"If visibility is private, list of companyIds for which visibility is allowed","items":{"type":"string"}},"adminEmail":{"type":"string","description":"Company contact person email"},"supportEmail":{"type":"string","description":"Company support email"},"companyContactId":{"type":"string","description":"User Id of a Rainbow user which is the contact for this company"},"userSelfRegisterEnabled":{"type":"boolean","description":"Allow users with email domain matching 'userSelfRegisterAllowedDomains' to join the company by self-register process"},"userSelfRegisterAllowedDomains":{"type":"array","description":"Allow users with email domain matching one of the values of this array to join the company by self-register process (if userSelfRegisterEnabled is true)","items":{"type":"string"}},"slogan":{"type":"string","description":"A free string corresponding to the slogan of the company (255 char length)"},"description":{"type":"string","description":"A free string that describes the company (2000 char length)"},"size":{"type":"string","description":" An overview of the number of employees","enum":["self-employed","1-10 employees","11-50 employees","51-200 employees","201-500 employees","501-1000 employees","1001-5000 employees","5001-10,000 employees","10,001+ employees"]},"economicActivityClassification":{"type":"string","description":"* `A`: AGRICULTURE, FORESTRY AND FISHING\n* `B`: MINING AND QUARRYING\n* `C`: MANUFACTURING\n* `D`: ELECTRICITY, GAS, STEAM AND AIR CONDITIONING SUPPLY\n* `E`: WATER SUPPLY; SEWERAGE, WASTE MANAGEMENT AND REMEDIATION ACTIVITIES\n* `F`: CONSTRUCTION\n* `G`: WHOLESALE AND RETAIL TRADE; REPAIR OF MOTOR VEHICLES AND MOTORCYCLES\n* `H`: TRANSPORTATION AND STORAGE\n* `I`: ACCOMMODATION AND FOOD SERVICE ACTIVITIES\n* `J`: INFORMATION AND COMMUNICATION\n* `K`: FINANCIAL AND INSURANCE ACTIVITIES\n* `L`: REAL ESTATE ACTIVITIES\n* `M`: PROFESSIONAL, SCIENTIFIC AND TECHNICAL ACTIVITIES\n* `N`: ADMINISTRATIVE AND SUPPORT SERVICE ACTIVITIES\n* `O`: PUBLIC ADMINISTRATION AND DEFENCE; COMPULSORY SOCIAL SECURITY\n* `P`: EDUCATION\n* `Q`: HUMAN HEALTH AND SOCIAL WORK ACTIVITIES\n* `R`: ARTS, ENTERTAINMENT AND RECREATION\n* `S`: OTHER SERVICE ACTIVITIES\n* `T`: ACTIVITIES OF HOUSEHOLDS AS EMPLOYERS; UNDIFFERENTIATED GOODS- AND SERVICES-PRODUCING ACTIVITIES OF HOUSEHOLDS FOR OWN USE\n* `U`: ACTIVITIES OF EXTRATERRITORIAL ORGANISATIONS AND BODIES\n","enum":["NONE","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U"]},"giphyEnabled":{"type":"boolean","description":"Whether or not giphy feature is enabled for users belonging to this company (possibility to use animated gifs in conversations)"},"website":{"type":"string","description":"Company website URL"},"organisationId":{"type":"string","description":"Optional identifier to indicate the company belongs to an organisation","default":"null"},"catalogId":{"type":"string","description":"Id of the catalog of Rainbow offers to which the company is linked. The catalog corresponds to the list of offers the company can subscribe."},"bpId":{"type":"string","description":"Optional identifier which links the company to the corresponding Business partner company","default":"null"},"adminHasRightToUpdateSubscriptions":{"type":"boolean","description":"In the case the company is linked to a Business Partner company, indicates if the `bp_admin` allows the `company_admin` to update the subscriptions of his company (if enable, allowed operations depend of the value of `adminAllowedUpdateSubscriptionsOps`).   \nCan only be set by `superadmin` of `bp_admin` of the related company."},"adminAllowedUpdateSubscriptionsOps":{"type":"string","description":"In the case the company is linked to a Business Partner company and `adminHasRightToUpdateSubscriptions` is enabled, indicates the update operations for which the `bp_admin` allows the `company_admin` to perform on the subscriptions of his company.   \nCan only be set by `superadmin` of `bp_admin` of the related company.   \nPossible values: \n\n* `all`: company_admin is allowed to perform all update operations on the subscriptions of his company\n* `increase_only`: company_admin is only allowed to increase `maxNumberUsers` on the subscriptions of his company (decrease is forbidden)\n\n","enum":["all","increase_only"]},"isBP":{"type":"boolean","description":"Indicates if the company is a Business partner company","default":"false"},"bpType":{"type":"string","description":"Indicates BP Company type \n\n* `IR`: Indirect Reseller,\n* `VAD`: Value Added Distributor,\n* `DR`: Direct Reseller.\n\n  \nOnly visible by `superadmin` and `support`.","enum":["IR","VAD","DR"]},"bpBusinessModel":{"type":"string","description":"Indicates BP business model   \nOnly visible by `superadmin` and `support`."},"bpApplicantNumber":{"type":"string","description":"Reference of the Business Partner in ALE Finance tools (SAP)   \nOnly visible by `superadmin` and `support`."},"bpCRDid":{"type":"string","description":"Reference of the Business Partner in CDR   \nOnly visible by `superadmin` and `support`."},"bpHasRightToSell":{"type":"boolean","description":"Indicates if the Business has the right to sell   \nOnly visible by `superadmin` and `support`."},"bpHasRightToConnect":{"type":"boolean","description":"When True, the BP can connect CPE equipment of managed companies. So when False, the \"equipment\" tab should be removed from the admin GUI   \nOnly visible by `superadmin` and `support`."},"bpIsContractAccepted":{"type":"boolean","description":"Indicates if the Business has accepted the contract and can sell Rainbow offers   \nOnly visible by `superadmin` and `support`."},"bpContractAcceptationInfo":{"$ref":"#/definitions/bpContractAcceptationInfo"},"offerType":{"type":"string","description":"Allowed company offer types","enum":["freemium","premium"]},"externalReference":{"type":"string","description":"Free field that BP can use to link their customers to their IS/IT tools   \nOnly applicable by `superadmin` or by `bp_admin` on one of his customer companies.","minLength":0,"maxLength":64},"avatarShape":{"type":"string","description":"Company's avatar customization","enum":["square","circle"]},"customData":{"$ref":"#/definitions/customData"}},"required":["id","creationDate","statusUpdatedDate","lastAvatarUpdateDate","name","status","visibility","visibleBy","userSelfRegisterEnabled","userSelfRegisterAllowedDomains","size","organisationId","catalogId","bpId","isBP","offerType"]},"GetCompaniesAdministratorsSuccess":{"type":"object","properties":{"id":{"type":"string","description":"User id"},"displayName":{"type":"string","description":"User display name (firstName + lastName concatenated on server side)"},"loginEmail":{"type":"string","description":"User login email"},"companyId":{"type":"string","description":"User company unique identifier"},"companyName":{"type":"string","description":"User company name"},"isTerminated":{"type":"boolean","description":"Indicates if the Rainbow account of this user has been deleted"}},"required":["id","displayName","loginEmail","companyId","companyName","isTerminated"]},"GetCompaniesServiceDescriptionSuccess":{"type":"object","properties":{"pdf":{"type":"array","description":"Service description pdf file","items":{"$ref":"#/definitions/pdf"}}},"required":["pdf"]},"SetCompanyCustomisationSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Update operation status message."}},"required":["status"]},"GetDefaultCompanySuccess":{"type":"object","properties":{"id":{"type":"string","description":"Company unique identifier"},"creationDate":{"type":"string","description":"Company creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last company status update (Read only)","format":"date"},"lastAvatarUpdateDate":{"type":"string","description":"Date of last company avatar update (Read only)","format":"date"},"name":{"type":"string","description":"Company name"},"country":{"type":"string","description":"Company country (ISO 3166-1 alpha3 format)"},"street":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"city":{"type":"string","description":"Company street","minLength":0,"maxLength":255},"state":{"type":"string","description":", \"ALASKA\", \"....\", \"NEW_YORK\", \"....\", \"WYOMING\"] When country is 'USA', define a state. Else it is not managed.","default":"ALABAMA"},"postalCode":{"type":"string","description":"Company postal code","minLength":0,"maxLength":64},"currency":{"type":"string","description":"Company currency, for payment of premium offers (ISO 4217 format)   \nFor now, only USD and EUR are supported"},"status":{"type":"string","description":"Company status","enum":["initializing","active","alerting","hold","terminated"]},"visibility":{"type":"string","description":"Company visibility (define if users being in this company can be searched by users being in other company)","enum":["public","private","organisation"]},"visibleBy":{"type":"array","description":"If visibility is private, list of companyIds for which visibility is allowed","items":{"type":"string"}},"adminEmail":{"type":"string","description":"Company contact person email"},"supportEmail":{"type":"string","description":"Company support email"},"companyContactId":{"type":"string","description":"User Id of a Rainbow user which is the contact for this company"},"userSelfRegisterEnabled":{"type":"boolean","description":"Allow users with email domain matching 'userSelfRegisterAllowedDomains' to join the company by self-register process"},"userSelfRegisterAllowedDomains":{"type":"array","description":"Allow users with email domain matching one of the values of this array to join the company by self-register process (if userSelfRegisterEnabled is true)","items":{"type":"string"}},"slogan":{"type":"string","description":"A free string corresponding to the slogan of the company (255 char length)"},"description":{"type":"string","description":"A free string that describes the company (2000 char length)"},"size":{"type":"string","description":" An overview of the number of employees","enum":["self-employed","1-10 employees","11-50 employees","51-200 employees","201-500 employees","501-1000 employees","1001-5000 employees","5001-10,000 employees","10,001+ employees"]},"economicActivityClassification":{"type":"string","description":"* `A`: AGRICULTURE, FORESTRY AND FISHING\n* `B`: MINING AND QUARRYING\n* `C`: MANUFACTURING\n* `D`: ELECTRICITY, GAS, STEAM AND AIR CONDITIONING SUPPLY\n* `E`: WATER SUPPLY; SEWERAGE, WASTE MANAGEMENT AND REMEDIATION ACTIVITIES\n* `F`: CONSTRUCTION\n* `G`: WHOLESALE AND RETAIL TRADE; REPAIR OF MOTOR VEHICLES AND MOTORCYCLES\n* `H`: TRANSPORTATION AND STORAGE\n* `I`: ACCOMMODATION AND FOOD SERVICE ACTIVITIES\n* `J`: INFORMATION AND COMMUNICATION\n* `K`: FINANCIAL AND INSURANCE ACTIVITIES\n* `L`: REAL ESTATE ACTIVITIES\n* `M`: PROFESSIONAL, SCIENTIFIC AND TECHNICAL ACTIVITIES\n* `N`: ADMINISTRATIVE AND SUPPORT SERVICE ACTIVITIES\n* `O`: PUBLIC ADMINISTRATION AND DEFENCE; COMPULSORY SOCIAL SECURITY\n* `P`: EDUCATION\n* `Q`: HUMAN HEALTH AND SOCIAL WORK ACTIVITIES\n* `R`: ARTS, ENTERTAINMENT AND RECREATION\n* `S`: OTHER SERVICE ACTIVITIES\n* `T`: ACTIVITIES OF HOUSEHOLDS AS EMPLOYERS; UNDIFFERENTIATED GOODS- AND SERVICES-PRODUCING ACTIVITIES OF HOUSEHOLDS FOR OWN USE\n* `U`: ACTIVITIES OF EXTRATERRITORIAL ORGANISATIONS AND BODIES\n","enum":["NONE","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U"]},"giphyEnabled":{"type":"boolean","description":"Whether or not giphy feature is enabled for users belonging to this company (possibility to use animated gifs in conversations)"},"website":{"type":"string","description":"Company website URL"},"organisationId":{"type":"string","description":"Optional identifier to indicate the company belongs to an organisation","default":"null"},"catalogId":{"type":"string","description":"Id of the catalog of Rainbow offers to which the company is linked. The catalog corresponds to the list of offers the company can subscribe."},"bpId":{"type":"string","description":"Optional identifier which links the company to the corresponding Business partner company","default":"null"},"adminHasRightToUpdateSubscriptions":{"type":"boolean","description":"In the case the company is linked to a Business Partner company, indicates if the `bp_admin` allows the `company_admin` to update the subscriptions of his company (if enable, allowed operations depend of the value of `adminAllowedUpdateSubscriptionsOps`).   \nCan only be set by `superadmin` of `bp_admin` of the related company."},"adminAllowedUpdateSubscriptionsOps":{"type":"string","description":"In the case the company is linked to a Business Partner company and `adminHasRightToUpdateSubscriptions` is enabled, indicates the update operations for which the `bp_admin` allows the `company_admin` to perform on the subscriptions of his company.   \nCan only be set by `superadmin` of `bp_admin` of the related company.   \nPossible values: \n\n* `all`: company_admin is allowed to perform all update operations on the subscriptions of his company\n* `increase_only`: company_admin is only allowed to increase `maxNumberUsers` on the subscriptions of his company (decrease is forbidden)\n\n","enum":["all","increase_only"]},"isBP":{"type":"boolean","description":"Indicates if the company is a Business partner company","default":"false"},"bpType":{"type":"string","description":"Indicates BP Company type \n\n* `IR`: Indirect Reseller,\n* `VAD`: Value Added Distributor,\n* `DR`: Direct Reseller.\n\n  \nOnly visible by `superadmin` and `support`.","enum":["IR","VAD","DR"]},"bpBusinessModel":{"type":"string","description":"Indicates BP business model   \nOnly visible by `superadmin` and `support`."},"bpApplicantNumber":{"type":"string","description":"Reference of the Business Partner in ALE Finance tools (SAP)   \nOnly visible by `superadmin` and `support`."},"bpCRDid":{"type":"string","description":"Reference of the Business Partner in CDR   \nOnly visible by `superadmin` and `support`."},"bpHasRightToSell":{"type":"boolean","description":"Indicates if the Business has the right to sell   \nOnly visible by `superadmin` and `support`."},"bpHasRightToConnect":{"type":"boolean","description":"When True, the BP can connect CPE equipment of managed companies. So when False, the \"equipment\" tab should be removed from the admin GUI   \nOnly visible by `superadmin` and `support`."},"bpIsContractAccepted":{"type":"boolean","description":"Indicates if the Business has accepted the contract and can sell Rainbow offers   \nOnly visible by `superadmin` and `support`."},"bpContractAcceptationInfo":{"$ref":"#/definitions/bpContractAcceptationInfo"},"offerType":{"type":"string","description":"Allowed company offer types","enum":["freemium","premium"]},"externalReference":{"type":"string","description":"Free field that BP can use to link their customers to their IS/IT tools   \nOnly applicable by `superadmin` or by `bp_admin` on one of his customer companies.","minLength":0,"maxLength":64},"avatarShape":{"type":"string","description":"Company's avatar customization","enum":["square","circle"]},"customData":{"$ref":"#/definitions/customData"}},"required":["id","creationDate","statusUpdatedDate","lastAvatarUpdateDate","name","status","visibility","visibleBy","userSelfRegisterEnabled","userSelfRegisterAllowedDomains","size","organisationId","catalogId","bpId","isBP","offerType"]},"admin_companies_deleteAvatarSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Avatar delete status message."}},"required":["status"]},"admin_companies_postAvatar":{"type":"object","properties":{"Content":{"type":"string","description":"File to be sent","format":"binary"}},"required":["Content"]},"admin_companies_postAvatarSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Avatar upload status message."}},"required":["status"]},"admin_companies_getAvatarSuccess":{"type":"object","properties":{"Content":{"type":"string","description":"File to be received","format":"binary"}},"required":["Content"]},"admin_companies_deleteBannerSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Banner delete status message."}},"required":["status"]},"admin_companies_postBanner":{"type":"object","properties":{"Content":{"type":"string","description":"File to be sent","format":"binary"}},"required":["Content"]},"admin_companies_postBannerSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Avatar upload status message."}},"required":["status"]},"admin_companies_getBannerSuccess":{"type":"object","properties":{"Content":{"type":"string","description":"File to be received","format":"binary"}},"required":["Content"]},"PutCompaniesCustomData":{"type":"object","properties":{"data":{"type":"array","description":"","items":{"$ref":"#/definitions/data"}}},"required":["data"]},"data":{"type":"object","properties":{"key1":{"type":"string","description":"Company's custom data key1."},"key2":{"type":"string","description":"Company's custom data key2."}},"required":["key1","key2"]},"GetCompanySitesSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Company name"},"id":{"type":"string","description":"Company unique identifier"}},"required":["name","id"]},"GetOrganisationsSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Organisation name"},"id":{"type":"string","description":"Organisation unique identifier"}},"required":["name","id"]},"GetOrganisationsIdSuccess":{"type":"object","properties":{"id":{"type":"string","description":"Organisation unique identifier"},"creationDate":{"type":"string","description":"Organisation creation date (Read only)","format":"date"},"latin_name":{"type":"string","description":"Organisation custom name format for search needs"},"name":{"type":"string","description":"Organisation name"},"visibility":{"type":"string","description":"Organisation visibility (define if users being in this organisation can be searched by users being in other organisations)"}},"required":["id","creationDate","latin_name","name","visibility"]},"PutOrganisations":{"type":"object","properties":{"name":{"type":"string","description":"Organisation name","minLength":1,"maxLength":255},"visibility":{"type":"string","description":"Organisation visibility (define if users being in this organisation can be searched by users being in other organisations)","enum":["public","private"],"default":"private"}},"required":["name"]},"PutOrganisationsSuccess":{"type":"object","properties":{"id":{"type":"string","description":"Organisation unique identifier"},"creationDate":{"type":"string","description":"Organisation creation date (Read only)","format":"date"},"latin_name":{"type":"string","description":"Organisation custom name format for search needs"},"name":{"type":"string","description":"Organisation name"},"visibility":{"type":"string","description":"Organisation visibility (define if users being in this organisation can be searched by users being in other organisations)"}},"required":["id","creationDate","latin_name","name","visibility"]},"DeleteOrganisationCompaniesSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Delete operation status message."}},"required":["status"]},"GetOrganisationCompaniesSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Company name"},"id":{"type":"string","description":"Company unique identifier"}},"required":["name","id"]},"PostOrganisationCompanies":{"type":"object","properties":{"companyId":{"type":"string","description":"Company unique identifier { \"companyId\": \"5749ab92245015fe0d36e96a\" }"}},"required":["companyId"]},"PostOrganisationCompaniesSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Company name"},"latin_name":{"type":"string","description":"Company name format for search purpose"},"creationDate":{"type":"string","description":"Company creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last company status update","format":"date"},"settings":{"$ref":"#/definitions/settings"},"forceHandshake":{"type":"boolean","description":"Precondition - Several companies under an organization - Users under one company doesn't have to acknowledge when they are added to the network of another user belonging to the other company(ies) of the same organization"},"status":{"type":"string","description":"Company status"},"visibility":{"type":"string","description":"Company visibility (define if users being in this company can be searched by users being in other company)"},"visibleBy":{"type":"array","description":"If visibility is private, list of companyIds for which visibility is allowed","items":{"type":"string"}},"organisationId":{"type":"string","description":"Organization from which the company is linked in"},"offerType":{"type":"string","description":"Allowed company offer types (lead - opportunity to become freemium or premium)","enum":["lead","freemium","premium"]},"id":{"type":"string","description":"Company unique identifier"}},"required":["name","latin_name","creationDate","statusUpdatedDate","settings","forceHandshake","status","visibility","visibleBy","organisationId","offerType","id"]},"DeleteSitesSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Delete operation status message."}},"required":["status"]},"GetSitesIdSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Company name"},"settings":{"$ref":"#/definitions/settings"},"id":{"type":"string","description":"Company unique identifier"},"status":{"type":"string","description":"Company status"},"creationDate":{"type":"string","description":"Company creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last site status update (Read only)","format":"date"}},"required":["name","settings","id","status","creationDate","statusUpdatedDate"]},"settings":{"type":"object","properties":{"iceServers":{"type":"array","description":"","items":{"$ref":"#/definitions/iceServers"}}},"required":["iceServers"]},"iceServers":{"type":"object","properties":{"id":{"type":"string","description":"ICE server unique identifier"},"urls":{"type":"string","description":"ICE server url"},"username":{"type":"string","description":"ICE server user login"},"credential":{"type":"string","description":"ICE server user password"}},"required":["id","urls"]},"PutSites":{"type":"object","properties":{"name":{"type":"string","description":"Site name","minLength":1,"maxLength":255},"status":{"type":"string","description":"Site status","enum":["active","alerting","hold","terminated"],"minLength":3,"maxLength":255},"companyId":{"type":"string","description":"Id of the company from which the site is linked."}},"required":["companyId"]},"PutSitesSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Company name"},"settings":{"$ref":"#/definitions/settings"},"id":{"type":"string","description":"Company unique identifier"},"status":{"type":"string","description":"Company status"},"creationDate":{"type":"string","description":"Company creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last site status update (Read only)","format":"date"}},"required":["name","settings","id","status","creationDate","statusUpdatedDate"]},"GetSitesSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Company name"},"id":{"type":"string","description":"Company unique identifier"}},"required":["name","id"]},"PostSites":{"type":"object","properties":{"name":{"type":"string","description":"Site name","minLength":1,"maxLength":255},"status":{"type":"string","description":"Site status","enum":["active","alerting","hold","terminated"]},"companyId":{"type":"string","description":"Id of the company from which the site is linked."}},"required":["name","status","companyId"]},"PostSitesSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Company name"},"settings":{"$ref":"#/definitions/settings"},"id":{"type":"string","description":"Company unique identifier"},"status":{"type":"string","description":"Company status"},"creationDate":{"type":"string","description":"Company creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last site status update (Read only)","format":"date"}},"required":["name","settings","id","status","creationDate","statusUpdatedDate"]},"DeleteSiteSystemsSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Delete operation status message."}},"required":["status"]},"GetSiteSystemsSuccess":{"type":"object","properties":{"id":{"type":"string","description":"System unique identifier"},"pbxId":{"type":"string","description":"Call Control Agent (CCA) identifier ( This is the login to access to XMPP server)."},"version":{"type":"string","description":"CCA software version"}},"required":["id","pbxId","version"]},"PostSiteSystems":{"type":"object","properties":{"systemId":{"type":"string","description":"System unique identifier { \"systemId\": \"5749ab92245015fe0d36e96a\" }"}},"required":["systemId"]},"PostSiteSystemsSuccess":{"type":"object","properties":{"name":{"type":"string","description":"System name/description"},"pbxId":{"type":"string","description":"Call Control Agent (CCA) login."},"siteId":{"type":"array","description":"Site from which the system is linked with.","items":{"type":"string"}},"type":{"type":"string","description":"CCA type"},"country":{"type":"string","description":"System country (ISO 3166-1 alpha3 format)"},"version":{"type":"string","description":"CCA software version"},"jid_pbxagent":{"type":"string","description":"CCA Jabber Id"},"jid_pbxagent_password":{"type":"string","description":"CCA Jabber Id access code. The value of this field is depending on status field. > - `created, activating`: This is the public access code. The code must be used by the CCA for the first connection. > - `activated`: This is an Hash code of the private access code, reduced to the last eight digits"},"jid_pbxpcg":{"type":"string","description":"PCG Jabber Id for this system"},"jid_pbxpcg_password":{"type":"string","description":"PCG CCA Jabber Id password for this system"},"status":{"type":"string","description":"CCA status report. (read only) > - `created`: CCA uses a public access code to join rainbow infrastructure (see jid_pbxagent_password field) > - `activating`: Rainbow infrastructure has proposed a private access code to replace the former public access code > - `activated`: CCA has accepted the new access code, that will be used for the next initialization.","enum":["created","activating","activated"],"default":"created"},"serverPingTimeout":{"type":"string","description":"CCA config data"},"pbxMainBundlePrefix":{"type":"array","description":"CCA config data","items":{"type":"string"}},"pbxNumberingTranslator":{"type":"array","description":"list of several regular expressions used to validate internal or external phone numbers. Up to 100 regular expressions are allowed. (64 max char by regexp). To reset the list, use []","items":{"$ref":"#/definitions/pbxNumberingTranslator"}},"pbxNationalPrefix":{"type":"string","description":"National prefix"},"pbxInternationalPrefix":{"type":"string","description":"International prefix"},"creationDate":{"type":"string","description":"System creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last system status update (Read only)","format":"date"},"searchResultOrder":{"type":"array","description":"List of directory types to order search results","enum":["RAINBOW","LDAP","PBX"],"items":{"type":"string"}},"id":{"type":"string","description":"System unique identifier"},"bpId":{"type":"string","description":"Identifier which links the system to the corresponding Business partner company. Obligatory when a BP admin creates a isCentrex system not yet used by a company","default":"null"}},"required":["name","pbxId","siteId","type","country","version","jid_pbxagent","jid_pbxagent_password","jid_pbxpcg","jid_pbxpcg_password","status","serverPingTimeout","pbxMainBundlePrefix","pbxNumberingTranslator","pbxNationalPrefix","pbxInternationalPrefix","creationDate","statusUpdatedDate","searchResultOrder","id","bpId"]},"pbxNumberingTranslator":{"type":"object","properties":{"regexpMatch":{"type":"string","description":"A valid regular expression used to select a translator action. \\d is not supported! Use (0..9) instead."},"regexpReplace":{"type":"string","description":"A valid dialable number."},"description":{"type":"string","description":"A short description of the rule * @apiSuccess {Boolean} usePbxMainBundlePrefix Whether or not pbxMainBundlePrefix is used by PCG"}},"required":["regexpMatch","regexpReplace","description"]},"DeleteSystemsSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Delete operation status message."}},"required":["status"]},"GetSystemsIdSuccess":{"type":"object","properties":{"activatingTransactionId":{"type":"string","description":"CCA Jabber Id"},"jid_pbxagent_password_activating":{"type":"string","description":"CCA Jabber Id access code. The value of this field is depending on status field. The value of this field is depending on 'status' field.   \n- `activating`: This is a proposal of private access code sent to CCA and not yet acknowledged.   \n- `created, activated`: Empty string"},"name":{"type":"string","description":"System name/description"},"pbxId":{"type":"string","description":"Call Control Agent (CCA) login."},"siteId":{"type":"array","description":"Site from which the system is linked with.","items":{"type":"string"}},"type":{"type":"string","description":"CCA type"},"country":{"type":"string","description":"System country (ISO 3166-1 alpha3 format)"},"version":{"type":"string","description":"CCA software version"},"jid_pbxagent":{"type":"string","description":"CCA Jabber Id"},"jid_pbxagent_password":{"type":"string","description":"CCA Jabber Id access code. The value of this field is depending on status field. > - `created, activating`: This is the public access code. The code must be used by the CCA for the first connection. > - `activated`: This is an Hash code of the private access code, reduced to the last eight digits"},"jid_pbxpcg":{"type":"string","description":"PCG Jabber Id for this system"},"jid_pbxpcg_password":{"type":"string","description":"PCG CCA Jabber Id password for this system"},"status":{"type":"string","description":"CCA status report. (read only) > - `created`: CCA uses a public access code to join rainbow infrastructure (see jid_pbxagent_password field) > - `activating`: Rainbow infrastructure has proposed a private access code to replace the former public access code > - `activated`: CCA has accepted the new access code, that will be used for the next initialization.","enum":["created","activating","activated"],"default":"created"},"serverPingTimeout":{"type":"string","description":"CCA config data"},"pbxMainBundlePrefix":{"type":"array","description":"CCA config data","items":{"type":"string"}},"pbxNumberingTranslator":{"type":"array","description":"list of several regular expressions used to validate internal or external phone numbers. Up to 100 regular expressions are allowed. (64 max char by regexp). To reset the list, use []","items":{"$ref":"#/definitions/pbxNumberingTranslator"}},"pbxNationalPrefix":{"type":"string","description":"National prefix"},"pbxInternationalPrefix":{"type":"string","description":"International prefix"},"creationDate":{"type":"string","description":"System creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last system status update (Read only)","format":"date"},"searchResultOrder":{"type":"array","description":"List of directory types to order search results","enum":["RAINBOW","LDAP","PBX"],"items":{"type":"string"}},"id":{"type":"string","description":"System unique identifier"},"bpId":{"type":"string","description":"Identifier which links the system to the corresponding Business partner company. Obligatory when a BP admin creates a isCentrex system not yet used by a company","default":"null"}},"required":["activatingTransactionId","jid_pbxagent_password_activating","name","pbxId","siteId","type","country","version","jid_pbxagent","jid_pbxagent_password","jid_pbxpcg","jid_pbxpcg_password","status","serverPingTimeout","pbxMainBundlePrefix","pbxNumberingTranslator","pbxNationalPrefix","pbxInternationalPrefix","creationDate","statusUpdatedDate","searchResultOrder","id","bpId"]},"PutSystems":{"type":"object","properties":{"name":{"type":"string","description":"System name/description"},"siteId":{"type":"string","description":"Site from which the system is linked with."},"type":{"type":"string","description":"CCA type (Call Control Agent).","enum":["oxo","oxe","third_party","undefined"]},"country":{"type":"string","description":"System country (ISO 3166-1 alpha3 format)","maxLength":3,"minLength":3},"version":{"type":"string","description":"CCA software version"},"serverPingTimeout":{"type":"string","description":"CCA config data","default":"120"},"pbxMainBundlePrefix":{"type":"string","description":"CCA config data"},"usePbxMainBundlePrefix":{"type":"boolean","description":"Whether or not pbxMainBundlePrefix is used by PCG"},"pbxNumberingTranslator":{"type":"array","description":"List of several regular expressions used to validate internal or external phone numbers. Up to 100 regular expressions are allowed. (64 max char by regexp). To reset the list, use []","items":{"$ref":"#/definitions/pbxNumberingTranslator"}},"pbxNationalPrefix":{"type":"string","description":"National prefix","minLength":0,"maxLength":32},"pbxInternationalPrefix":{"type":"string","description":"International prefix","minLength":0,"maxLength":32},"searchResultOrder":{"type":"array","description":"List of directory types to order search results","enum":["RAINBOW","LDAP","PBX"],"items":{"type":"string"}},"bpId":{"type":"string","description":"Link the system to the corresponding Business partner company.   \n`bpId` must correspond to a valid company having `isBP` equal to true.   \nOnly directly settable by `superadmin`."}},"required":[]},"PutSystemsSuccess":{"type":"object","properties":{"name":{"type":"string","description":"System name/description"},"pbxId":{"type":"string","description":"Call Control Agent (CCA) login."},"siteId":{"type":"array","description":"Site from which the system is linked with.","items":{"type":"string"}},"type":{"type":"string","description":"CCA type"},"country":{"type":"string","description":"System country (ISO 3166-1 alpha3 format)"},"version":{"type":"string","description":"CCA software version"},"jid_pbxagent":{"type":"string","description":"CCA Jabber Id"},"jid_pbxagent_password":{"type":"string","description":"CCA Jabber Id access code. The value of this field is depending on status field. > - `created, activating`: This is the public access code. The code must be used by the CCA for the first connection. > - `activated`: This is an Hash code of the private access code, reduced to the last eight digits"},"jid_pbxpcg":{"type":"string","description":"PCG Jabber Id for this system"},"jid_pbxpcg_password":{"type":"string","description":"PCG CCA Jabber Id password for this system"},"status":{"type":"string","description":"CCA status report. (read only) > - `created`: CCA uses a public access code to join rainbow infrastructure (see jid_pbxagent_password field) > - `activating`: Rainbow infrastructure has proposed a private access code to replace the former public access code > - `activated`: CCA has accepted the new access code, that will be used for the next initialization.","enum":["created","activating","activated"],"default":"created"},"serverPingTimeout":{"type":"string","description":"CCA config data"},"pbxMainBundlePrefix":{"type":"array","description":"CCA config data","items":{"type":"string"}},"pbxNumberingTranslator":{"type":"array","description":"list of several regular expressions used to validate internal or external phone numbers. Up to 100 regular expressions are allowed. (64 max char by regexp). To reset the list, use []","items":{"$ref":"#/definitions/pbxNumberingTranslator"}},"pbxNationalPrefix":{"type":"string","description":"National prefix"},"pbxInternationalPrefix":{"type":"string","description":"International prefix"},"creationDate":{"type":"string","description":"System creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last system status update (Read only)","format":"date"},"searchResultOrder":{"type":"array","description":"List of directory types to order search results","enum":["RAINBOW","LDAP","PBX"],"items":{"type":"string"}},"id":{"type":"string","description":"System unique identifier"},"bpId":{"type":"string","description":"Identifier which links the system to the corresponding Business partner company. Obligatory when a BP admin creates a isCentrex system not yet used by a company","default":"null"}},"required":["name","pbxId","siteId","type","country","version","jid_pbxagent","jid_pbxagent_password","jid_pbxpcg","jid_pbxpcg_password","status","serverPingTimeout","pbxMainBundlePrefix","pbxNumberingTranslator","pbxNationalPrefix","pbxInternationalPrefix","creationDate","statusUpdatedDate","searchResultOrder","id","bpId"]},"GetSystemsSuccess":{"type":"object","properties":{"id":{"type":"string","description":"System unique identifier"},"pbxId":{"type":"string","description":"Call Control Agent (CCA) identifier ( This is the login to access to XMPP server)."},"version":{"type":"string","description":"CCA software version"}},"required":["id","pbxId","version"]},"PostSystems":{"type":"object","properties":{"name":{"type":"string","description":"System name/description"},"pbxId":{"type":"string","description":"CCA (Call Control Agent) hosted by a System needs an account to XMPP. This is the login to access to XMPP server. **It should be given during system creation or automatically generated**."},"siteId":{"type":"string","description":"Site from which the system is linked with."},"type":{"type":"string","description":"CCA type.","enum":["oxo","oxe","third party","undefined"]},"country":{"type":"string","description":"System country (ISO 3166-1 alpha3 format)","maxLength":3,"minLength":3},"version":{"type":"string","description":"CCA software version"},"serverPingTimeout":{"type":"string","description":"CCA config data","default":"120"},"pbxMainBundlePrefix":{"type":"array","description":"CCA config data: array of String","items":{"type":"string"}},"usePbxMainBundlePrefix":{"type":"boolean","description":"Whether or not pbxMainBundlePrefix is used by PCG"},"pbxNumberingTranslator":{"type":"array","description":"List of several regular expressions used to validate internal or external phone numbers. Up to 100 regular expressions are allowed. (64 max char by regexp). To reset the list, use []","items":{"$ref":"#/definitions/pbxNumberingTranslator"}},"pbxNationalPrefix":{"type":"string","description":"National prefix","minLength":0,"maxLength":32},"pbxInternationalPrefix":{"type":"string","description":"International prefix","minLength":0,"maxLength":32},"searchResultOrder":{"type":"array","description":"List of directory types to order search results","enum":["RAINBOW","LDAP","PBX"],"items":{"type":"string"}},"activationCode":{"type":"string","description":"Currently, the activation code is a random 4 digits value (between 1000 and 9999) generated by the admin portal. With activationCode field, it's possible to set a custom value. In the Http success response the value is available in the 'jid_pbxagent_password' field. **activationCode is only taken in account during a system creation.**","minLength":1,"maxLength":256},"isCentrex":{"type":"boolean","description":"Indicates if the system is one tenant or multi-tenant (OXE - OTEC-S) (default: false)"},"bpId":{"type":"string","description":"Link the system to the corresponding Business partner company.   \n`bpId` must correspond to a valid company having `isBP` equal to true.   \nOnly directly settable by `superadmin`.   \nIf the system is **created** by a `bp_admin`, `bpId` is automatically set to bp_admin's system `id`."}},"required":["name","siteId","type","country"]},"PostSystemsSuccess":{"type":"object","properties":{"name":{"type":"string","description":"System name/description"},"pbxId":{"type":"string","description":"Call Control Agent (CCA) login."},"siteId":{"type":"array","description":"Site from which the system is linked with.","items":{"type":"string"}},"type":{"type":"string","description":"CCA type"},"country":{"type":"string","description":"System country (ISO 3166-1 alpha3 format)"},"version":{"type":"string","description":"CCA software version"},"jid_pbxagent":{"type":"string","description":"CCA Jabber Id"},"jid_pbxagent_password":{"type":"string","description":"CCA Jabber Id access code. The value of this field is depending on status field. > - `created, activating`: This is the public access code. The code must be used by the CCA for the first connection. > - `activated`: This is an Hash code of the private access code, reduced to the last eight digits"},"jid_pbxpcg":{"type":"string","description":"PCG Jabber Id for this system"},"jid_pbxpcg_password":{"type":"string","description":"PCG CCA Jabber Id password for this system"},"status":{"type":"string","description":"CCA status report. (read only) > - `created`: CCA uses a public access code to join rainbow infrastructure (see jid_pbxagent_password field) > - `activating`: Rainbow infrastructure has proposed a private access code to replace the former public access code > - `activated`: CCA has accepted the new access code, that will be used for the next initialization.","enum":["created","activating","activated"],"default":"created"},"serverPingTimeout":{"type":"string","description":"CCA config data"},"pbxMainBundlePrefix":{"type":"array","description":"CCA config data","items":{"type":"string"}},"pbxNumberingTranslator":{"type":"array","description":"list of several regular expressions used to validate internal or external phone numbers. Up to 100 regular expressions are allowed. (64 max char by regexp). To reset the list, use []","items":{"$ref":"#/definitions/pbxNumberingTranslator"}},"pbxNationalPrefix":{"type":"string","description":"National prefix"},"pbxInternationalPrefix":{"type":"string","description":"International prefix"},"creationDate":{"type":"string","description":"System creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last system status update (Read only)","format":"date"},"searchResultOrder":{"type":"array","description":"List of directory types to order search results","enum":["RAINBOW","LDAP","PBX"],"items":{"type":"string"}},"id":{"type":"string","description":"System unique identifier"},"bpId":{"type":"string","description":"Identifier which links the system to the corresponding Business partner company. Obligatory when a BP admin creates a isCentrex system not yet used by a company","default":"null"}},"required":["name","pbxId","siteId","type","country","version","jid_pbxagent","jid_pbxagent_password","jid_pbxpcg","jid_pbxpcg_password","status","serverPingTimeout","pbxMainBundlePrefix","pbxNumberingTranslator","pbxNationalPrefix","pbxInternationalPrefix","creationDate","statusUpdatedDate","searchResultOrder","id","bpId"]},"DeleteSystemsFromGroupIdSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Group name describing a private network of pabx"},"companies":{"type":"array","description":"List of Company unique identifier.","items":{"type":"string"}},"systems":{"type":"array","description":"List of Objects (systemId : Systems unique identifier, pbxId : Call Control Agent (CCA) login)","items":{"$ref":"#/definitions/systems"}},"id":{"type":"string","description":"SystemsGroup unique identifier"}},"required":["name","companies","systems","id"]},"systems":{"type":"object","properties":{"systemId":{"type":"string","description":""},"pbxId":{"type":"string","description":""}},"required":["systemId","pbxId"]},"PutSystemsGroupIdSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Group name describing a private network of pabx"},"companies":{"type":"array","description":"List of Company unique identifier.","items":{"type":"string"}},"systems":{"type":"array","description":"List of Objects (systemId : Systems unique identifier, pbxId : Call Control Agent (CCA) login)","items":{"$ref":"#/definitions/systems"}},"id":{"type":"string","description":"SystemsGroup unique identifier"}},"required":["name","companies","systems","id"]},"DeleteSystemsGroupIdSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Delete operation status message."}},"required":["status"]},"GetSystemsGroupIdSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Group name describing a private network of pabx"},"companies":{"type":"array","description":"List of Company unique identifier.","items":{"type":"string"}},"systems":{"type":"array","description":"List of Objects (systemId : Systems unique identifier, pbxId : Call Control Agent (CCA) login)","items":{"$ref":"#/definitions/systems"}},"id":{"type":"string","description":"SystemsGroup unique identifier"}},"required":["name","companies","systems","id"]},"PutSystemsGroupNameId":{"type":"object","properties":{"name":{"type":"string","description":"Group name describing a private network of pabx"}},"required":["name"]},"PutSystemsGroupNameIdSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Group name describing a private network of pabx"},"companies":{"type":"array","description":"List of Company unique identifier.","items":{"type":"string"}},"systems":{"type":"array","description":"List of Objects (systemId : Systems unique identifier, pbxId : Call Control Agent (CCA) login)","items":{"$ref":"#/definitions/systems"}},"id":{"type":"string","description":"SystemsGroup unique identifier"}},"required":["name","companies","systems","id"]},"GetSystemsGroupsSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Group name describing a private network of pabx"},"companies":{"type":"array","description":"List of Company unique identifier.","items":{"type":"string"}},"systems":{"type":"array","description":"List of Objects (systemId : Systems unique identifier, pbxId : Call Control Agent (CCA) login)","items":{"$ref":"#/definitions/systems"}},"id":{"type":"string","description":"SystemsGroup unique identifier"}},"required":["name","companies","systems","id"]},"PostSystemsGroups":{"type":"object","properties":{"name":{"type":"string","description":"Group name describing a private network of pabx"},"companies":{"type":"array","description":"List of Company unique identifier. A least one Id. This field is wanted to classify SystemsGroups inside the rainbow infrastructure.","items":{"type":"string"}},"systems":{"type":"array","description":"List of Systems unique identifier. May be empty. Several checks were done. Possible error cases are: (404 not found), (409 conflict - Systems already belongs to another group), (403 forbidden - one of the systems mustn't be administrated by the administrator)","items":{"type":"string"}}},"required":["name","companies"]},"PostSystemsGroupsSuccess":{"type":"object","properties":{"name":{"type":"string","description":"Group name describing a private network of pabx"},"companies":{"type":"array","description":"List of Company unique identifier.","items":{"type":"string"}},"systems":{"type":"array","description":"List of Objects (systemId : Systems unique identifier, pbxId : Call Control Agent (CCA) login)","items":{"$ref":"#/definitions/systems"}},"id":{"type":"string","description":"SystemsGroup unique identifier"}},"required":["name","companies","systems","id"]},"GetSystemPhoneNumbersSuccess":{"type":"object","properties":{"id":{"type":"string","description":"Phone number unique identifier"},"shortNumber":{"type":"string","description":"Short phone number (corresponds to the number monitored by PCG).   \nOnly usable within the same PBX."},"internalNumber":{"type":"string","description":"Internal phone number.   \nUsable within a PBX group."},"voiceMailNumber":{"type":"string","description":"Voice mail phone number"},"number":{"type":"string","description":"DDI phone number"},"numberE164":{"type":"string","description":"E.164 phone number (computed by server if number is set)"},"pbxUserId":{"type":"string","description":"Pbx's user Id"},"userId":{"type":"string","description":"Rainbow userId to which the phone number is linked"},"jid_im":{"type":"string","description":"jid_im of the Rainbow user to which the phone number is linked"},"jid_tel":{"type":"string","description":"jid_tel of the Rainbow user to which the phone number is linked"},"jid_password":{"type":"string","description":"jid_password of the Rainbow user to which the phone number is linked"},"country":{"type":"string","description":"Phone number country (ISO 3166-1 alpha3 format)"},"type":{"type":"string","description":"Phone number type, one of `home`, `work`, `other`"},"deviceType":{"type":"string","description":"Phone number device type, one of `landline`, `mobile`, `fax`, `other`"},"isFromSystem":{"type":"string","description":"Boolean indicating if the phoneNumber is linked to a system (pbx)"},"pbxId":{"type":"string","description":"pbx unique identifier"},"firstName":{"type":"string","description":"firstname"},"lastName":{"type":"string","description":"lastname"},"deviceName":{"type":"string","description":"devicename"},"systemId":{"type":"string","description":"System unique identifier"},"isMonitored":{"type":"boolean","description":"Specifies if the PhoneNumber is monitored by agent (i.e. telephony events are notified to Rainbow user through XMPP)"},"isNomadic":{"type":"boolean","description":"Specifies if Nomadic set is selected."}},"required":["id","shortNumber","internalNumber","voiceMailNumber","number","numberE164","pbxUserId","userId","jid_im","jid_tel","jid_password","country","type","deviceType","isFromSystem","pbxId","firstName","lastName","deviceName","systemId","isMonitored","isNomadic"]},"GetSystemPhoneNumbersIdSuccess":{"type":"object","properties":{"id":{"type":"string","description":"Phone number unique identifier"},"shortNumber":{"type":"string","description":"Short phone number (corresponds to the number monitored by PCG).   \nOnly usable within the same PBX."},"internalNumber":{"type":"string","description":"Internal phone number.   \nUsable within a PBX group."},"voiceMailNumber":{"type":"string","description":"Voice mail phone number"},"number":{"type":"string","description":"DDI phone number"},"numberE164":{"type":"string","description":"E.164 phone number (computed by server if number is set)"},"pbxUserId":{"type":"string","description":"Pbx's user Id"},"userId":{"type":"string","description":"Rainbow userId to which the phone number is linked"},"jid_im":{"type":"string","description":"jid_im of the Rainbow user to which the phone number is linked"},"jid_tel":{"type":"string","description":"jid_tel of the Rainbow user to which the phone number is linked"},"jid_password":{"type":"string","description":"jid_password of the Rainbow user to which the phone number is linked"},"country":{"type":"string","description":"Phone number country (ISO 3166-1 alpha3 format)"},"type":{"type":"string","description":"Phone number type, one of `home`, `work`, `other`"},"deviceType":{"type":"string","description":"Phone number device type, one of `landline`, `mobile`, `fax`, `other`"},"isFromSystem":{"type":"string","description":"Boolean indicating if the phoneNumber is linked to a system (pbx)"},"pbxId":{"type":"string","description":"pbx unique identifier"},"firstName":{"type":"string","description":"firstname"},"lastName":{"type":"string","description":"lastname"},"deviceName":{"type":"string","description":"devicename"},"systemId":{"type":"string","description":"System unique identifier"},"isMonitored":{"type":"boolean","description":"Specifies if the PhoneNumber is monitored by agent (i.e. telephony events are notified to Rainbow user through XMPP)"},"isNomadic":{"type":"boolean","description":"Specifies if Nomadic set is selected."}},"required":["id","shortNumber","internalNumber","voiceMailNumber","number","numberE164","pbxUserId","userId","jid_im","jid_tel","jid_password","country","type","deviceType","isFromSystem","pbxId","firstName","lastName","deviceName","systemId","isMonitored","isNomadic"]},"PutSystemPhoneNumbers":{"type":"object","properties":{"country":{"type":"string","description":"Phone number country (ISO 3166-1 alpha3 format)","maxLength":3,"minLength":3},"isMonitored":{"type":"boolean","description":"Specifies if the PhoneNumber is monitored by agent (i.e. telephony events are notified to Rainbow user through XMPP)"},"userId":{"type":"string","description":"Rainbow userId to which is linked the phoneNumber"},"internalNumber":{"type":"string","description":"Internal phone number. Usable within a PBX group. By default, it is equal to `shortNumber`.   \n`internalNumber` must be unique in the whole system group to which the related PhoneNumber belong (an error 409 is raised if someone tries to update internalNumber to a number already used by another PhoneNumber in the same system group)."},"number":{"type":"string","description":"Raw phone number (DDI) _Note:_ If numberE164 can't be computed from number and country fields, an error 400 is returned (ex: wrong phone number, phone number not matching country code, ...)"},"type":{"type":"string","description":"Phone number type","enum":["home","work","other"],"default":"work"},"deviceType":{"type":"string","description":"Phone number device type","enum":["landline","mobile","fax","other"],"default":"landline"},"firstName":{"type":"string","description":"firstname"},"lastName":{"type":"string","description":"lastname"},"deviceName":{"type":"string","description":"device name"}},"required":[]},"PutSystemPhoneNumbersSuccess":{"type":"object","properties":{"id":{"type":"string","description":"Phone number unique identifier"},"shortNumber":{"type":"string","description":"Short phone number (corresponds to the number monitored by PCG).   \nOnly usable within the same PBX."},"internalNumber":{"type":"string","description":"Internal phone number.   \nUsable within a PBX group."},"voiceMailNumber":{"type":"string","description":"Voice mail phone number"},"number":{"type":"string","description":"DDI phone number"},"numberE164":{"type":"string","description":"E.164 phone number (computed by server if number is set)"},"pbxUserId":{"type":"string","description":"Pbx's user Id"},"userId":{"type":"string","description":"Rainbow userId to which the phone number is linked"},"jid_im":{"type":"string","description":"jid_im of the Rainbow user to which the phone number is linked"},"jid_tel":{"type":"string","description":"jid_tel of the Rainbow user to which the phone number is linked"},"jid_password":{"type":"string","description":"jid_password of the Rainbow user to which the phone number is linked"},"country":{"type":"string","description":"Phone number country (ISO 3166-1 alpha3 format)"},"type":{"type":"string","description":"Phone number type, one of `home`, `work`, `other`"},"deviceType":{"type":"string","description":"Phone number device type, one of `landline`, `mobile`, `fax`, `other`"},"isFromSystem":{"type":"string","description":"Boolean indicating if the phoneNumber is linked to a system (pbx)"},"pbxId":{"type":"string","description":"pbx unique identifier"},"firstName":{"type":"string","description":"firstname"},"lastName":{"type":"string","description":"lastname"},"deviceName":{"type":"string","description":"devicename"},"systemId":{"type":"string","description":"System unique identifier"},"isMonitored":{"type":"boolean","description":"Specifies if the PhoneNumber is monitored by agent (i.e. telephony events are notified to Rainbow user through XMPP)"},"isNomadic":{"type":"boolean","description":"Specifies if Nomadic set is selected."}},"required":["id","shortNumber","internalNumber","voiceMailNumber","number","numberE164","pbxUserId","userId","jid_im","jid_tel","jid_password","country","type","deviceType","isFromSystem","pbxId","firstName","lastName","deviceName","systemId","isMonitored","isNomadic"]},"PostSystemsRestPasswordSuccess":{"type":"object","properties":{"name":{"type":"string","description":"System name/description"},"pbxId":{"type":"string","description":"Call Control Agent (CCA) login."},"siteId":{"type":"array","description":"Site from which the system is linked with.","items":{"type":"string"}},"type":{"type":"string","description":"CCA type"},"country":{"type":"string","description":"System country (ISO 3166-1 alpha3 format)"},"version":{"type":"string","description":"CCA software version"},"jid_pbxagent":{"type":"string","description":"CCA Jabber Id"},"jid_pbxagent_password":{"type":"string","description":"CCA Jabber Id access code. The value of this field is depending on status field. > - `created, activating`: This is the public access code. The code must be used by the CCA for the first connection. > - `activated`: This is an Hash code of the private access code, reduced to the last eight digits"},"jid_pbxpcg":{"type":"string","description":"PCG Jabber Id for this system"},"jid_pbxpcg_password":{"type":"string","description":"PCG CCA Jabber Id password for this system"},"status":{"type":"string","description":"CCA status report. (read only) > - `created`: CCA uses a public access code to join rainbow infrastructure (see jid_pbxagent_password field) > - `activating`: Rainbow infrastructure has proposed a private access code to replace the former public access code > - `activated`: CCA has accepted the new access code, that will be used for the next initialization.","enum":["created","activating","activated"],"default":"created"},"serverPingTimeout":{"type":"string","description":"CCA config data"},"pbxMainBundlePrefix":{"type":"array","description":"CCA config data","items":{"type":"string"}},"pbxNumberingTranslator":{"type":"array","description":"list of several regular expressions used to validate internal or external phone numbers. Up to 100 regular expressions are allowed. (64 max char by regexp). To reset the list, use []","items":{"$ref":"#/definitions/pbxNumberingTranslator"}},"pbxNationalPrefix":{"type":"string","description":"National prefix"},"pbxInternationalPrefix":{"type":"string","description":"International prefix"},"creationDate":{"type":"string","description":"System creation date (Read only)","format":"date"},"statusUpdatedDate":{"type":"string","description":"Date of last system status update (Read only)","format":"date"},"searchResultOrder":{"type":"array","description":"List of directory types to order search results","enum":["RAINBOW","LDAP","PBX"],"items":{"type":"string"}},"id":{"type":"string","description":"System unique identifier"},"bpId":{"type":"string","description":"Identifier which links the system to the corresponding Business partner company. Obligatory when a BP admin creates a isCentrex system not yet used by a company","default":"null"}},"required":["name","pbxId","siteId","type","country","version","jid_pbxagent","jid_pbxagent_password","jid_pbxpcg","jid_pbxpcg_password","status","serverPingTimeout","pbxMainBundlePrefix","pbxNumberingTranslator","pbxNationalPrefix","pbxInternationalPrefix","creationDate","statusUpdatedDate","searchResultOrder","id","bpId"]},"DeleteUsersSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Delete operation status message."}},"required":["status"]},"GetUsersIdSuccess":{"type":"object","properties":{"timeToLive":{"type":"number","description":"Duration in second to wait before automatically starting a user deletion from the creation date.   \nOnce the timeToLive has been reached, the user won't be usable to use APIs anymore (error 401523). His account may then be deleted from the database at any moment.   \nValue -1 means timeToLive is disable (i.e. user account will not expire)."},"id":{"type":"string","description":"User unique identifier"},"loginEmail":{"type":"string","description":"User email address (used for login)"},"firstName":{"type":"string","description":"User first name"},"lastName":{"type":"string","description":"User last name"},"displayName":{"type":"string","description":"User display name (firstName + lastName concatenated on server side)"},"nickName":{"type":"string","description":"User nickName"},"title":{"type":"string","description":"User title (honorifics title, like Mr, Mrs, Sir, Lord, Lady, Dr, Prof,...)"},"jobTitle":{"type":"string","description":"User job title"},"emails":{"type":"array","description":"Array of user emails addresses objects","items":{"$ref":"#/definitions/emails"}},"phoneNumbers":{"type":"array","description":"Array of user phone numbers objects.   \nPhone number objects can: \n\n* be created by user (information filled by user),\n* come from association with a system (pbx) device (association is done by admin).\n\n","items":{"$ref":"#/definitions/phoneNumbers"}},"country":{"type":"string","description":"User country (ISO 3166-1 alpha3 format)"},"language":{"type":"string","description":"User language (ISO 639-1 code format, with possibility of regional variation. Ex: both 'en' and 'en-US' are supported)"},"timezone":{"type":"string","description":"User timezone name"},"jid_im":{"type":"string","description":"User Jabber IM identifier"},"jid_tel":{"type":"string","description":"User Jabber TEL identifier"},"jid_password":{"type":"string","description":"User Jabber IM and TEL password"},"roles":{"type":"array","description":"List of user roles (Array of String)   \nNote: `company_support` role is only used for support redirection. If a user writes a #support ticket and have the role `company_support`, the ticket will be sent to ALE's support (otherwise the ticket is sent to user's company's `supportEmail` address is set, ALE otherwise).","items":{"type":"string"}},"adminType":{"type":"string","description":"In case of user's is 'admin', define the subtype (organisation_admin, company_admin, site_admin (default undefined)"},"companyId":{"type":"string","description":"User company unique identifier"},"organisationId":{"type":"string","description":"In addition to User companyId, optional identifier to indicate the user belongs also to an organization"},"siteId":{"type":"string","description":"In addition to User companyId, optional identifier to indicate the user belongs also to a site"},"companyName":{"type":"string","description":"User company name"},"isInDefaultCompany":{"type":"boolean","description":"Is user in default company   \nOnly returned if retreived user data corresponds to logged in user or if logged in user is admin of the retreived user"},"isActive":{"type":"boolean","description":"Is user active"},"isInitialized":{"type":"boolean","description":"Is user initialized"},"initializationDate":{"type":"string","description":"User initialization date","format":"date"},"activationDate":{"type":"string","description":"User activation date","format":"date"},"creationDate":{"type":"string","description":"User creation date","format":"date"},"lastUpdateDate":{"type":"string","description":"Date of last user update (whatever the field updated)","format":"date"},"lastAvatarUpdateDate":{"type":"string","description":"Date of last user avatar create/update, null if no avatar","format":"date"},"createdBySelfRegister":{"type":"boolean","description":"true if user has been created using self register"},"createdByAdmin":{"$ref":"#/definitions/createdByAdmin"},"invitedBy":{"$ref":"#/definitions/invitedBy"},"openInvites":{"$ref":"#/definitions/openInvites"},"firstLoginDate":{"type":"string","description":"Date of first user login (only set the first time user logs in, null if user never logged in)","format":"date"},"lastLoginDate":{"type":"string","description":"Date of last user login (defined even if user is logged out)","format":"date"},"loggedSince":{"type":"string","description":"Date of last user login (null if user is logged out)","format":"date"},"isTerminated":{"type":"boolean","description":"Indicates if the Rainbow account of this user has been deleted"},"guestMode":{"type":"boolean","description":"Indicated a user embedded in a chat or conference room, as guest, with limited rights until he finalizes his registration."}},"required":["timeToLive","id","loginEmail","firstName","lastName","displayName","nickName","title","jobTitle","emails","phoneNumbers","country","language","timezone","jid_im","jid_tel","jid_password","roles","adminType","companyId","organisationId","siteId","companyName","isInDefaultCompany","isActive","isInitialized","initializationDate","activationDate","creationDate","lastUpdateDate","lastAvatarUpdateDate","createdBySelfRegister","createdByAdmin","invitedBy","openInvites","firstLoginDate","lastLoginDate","loggedSince","isTerminated","guestMode"]},"emails":{"type":"object","properties":{"email":{"type":"string","description":"User email address"},"type":{"type":"string","description":"Email type, one of `home`, `work`, `other`"}},"required":["email","type"]},"phoneNumbers":{"type":"object","properties":{"phoneNumberId":{"type":"string","description":"Phone number unique id in directory collection."},"number":{"type":"string","description":"User phone number (as entered by user)"},"numberE164":{"type":"string","description":"User E.164 phone number, computed by server from number and country fields"},"country":{"type":"string","description":"Phone number country (ISO 3166-1 alpha3 format). Used to compute numberE164 field from number field."},"isFromSystem":{"type":"boolean","description":"Boolean indicating if phone is linked to a system (pbx)."},"shortNumber":{"type":"string","description":"**[Only for phone numbers linked to a system (pbx)]**  \nIf phone is linked to a system (pbx), short phone number (corresponds to the number monitored by PCG).   \nOnly usable within the same PBX.   \nOnly PCG can set this field."},"internalNumber":{"type":"string","description":"**[Only for phone numbers linked to a system (pbx)]**  \nIf phone is linked to a system (pbx), internal phone number.   \nUsable within a PBX group.   \nAdmins and users can modify this internalNumber field."},"systemId":{"type":"string","description":"**[Only for phone numbers linked to a system (pbx)]**  \nIf phone is linked to a system (pbx), unique identifier of that system in Rainbow database."},"pbxId":{"type":"string","description":"**[Only for phone numbers linked to a system (pbx)]**  \nIf phone is linked to a system (pbx), unique identifier of that pbx."},"type":{"type":"string","description":"Phone number type, one of `home`, `work`, `other`."},"deviceType":{"type":"string","description":"Phone number device type, one of `landline`, `mobile`, `fax`, `other`."}},"required":["phoneNumberId","number","numberE164","country","isFromSystem","shortNumber","internalNumber","systemId","pbxId","type","deviceType"]},"createdByAdmin":{"type":"object","properties":{"userId":{"type":"string","description":""},"loginEmail":{"type":"string","description":""}},"required":["userId","loginEmail"]},"invitedBy":{"type":"object","properties":{"userId":{"type":"string","description":""},"loginEmail":{"type":"string","description":""}},"required":["userId","loginEmail"]},"openInvites":{"type":"object","properties":{"openInviteId":{"type":"string","description":"uuid representing a part of the user's public URL to invite somebody to join a room. Example of public URL: https://web.openrainbow.com/#/invite?invitationId=0fc06e0ce4a849fcbe214ae5e1107417&scenario='public-url'"},"roomId":{"type":"string","description":"Room unique identifier. Field can be empty when the open invite is not bind with a room"}},"required":["openInviteId","roomId"]},"PutUsers":{"type":"object","properties":{"loginEmail":{"type":"string","description":"User email address (used for login).   \nMust be unique (409 error is returned if a user already exists with the same email address).","minLength":3,"maxLength":255},"password":{"type":"string","description":"User password.   \nRules: more than 8 characters, at least 1 capital letter, 1 number, 1 special character.","minLength":8,"maxLength":64},"phoneNumbers":{"type":"array","description":"Array of user PhoneNumbers objects   \n  \n_Notes:_* Provided PhoneNumbers data overwrite previous values: \n  * PhoneNumbers which are not known on server side are added,\n  * PhoneNumbers which are changed are updated,\n  * PhoneNumbers which are not provided but existed on server side are deleted.\n  * This does not applies to PhoneNumbers linked to a system(pbx), which can only be updated (addition and deletion of system PhoneNumbers are ignored).\n* When number is present, the server tries to compute the associated E.164 number (`numberE164` field) using provided PhoneNumber country if available, user country otherwise. If `numberE164` can't be computed, an error 400 is returned (ex: wrong phone number, phone number not matching country code, ...)\n* PhoneNumber linked to a system (pbx) can also be updated. In that case, `shortNumber` and `systemId` of the existing system PhoneNumber must be provided with the fields to update (see example bellow).\n* System phoneNumbers can't be created nor deleted using this API, only PCG can create/delete system PhoneNumbers.\n\n","items":{"$ref":"#/definitions/phoneNumbers"}},"firstName":{"type":"string","description":"User first name","minLength":1,"maxLength":255},"lastName":{"type":"string","description":"User last name","minLength":1,"maxLength":255},"nickName":{"type":"string","description":"User nickName","minLength":1,"maxLength":255},"title":{"type":"string","description":"User title (honorifics title, like Mr, Mrs, Sir, Lord, Lady, Dr, Prof,...)","minLength":1,"maxLength":40},"jobTitle":{"type":"string","description":"User job title","minLength":1,"maxLength":255},"emails":{"type":"array","description":"Array of user emails addresses objects","items":{"$ref":"#/definitions/emails"}},"country":{"type":"string","description":"User country (ISO 3166-1 alpha3 format)","maxLength":3,"minLength":3},"language":{"type":"string","description":"User language   \n  \nLanguage format is composed of locale using format `ISO 639-1`, with optionally the regional variation using `ISO 3166‑1 alpha-2` (separated by hyphen).   \nLocale part is in lowercase, regional part is in uppercase. Examples: en, en-US, fr, fr-FR, fr-CA, es-ES, es-MX, ...   \nMore information about the format can be found on this [link][0].\n\n[0]: https://en.wikipedia.org/wiki/Language_localisation#Language_tags_and_codes","pattern":"/^([a-z]{2})(?:(?:(-)[A-Z]{2}))?$/"},"timezone":{"type":"string","description":"User timezone name   \nAllowed values: one of the timezone names defined in [IANA tz database][0]  \nTimezone name are composed as follow: `Area/Location` (ex: Europe/Paris, America/New_York,...)\n\n[0]: https://www.iana.org/time-zones"},"accountType":{"type":"string","description":"User subscription type","enum":["free","basic","advanced"],"default":"free"},"roles":{"type":"array","description":"List of user roles","enum":["guest","user","admin","bp_admin","bp_buyer","bp_sales","company_support","support","superadmin"],"default":"user","items":{"type":"string"}},"adminType":{"type":"string","description":"Mandatory if roles array contains `admin` role: specifies at which entity level the administrator has admin rights in the hierarchy ORGANIZATIONS/COMPANIES/SITES/SYSTEMS","enum":["organization_admin","company_admin","site_admin"]},"companyId":{"type":"string","description":"User company unique identifier (like 569ce8c8f9336c471b98eda1)   \ncompanyName field is automatically filled on server side based on companyId."},"isActive":{"type":"boolean","description":"Is user active","default":"true"},"isInitialized":{"type":"boolean","description":"Is user initialized","default":"false"},"visibility":{"type":"string","description":"User visibility (define if the user can be searched by users being in other company). * private: can be searched by users of his company only\n* public: can be searched by all users\n* none: Default value reserved for guest. Means 'can't be search inside or outside his company'\n\n","enum":["private","public","none"]},"timeToLive":{"type":"number","description":"Duration in second to wait before automatically starting a user deletion from the creation date.   \nOnce the timeToLive has been reached, the user won't be usable to use APIs anymore (error 401523). His account may then be deleted from the database at any moment.   \nValue -1 means timeToLive is disable (i.e. user account will not expire).   \nIf created user has role `guest` and no timeToLive is provided, a default value of 172800 seconds is set (48 hours).   \nIf created user does not have role `guest` and no timeToLive is provided, a default value of -1 is set (no expiration)."}},"required":[]},"PutUsersSuccess":{"type":"object","properties":{"timeToLive":{"type":"number","description":"Duration in second to wait before automatically starting a user deletion from the creation date.   \nOnce the timeToLive has been reached, the user won't be usable to use APIs anymore (error 401523). His account may then be deleted from the database at any moment.   \nValue -1 means timeToLive is disable (i.e. user account will not expire)."},"id":{"type":"string","description":"User unique identifier"},"loginEmail":{"type":"string","description":"User email address (used for login)"},"firstName":{"type":"string","description":"User first name"},"lastName":{"type":"string","description":"User last name"},"displayName":{"type":"string","description":"User display name (firstName + lastName concatenated on server side)"},"nickName":{"type":"string","description":"User nickName"},"title":{"type":"string","description":"User title (honorifics title, like Mr, Mrs, Sir, Lord, Lady, Dr, Prof,...)"},"jobTitle":{"type":"string","description":"User job title"},"emails":{"type":"array","description":"Array of user emails addresses objects","items":{"$ref":"#/definitions/emails"}},"phoneNumbers":{"type":"array","description":"Array of user phone numbers objects.   \nPhone number objects can: \n\n* be created by user (information filled by user),\n* come from association with a system (pbx) device (association is done by admin).\n\n","items":{"$ref":"#/definitions/phoneNumbers"}},"country":{"type":"string","description":"User country (ISO 3166-1 alpha3 format)"},"language":{"type":"string","description":"User language (ISO 639-1 code format, with possibility of regional variation. Ex: both 'en' and 'en-US' are supported)"},"timezone":{"type":"string","description":"User timezone name"},"jid_im":{"type":"string","description":"User Jabber IM identifier"},"jid_tel":{"type":"string","description":"User Jabber TEL identifier"},"jid_password":{"type":"string","description":"User Jabber IM and TEL password"},"roles":{"type":"array","description":"List of user roles (Array of String)   \nNote: `company_support` role is only used for support redirection. If a user writes a #support ticket and have the role `company_support`, the ticket will be sent to ALE's support (otherwise the ticket is sent to user's company's `supportEmail` address is set, ALE otherwise).","items":{"type":"string"}},"adminType":{"type":"string","description":"In case of user's is 'admin', define the subtype (organisation_admin, company_admin, site_admin (default undefined)"},"companyId":{"type":"string","description":"User company unique identifier"},"organisationId":{"type":"string","description":"In addition to User companyId, optional identifier to indicate the user belongs also to an organization"},"siteId":{"type":"string","description":"In addition to User companyId, optional identifier to indicate the user belongs also to a site"},"companyName":{"type":"string","description":"User company name"},"isInDefaultCompany":{"type":"boolean","description":"Is user in default company   \nOnly returned if retreived user data corresponds to logged in user or if logged in user is admin of the retreived user"},"isActive":{"type":"boolean","description":"Is user active"},"isInitialized":{"type":"boolean","description":"Is user initialized"},"initializationDate":{"type":"string","description":"User initialization date","format":"date"},"activationDate":{"type":"string","description":"User activation date","format":"date"},"creationDate":{"type":"string","description":"User creation date","format":"date"},"lastUpdateDate":{"type":"string","description":"Date of last user update (whatever the field updated)","format":"date"},"lastAvatarUpdateDate":{"type":"string","description":"Date of last user avatar create/update, null if no avatar","format":"date"},"createdBySelfRegister":{"type":"boolean","description":"true if user has been created using self register"},"createdByAdmin":{"$ref":"#/definitions/createdByAdmin"},"invitedBy":{"$ref":"#/definitions/invitedBy"},"openInvites":{"$ref":"#/definitions/openInvites"},"firstLoginDate":{"type":"string","description":"Date of first user login (only set the first time user logs in, null if user never logged in)","format":"date"},"lastLoginDate":{"type":"string","description":"Date of last user login (defined even if user is logged out)","format":"date"},"loggedSince":{"type":"string","description":"Date of last user login (null if user is logged out)","format":"date"},"isTerminated":{"type":"boolean","description":"Indicates if the Rainbow account of this user has been deleted"},"guestMode":{"type":"boolean","description":"Indicated a user embedded in a chat or conference room, as guest, with limited rights until he finalizes his registration."}},"required":["timeToLive","id","loginEmail","firstName","lastName","displayName","nickName","title","jobTitle","emails","phoneNumbers","country","language","timezone","jid_im","jid_tel","jid_password","roles","adminType","companyId","organisationId","siteId","companyName","isInDefaultCompany","isActive","isInitialized","initializationDate","activationDate","creationDate","lastUpdateDate","lastAvatarUpdateDate","createdBySelfRegister","createdByAdmin","invitedBy","openInvites","firstLoginDate","lastLoginDate","loggedSince","isTerminated","guestMode"]},"GetUsersSuccess":{"type":"object","properties":{"timeToLive":{"type":"number","description":"Duration in second to wait before automatically starting a user deletion from the creation date.   \nOnce the timeToLive has been reached, the user won't be usable to use APIs anymore (error 401523). His account may then be deleted from the database at any moment.   \nValue -1 means timeToLive is disable (i.e. user account will not expire)."},"id":{"type":"string","description":"User id"},"displayName":{"type":"string","description":"User display name (firstName + lastName concatenated on server side)"},"loginEmail":{"type":"string","description":"User login email"},"companyId":{"type":"string","description":"User company unique identifier"},"companyName":{"type":"string","description":"User company name"},"isTerminated":{"type":"boolean","description":"Indicates if the Rainbow account of this user has been deleted"}},"required":["timeToLive","id","displayName","loginEmail","companyId","companyName","isTerminated"]},"PostUsers":{"type":"object","properties":{"companyId":{"type":"string","description":"User company unique identifier (like 569ce8c8f9336c471b98eda1).   \nIf not provided, users are attached to a \"Default\" company.   \ncompanyName field is automatically filled on server side based on companyId."},"loginEmail":{"type":"string","description":"User email address (used for login).   \nMust be unique (409 error is returned if a user already exists with the same email address).","minLength":3,"maxLength":255},"password":{"type":"string","description":"User password.   \nRules: more than 8 characters, at least 1 capital letter, 1 number, 1 special character.","minLength":8,"maxLength":64},"firstName":{"type":"string","description":"User first name","minLength":1,"maxLength":255},"lastName":{"type":"string","description":"User last name","minLength":1,"maxLength":255},"nickName":{"type":"string","description":"User nickName","minLength":1,"maxLength":255},"title":{"type":"string","description":"User title (honorifics title, like Mr, Mrs, Sir, Lord, Lady, Dr, Prof,...)","minLength":1,"maxLength":40},"jobTitle":{"type":"string","description":"User job title","minLength":1,"maxLength":255},"emails":{"type":"array","description":"Array of user emails addresses objects","items":{"$ref":"#/definitions/emails"}},"phoneNumbers":{"type":"array","description":"Array of user phone numbers objects   \n  \n_Note:_ For each provided number, the server tries to compute the associated E.164 number (`numberE164` field) using provided PhoneNumber country if available, user country otherwise. If `numberE164` can't be computed, an error 400 is returned (ex: wrong phone number, phone number not matching country code, ...)","items":{"$ref":"#/definitions/phoneNumbers"}},"country":{"type":"string","description":"User country (ISO 3166-1 alpha3 format)","maxLength":3,"minLength":3},"language":{"type":"string","description":"User language   \n  \nLanguage format is composed of locale using format `ISO 639-1`, with optionally the regional variation using `ISO 3166‑1 alpha-2` (separated by hyphen).   \nLocale part is in lowercase, regional part is in uppercase. Examples: en, en-US, fr, fr-FR, fr-CA, es-ES, es-MX, ...   \nMore information about the format can be found on this [link][0].\n\n[0]: https://en.wikipedia.org/wiki/Language_localisation#Language_tags_and_codes","pattern":"/^([a-z]{2})(?:(?:(-)[A-Z]{2}))?$/"},"timezone":{"type":"string","description":"User timezone name   \nAllowed values: one of the timezone names defined in [IANA tz database][0]  \nTimezone name are composed as follow: `Area/Location` (ex: Europe/Paris, America/New_York,...)\n\n[0]: https://www.iana.org/time-zones"},"accountType":{"type":"string","description":"User subscription type","enum":["free","basic","advanced"],"default":"free"},"roles":{"type":"array","description":"List of user roles","enum":["guest","user","admin","bp_admin","bp_buyer","bp_sales","company_support","support","superadmin"],"default":"user","items":{"type":"string"}},"adminType":{"type":"string","description":"Mandatory if roles array contains `admin` role: specifies at which entity level the administrator has admin rights in the hierarchy ORGANIZATIONS/COMPANIES/SITES/SYSTEMS","enum":["organization_admin","company_admin","site_admin"]},"isActive":{"type":"boolean","description":"Is user active","default":"true"},"isInitialized":{"type":"boolean","description":"Is user initialized","default":"false"},"visibility":{"type":"string","description":"User visibility (define if the user can be searched by users being in other company). * private: can be searched by users of his company only\n* public: can be searched by all users\n* none: Default value reserved for guest. Means 'can't be search inside or outside his company'\n\n","enum":["private","public","none"]},"timeToLive":{"type":"number","description":"Duration in second to wait before automatically starting a user deletion from the creation date.   \nOnce the timeToLive has been reached, the user won't be usable to use APIs anymore (error 401523). His account may then be deleted from the database at any moment.   \nValue -1 means timeToLive is disable (i.e. user account will not expire).   \nIf created user has role `guest` and no timeToLive is provided, a default value of 172800 seconds is set (48 hours).   \nIf created user does not have role `guest` and no timeToLive is provided, a default value of -1 is set (no expiration)."}},"required":["loginEmail","password"]},"PostUsersSuccess":{"type":"object","properties":{"id":{"type":"string","description":"User unique identifier"},"loginEmail":{"type":"string","description":"User email address (used for login)"},"firstName":{"type":"string","description":"User first name"},"lastName":{"type":"string","description":"User last name"},"displayName":{"type":"string","description":"User display name (firstName + lastName concatenated on server side)"},"nickName":{"type":"string","description":"User nickName"},"title":{"type":"string","description":"User title (honorifics title, like Mr, Mrs, Sir, Lord, Lady, Dr, Prof,...)"},"jobTitle":{"type":"string","description":"User job title"},"emails":{"type":"array","description":"Array of user emails addresses objects","items":{"$ref":"#/definitions/emails"}},"phoneNumbers":{"type":"array","description":"Array of user phone numbers objects.   \nPhone number objects can: \n\n* be created by user (information filled by user),\n* come from association with a system (pbx) device (association is done by admin).\n\n","items":{"$ref":"#/definitions/phoneNumbers"}},"country":{"type":"string","description":"User country (ISO 3166-1 alpha3 format)"},"language":{"type":"string","description":"User language (ISO 639-1 code format, with possibility of regional variation. Ex: both 'en' and 'en-US' are supported)"},"timezone":{"type":"string","description":"User timezone name"},"jid_im":{"type":"string","description":"User Jabber IM identifier"},"jid_tel":{"type":"string","description":"User Jabber TEL identifier"},"jid_password":{"type":"string","description":"User Jabber IM and TEL password"},"roles":{"type":"array","description":"List of user roles (Array of String)   \nNote: `company_support` role is only used for support redirection. If a user writes a #support ticket and have the role `company_support`, the ticket will be sent to ALE's support (otherwise the ticket is sent to user's company's `supportEmail` address is set, ALE otherwise).","items":{"type":"string"}},"adminType":{"type":"string","description":"In case of user's is 'admin', define the subtype (organisation_admin, company_admin, site_admin (default undefined)"},"companyId":{"type":"string","description":"User company unique identifier"},"organisationId":{"type":"string","description":"In addition to User companyId, optional identifier to indicate the user belongs also to an organization"},"siteId":{"type":"string","description":"In addition to User companyId, optional identifier to indicate the user belongs also to a site"},"companyName":{"type":"string","description":"User company name"},"isInDefaultCompany":{"type":"boolean","description":"Is user in default company   \nOnly returned if retreived user data corresponds to logged in user or if logged in user is admin of the retreived user"},"isActive":{"type":"boolean","description":"Is user active"},"isInitialized":{"type":"boolean","description":"Is user initialized"},"initializationDate":{"type":"string","description":"User initialization date","format":"date"},"activationDate":{"type":"string","description":"User activation date","format":"date"},"creationDate":{"type":"string","description":"User creation date","format":"date"},"lastUpdateDate":{"type":"string","description":"Date of last user update (whatever the field updated)","format":"date"},"lastAvatarUpdateDate":{"type":"string","description":"Date of last user avatar create/update, null if no avatar","format":"date"},"createdBySelfRegister":{"type":"boolean","description":"true if user has been created using self register"},"createdByAdmin":{"$ref":"#/definitions/createdByAdmin"},"invitedBy":{"$ref":"#/definitions/invitedBy"},"firstLoginDate":{"type":"string","description":"Date of first user login (only set the first time user logs in, null if user never logged in)","format":"date"},"lastLoginDate":{"type":"string","description":"Date of last user login (defined even if user is logged out)","format":"date"},"loggedSince":{"type":"string","description":"Date of last user login (null if user is logged out)","format":"date"},"isTerminated":{"type":"boolean","description":"Indicates if the Rainbow account of this user has been deleted"},"timeToLive":{"type":"number","description":"Duration in second to wait before automatically starting a user deletion from the creation date.   \nOnce the timeToLive has been reached, the user won't be usable to use APIs anymore (error 401523). His account may then be deleted from the database at any moment.   \nValue -1 means timeToLive is disable (i.e. user account will not expire)."},"guestMode":{"type":"boolean","description":"Indicated a user embedded in a chat or conference room, as guest, with limited rights until he finalizes his registration."}},"required":["id","loginEmail","firstName","lastName","displayName","nickName","title","jobTitle","emails","phoneNumbers","country","language","timezone","jid_im","jid_tel","jid_password","roles","adminType","companyId","organisationId","siteId","companyName","isInDefaultCompany","isActive","isInitialized","initializationDate","activationDate","creationDate","lastUpdateDate","lastAvatarUpdateDate","createdBySelfRegister","createdByAdmin","invitedBy","firstLoginDate","lastLoginDate","loggedSince","isTerminated","timeToLive","guestMode"]},"UnlinkUserFromACompanySuccess":{"type":"object","properties":{"status":{"type":"string","description":"Unlink status message."}},"required":["status"]},"admin_users_PostUserNetworks":{"type":"object","properties":{"users":{"type":"array","description":"Array of user unique identifiers (like 56c5c19f94141765119f896c) of the users to add in requested user network","items":{"type":"string"}},"presence":{"type":"boolean","description":"Specify if presence subscription has to be set when adding the users in mutual networks.","enum":["false"]}},"required":["users"]},"admin_users_PostUserNetworksSuccess":{"type":"object","properties":{"status":{"type":"string","description":"Indicates if the operation succeeded"}},"required":["status"]},"admin_users_DeleteUserProfilesSuccess":{"type":"object","properties":{"subscriptionId":{"type":"string","description":"Id of company subscription to which user profile is assigned (one of the subscriptions available to user's company)"},"offerId":{"type":"string","description":"Id of the offer to which company subscription is attached"},"offerName":{"type":"string","description":"Name of the offer to which company subscription is attached"},"offerDescription":{"type":"string","description":"Description of the offer to which company subscription is attached"},"offerTechnicalDescription":{"type":"string","description":"Technical description of the subscribed offer"},"offerReference":{"type":"string","description":"Key used for referencing the subscribed offer. Well know offer References are: RB-Essential, RB-Business, RB-Enterprise, RB-Conference."},"profileId":{"type":"string","description":"Id of the profile to which company subscription is attached"},"profileName":{"type":"string","description":"Name of the profile to which company subscription is attached"},"status":{"type":"string","description":"Status of the company subscription to which user profile is assigned   \n  \nPossible values: `active`, `alerting`, `hold`, `terminated`"},"isDefault":{"type":"boolean","description":"Indicates if this profile is linked to user's company's subscription to default offer (i.e. Essential)"},"canBeSold":{"type":"boolean","description":"Indicates if this profile is linked a subscription for a paid offer.   \nSome offers are not be sold (Essential, Beta, Demo, ...).   \nIf canBeSold is true, the subscription is billed."},"businessModel":{"type":"string","description":"Indicates the business model associated to the subscribed offer (number of users, usage, ...) \n\n* `nb_users`: Licencing business model. Offers having this business model are billed according to the number of users bought for it. This should be the business model for Business and Enterprise offers.\n* `usage`: Offers having this business model are billed based on service consumption (whatever the number of users assigned to the subscription of this offer). This should be the business model for Conference offer.\n* `none`: no business model. Used for offers which are not sold (like Essential, Beta, ...).\n\n","enum":["nb_users","usage","none"]},"isExclusive":{"type":"boolean","description":"Indicates if this profile is relative to a subscription for an exclusive offer (if the user has already an exclusive offer assigned, it won't be possible to assign a second exclusive offer).   \nUsed on GUI side to know if the subscription to assign to a user profile has to be displayed as a radio button or as a check box."},"isPrepaid":{"type":"boolean","description":"Indicates if this profile is relative to a subscription for a prepaid offer"},"expirationDate":{"type":"string","description":"Expiration date of the subscription to the prepaid offer (creationDate + prepaidDuration)","format":"date"},"provisioningNeeded":{"type":"array","description":"Indicates if provisioning is needed on other component when assigning the user profile to this subscription (depends of thus subscribed offer)","items":{"$ref":"#/definitions/provisioningNeeded"}},"assignationDate":{"type":"string","description":"Date when the subscription was attached to user profile"}},"required":["subscriptionId","offerId","offerName","offerDescription","offerTechnicalDescription","offerReference","profileId","profileName","status","isDefault","canBeSold","businessModel","isExclusive","isPrepaid","expirationDate","provisioningNeeded","assignationDate"]},"provisioningNeeded":{"type":"object","properties":{"providerType":{"type":"string","description":"If provisioningNeeded is set, each element of the array must contain providerType. providerType defines the component on which the provisioning is needed when subscribing to this offer (provisioning is launched asynchronously when Business Store confirms through the callback that the subscription is created).","enum":["PGI","JANUS"]},"mediaType":{"type":"string","description":"Only set if provisioningNeeded is set and the element of the array has providerType `JANUS`. Corresponds to the media type to use when provisioning the company account on JANUS component.","enum":["webrtc"]},"provisioningOngoing":{"type":"boolean","description":"Boolean indicating if the account is being provisioned on the other component. If set to false, the account has been successfully created on the component."},"provisioningStartDate":{"type":"string","description":"Provisioning starting date"}},"required":["providerType","provisioningOngoing","provisioningStartDate"]},"admin_users_PostUserProfilesSuccess":{"type":"object","properties":{"subscriptionId":{"type":"string","description":"Id of company subscription to which user profile is assigned (one of the subscriptions available to user's company)"},"offerId":{"type":"string","description":"Id of the Rainbow offer to which company subscription is attached"},"offerName":{"type":"string","description":"Name of the Rainbow offer to which company subscription is attached"},"offerDescription":{"type":"string","description":"Description of the offer to which company subscription is attached"},"offerTechnicalDescription":{"type":"string","description":"Technical description of the subscribed offer"},"offerReference":{"type":"string","description":"Key used for referencing the subscribed offer. Well know offer References are: RB-Essential, RB-Business, RB-Enterprise, RB-Conference."},"profileId":{"type":"string","description":"Id of the Rainbow profile to which company subscription is attached"},"profileName":{"type":"string","description":"Name of the Rainbow profile to which company subscription is attached"},"status":{"type":"string","description":"Status of the company subscription to which user profile is assigned   \n  \nPossible values: `active`, `alerting`, `hold`, `terminated`"},"isDefault":{"type":"boolean","description":"Indicates if this profile lis linked to user's company's subscription to default offer (i.e. Essential)"},"canBeSold":{"type":"boolean","description":"Indicates if this profile is linked a subscription for a paid offer.   \nSome offers are not be sold (Essential, Beta, Demo, ...).   \nIf canBeSold is true, the subscription is billed."},"businessModel":{"type":"string","description":"Indicates the business model associated to the subscribed offer (number of users, usage, ...) \n\n* `nb_users`: Licencing business model. Offers having this business model are billed according to the number of users bought for it. This should be the business model for Business and Enterprise offers.\n* `usage`: Offers having this business model are billed based on service consumption (whatever the number of users assigned to the subscription of this offer). This should be the business model for Conference offer.\n* `none`: no business model. Used for offers which are not sold (like Essential, Beta, ...).\n\n","enum":["nb_users","usage","none"]},"isExclusive":{"type":"boolean","description":"Indicates if this profile is relative to a subscription for an exclusive offer (if the user has already an exclusive offer assigned, it won't be possible to assign a second exclusive offer).   \nUsed on GUI side to know if the subscription to assign to a user profile has to be displayed as a radio button or as a check box."},"isPrepaid":{"type":"boolean","description":"Indicates if this profile is relative to a subscription for a prepaid offer"},"expirationDate":{"type":"string","description":"Expiration date of the subscription to the prepaid offer (creationDate + prepaidDuration)","format":"date"},"provisioningNeeded":{"type":"array","description":"Indicates if provisioning is needed on other component when assigning the user profile to this subscription (depends of thus subscribed offer)","items":{"$ref":"#/definitions/provisioningNeeded"}},"assignationDate":{"type":"string","description":"Date when the subscription was attached to user profile"}},"required":["subscriptionId","offerId","offerName","offerDescription","offerTechnicalDescription","offerReference","profileId","profileName","status","isDefault","canBeSold","businessModel","isExclusive","isPrepaid","expirationDate","provisioningNeeded","assignationDate"]},"admin_users_GetUserProfilesSuccess":{"type":"object","properties":{"subscriptionId":{"type":"string","description":"Id of company subscription to which user profile is assigned (one of the subscriptions available to user's company)"},"offerId":{"type":"string","description":"Id of the offer to which company subscription is attached"},"offerName":{"type":"string","description":"Name of the offer to which company subscription is attached"},"offerDescription":{"type":"string","description":"Description of the offer to which company subscription is attached"},"offerTechnicalDescription":{"type":"string","description":"Technical description of the subscribed offer"},"offerReference":{"type":"string","description":"Key used for referencing the subscribed offer. Well know offer References are: RB-Essential, RB-Business, RB-Enterprise, RB-Conference."},"profileId":{"type":"string","description":"Id of the profile to which company subscription is attached"},"profileName":{"type":"string","description":"Name of the profile to which company subscription is attached"},"status":{"type":"string","description":"Status of the company subscription to which user profile is assigned   \n  \nPossible values: `active`, `alerting`, `hold`, `terminated`"},"isDefault":{"type":"boolean","description":"Indicates if this profile is linked to user's company's subscription to default offer (i.e. Essential)"},"canBeSold":{"type":"boolean","description":"Indicates if this profile is linked a subscription for a paid offer.   \nSome offers are not be sold (Essential, Beta, Demo, ...).   \nIf canBeSold is true, the subscription is billed."},"businessModel":{"type":"string","description":"Indicates the business model associated to the subscribed offer (number of users, usage, ...) \n\n* `nb_users`: Licencing business model. Offers having this business model are billed according to the number of users bought for it. This should be the business model for Business and Enterprise offers.\n* `usage`: Offers having this business model are billed based on service consumption (whatever the number of users assigned to the subscription of this offer). This should be the business model for Conference offer.\n* `none`: no business model. Used for offers which are not sold (like Essential, Beta, ...).\n\n","enum":["nb_users","usage","none"]},"isExclusive":{"type":"boolean","description":"Indicates if this profile is relative to a subscription for an exclusive offer (if the user has already an exclusive offer assigned, it won't be possible to assign a second exclusive offer).   \nUsed on GUI side to know if the subscription to assign to a user profile has to be displayed as a radio button or as a check box."},"isPrepaid":{"type":"boolean","description":"Indicates if this profile is relative to a subscription for a prepaid offer"},"expirationDate":{"type":"string","description":"Expiration date of the subscription to the prepaid offer (creationDate + prepaidDuration)","format":"date"},"provisioningNeeded":{"type":"array","description":"Indicates if provisioning is needed on other component when assigning the user profile to this subscription (depends of thus subscribed offer)","items":{"$ref":"#/definitions/provisioningNeeded"}},"assignationDate":{"type":"string","description":"Date when the subscription was attached to user profile"}},"required":["subscriptionId","offerId","offerName","offerDescription","offerTechnicalDescription","offerReference","profileId","profileName","status","isDefault","canBeSold","businessModel","isExclusive","isPrepaid","expirationDate","provisioningNeeded","assignationDate"]}},"tags":[{"name":"Companies Avatar"},{"name":"Companies Banner"},{"name":"Companies Custom Data"},{"name":"Companies Sites"},{"name":"Companies"},{"name":"Organisations Companies"},{"name":"Organisations"},{"name":"Sites Systems"},{"name":"Sites"},{"name":"Systems Groups"},{"name":"Systems Phone Numbers"},{"name":"Systems Phone Numbers Multi Companies"},{"name":"Systems Reset Password"},{"name":"Systems"},{"name":"Users Companies"},{"name":"Users Networks"},{"name":"Users Profiles"},{"name":"Users"}],"x-servers":[{"url":"https://openrainbow.com","description":"Production server"},{"url":"https://sandbox.openrainbow.com","description":"Development server"}],"x-tagGroups":[{"name":"Companies","tags":["Companies Avatar","Companies Banner","Companies Custom Data","Companies Sites","Companies"]},{"name":"Organisations","tags":["Organisations Companies","Organisations"]},{"name":"Sites","tags":["Sites Systems","Sites"]},{"name":"Systems","tags":["Systems Groups","Systems Phone Numbers","Systems Phone Numbers Multi Companies","Systems Reset Password","Systems"]},{"name":"Users","tags":["Users Companies","Users Networks","Users Profiles","Users"]}]}